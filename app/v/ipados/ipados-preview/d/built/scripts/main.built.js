!function e(t,i,n){function r(a,o){if(!i[a]){if(!t[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[a]={exports:{}};t[a][0].call(c.exports,(function(e){var i=t[a][1][e];return r(i||e)}),c,c.exports,e,t,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,i){"use strict";function n(){this._createElemnts(),this._bindEvents()}var r=n.prototype;r._bindEvents=function(){this._onResize=this._resize.bind(this)},r._createElemnts=function(){this.span=document.createElement("span");var e=this.span.style;e.visibility="hidden",e.position="absolute",e.top="0",e.bottom="0",e.zIndex="-1",this.span.innerHTML="&nbsp;",this.iframe=document.createElement("iframe");var t=this.iframe.style;t.position="absolute",t.top="0",t.left="0",t.width="100%",t.height="100%",this.span.appendChild(this.iframe),document.body.appendChild(this.span)},r.detect=function(e){this.originalSize=e||17,this.currentSize=parseFloat(window.getComputedStyle(this.span)["font-size"]),this.currentSize>this.originalSize&&this._onResize(),this.isDetecting||(this.iframe.contentWindow.addEventListener("resize",this._onResize),this.isDetecting=!0)},r._resize=function(e){this.currentSize=parseFloat(window.getComputedStyle(this.span)["font-size"]),this.originalSize<this.currentSize?document.documentElement.classList.add("text-zoom"):document.documentElement.classList.remove("text-zoom"),window.dispatchEvent(new Event("resize")),window.dispatchEvent(new CustomEvent("resize:text-zoom",{detail:this}))},r.getScale=function(){return this.currentSize/this.originalSize},r.remove=function(){this.isDetecting&&(this.iframe.contentWindow.removeEventListener("resize",this._onResize),this.isDetecting=!1)},r.destroy=function(){this.remove(),this.span&&this.span.parentElement&&this.span.parentElement.removeChild(this.span),this.span=null,this.iframe=null},t.exports=new n},{}],2:[function(e,t,i){"use strict";var n=e(3),r={complete:function(e,t){},error:function(e,t){},method:"GET",headers:{},success:function(e,t,i){},timeout:5e3},s={ajax:function(e,t){t=function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]}({},r,t),"//"===e.substr(0,2)&&(e=window.location.protocol+e);var i=n(e);return i.open(t.method,e),i.setTransportHeaders(t.headers),i.setReadyStateChangeHandlers(t.complete,t.error,t.success),i.setTimeout(t.timeout,t.error,t.complete),i.send(t.data),i},get:function(e,t){return t.method="GET",s.ajax(e,t)},head:function(e,t){return t.method="HEAD",s.ajax(e,t)},post:function(e,t){return t.method="POST",s.ajax(e,t)}};t.exports=s},{3:3}],3:[function(e,t,i){"use strict";var n=e(6),r=e(5),s=/.*(?=:\/\/)/,a=/^.*:\/\/|\/.+$/g,o=window.XDomainRequest&&document.documentMode<10;t.exports=function(e,t){return new(o&&function(e){return!!e.match(s)&&e.replace(a,"")!==window.location.hostname}(e)?r:n)}},{5:5,6:6}],4:[function(e,t,i){"use strict";var n=function(){};n.create=function(){var e=function(){};return e.prototype=n.prototype,new e},n.prototype.open=function(e,t){e=e.toUpperCase(),this.xhr.open(e,t)},n.prototype.send=function(e){this.xhr.send(e)},n.prototype.setTimeout=function(e,t,i){this.xhr.ontimeout=function(){t(this.xhr,this.status),i(this.xhr,this.status)}.bind(this)},n.prototype.setTransportHeaders=function(e){for(var t in e)this.xhr.setRequestHeader(t,e[t])},t.exports=n},{}],5:[function(e,t,i){"use strict";var n=e(23)(e(30)),r=e(4),s=e(35),a=function(){this.xhr=new XDomainRequest};(a.prototype=r.create()).setReadyStateChangeHandlers=function(e,t,i){this.xhr.onerror=function(){t(this.xhr,this.status),e(this.xhr,this.status)}.bind(this),this.xhr.onload=function(){i(this.xhr.responseText,this.xhr.status,this.xhr),e(this.xhr,this.status)}.bind(this)},a.prototype.send=function(e){e&&"object"===(0,n.default)(e)&&(e=s(e)),this.xhr.send(e)},a.prototype.setTransportHeaders=function(e){},t.exports=a},{23:23,30:30,35:35,4:4}],6:[function(e,t,i){"use strict";var n=e(4),r=function(){this.xhr=new XMLHttpRequest};(r.prototype=n.create()).setReadyStateChangeHandlers=function(e,t,i){this.xhr.onreadystatechange=function(n){4===this.xhr.readyState&&(clearTimeout(this.timeout),this.xhr.status>=200&&this.xhr.status<300?(i(this.xhr.responseText,this.xhr.status,this.xhr),e(this.xhr,this.status)):(t(this.xhr,this.status),e(this.xhr,this.status)))}.bind(this)},t.exports=r},{4:4}],7:[function(e,t,i){"use strict";var n=!1,r=window||self;try{n=!!r.localStorage.getItem("f7c9180f-5c45-47b4-8de4-428015f096c0")}catch(e){}t.exports=n},{}],8:[function(e,t,i){"use strict";t.exports=e(9)("error")},{9:9}],9:[function(e,t,i){"use strict";var n=e(23)(e(30)),r=e(7);t.exports=function(e){return function(){if(r&&"object"===(0,n.default)(window.console)&&"function"==typeof console[e])return console[e].apply(console,Array.prototype.slice.call(arguments,0))}}},{23:23,30:30,7:7}],10:[function(e,t,i){"use strict";t.exports=e(9)("log")},{9:9}],11:[function(e,t,i){"use strict";t.exports=e(9)("warn")},{9:9}],12:[function(e,t,i){"use strict";t.exports={EventEmitterMicro:e(13)}},{13:13}],13:[function(e,t,i){"use strict";function n(){this._events={}}var r=n.prototype;r.on=function(e,t){this._events[e]=this._events[e]||[],this._events[e].unshift(t)},r.once=function(e,t){var i=this;this.on(e,(function n(r){i.off(e,n),void 0!==r?t(r):t()}))},r.off=function(e,t){if(this.has(e)){if(1===arguments.length)return this._events[e]=null,void delete this._events[e];var i=this._events[e].indexOf(t);-1!==i&&this._events[e].splice(i,1)}},r.trigger=function(e,t){if(this.has(e))for(var i=this._events[e].length-1;i>=0;i--)void 0!==t?this._events[e][i](t):this._events[e][i]()},r.has=function(e){return e in this._events!=!1&&0!==this._events[e].length},r.destroy=function(){for(var e in this._events)this._events[e]=null;this._events=null},t.exports=n},{}],14:[function(e,t,i){t.exports=function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}},{}],15:[function(e,t,i){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},{}],16:[function(e,t,i){function n(e,t,i,n,r,s,a){try{var o=e[s](a),u=o.value}catch(e){return void i(e)}o.done?t(u):Promise.resolve(u).then(n,r)}t.exports=function(e){return function(){var t=this,i=arguments;return new Promise((function(r,s){var a=e.apply(t,i);function o(e){n(a,r,s,o,u,"next",e)}function u(e){n(a,r,s,o,u,"throw",e)}o(void 0)}))}}},{}],17:[function(e,t,i){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],18:[function(e,t,i){var n=e(27);function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e,i,a){return r()?t.exports=s=Reflect.construct:t.exports=s=function(e,t,i){var r=[null];r.push.apply(r,t);var s=new(Function.bind.apply(e,r));return i&&n(s,i.prototype),s},s.apply(null,arguments)}t.exports=s},{27:27}],19:[function(e,t,i){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},{}],20:[function(e,t,i){var n=e(28);function r(e,i,s){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=r=Reflect.get:t.exports=r=function(e,t,i){var r=n(e,t);if(r){var s=Object.getOwnPropertyDescriptor(r,t);return s.get?s.get.call(i):s.value}},r(e,i,s||e)}t.exports=r},{28:28}],21:[function(e,t,i){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},{}],22:[function(e,t,i){var n=e(27);t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},{27:27}],23:[function(e,t,i){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}],24:[function(e,t,i){t.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},{}],25:[function(e,t,i){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},{}],26:[function(e,t,i){var n=e(30),r=e(15);t.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?r(e):t}},{15:15,30:30}],27:[function(e,t,i){function n(e,i){return t.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,i)}t.exports=n},{}],28:[function(e,t,i){var n=e(21);t.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},{21:21}],29:[function(e,t,i){var n=e(14),r=e(24),s=e(25);t.exports=function(e){return n(e)||r(e)||s()}},{14:14,24:24,25:25}],30:[function(e,t,i){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(e){return typeof e}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.exports=n},{}],31:[function(e,t,i){var n=function(e){"use strict";var t=Object.prototype,i=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function o(e,t,i,n){var r=t&&t.prototype instanceof c?t:c,s=Object.create(r.prototype),a=new E(n||[]);return s._invoke=function(e,t,i){var n="suspendedStart";return function(r,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw s;return x()}for(i.method=r,i.arg=s;;){var a=i.delegate;if(a){var o=_(a,i);if(o){if(o===l)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var c=u(e,t,i);if("normal"===c.type){if(n=i.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n="completed",i.method="throw",i.arg=c.arg)}}}(e,i,a),s}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=o;var l={};function c(){}function h(){}function d(){}var f={};f[r]=function(){return this};var m=Object.getPrototypeOf,p=m&&m(m(w([])));p&&p!==t&&i.call(p,r)&&(f=p);var v=d.prototype=c.prototype=Object.create(f);function y(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function g(e){var t;this._invoke=function(n,r){function s(){return new Promise((function(t,s){!function t(n,r,s,a){var o=u(e[n],e,r);if("throw"!==o.type){var l=o.arg,c=l.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,s,a)}),(function(e){t("throw",e,s,a)})):Promise.resolve(c).then((function(e){l.value=e,s(l)}),(function(e){return t("throw",e,s,a)}))}a(o.arg)}(n,r,t,s)}))}return t=t?t.then(s,s):s()}}function _(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function w(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=v.constructor=d,d.constructor=h,d[a]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(g.prototype),g.prototype[s]=function(){return this},e.AsyncIterator=g,e.async=function(t,i,n,r){var s=new g(o(t,i,n,r));return e.isGeneratorFunction(i)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(v),v[a]="Generator",v[r]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=w,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(i,n){return a.type="throw",a.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var o=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(o&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),k(i),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;k(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:w(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),l}},e}("object"==typeof t?t.exports:{});try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},{}],32:[function(e,t,i){t.exports=e(31)},{31:31}],33:[function(e,t,i){"use strict";var n=e(23)(e(30)),r=e(34);t.exports=function(e,t){if("object"!==(0,n.default)(e))throw new TypeError("defaults: must provide a defaults object");if(t=t||{},"object"!==(0,n.default)(t))throw new TypeError("defaults: options must be a typeof object");return r({},e,t)}},{23:23,30:30,34:34}],34:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Array/prototype.forEach");var n=Object.prototype.hasOwnProperty;t.exports=function(){var e,t;return e=arguments.length<2?[{},arguments[0]]:[].slice.call(arguments),t=e.shift(),e.forEach((function(e){if(null!=e)for(var i in e)n.call(e,i)&&(t[i]=e[i])})),t}},{undefined:void 0}],35:[function(e,t,i){"use strict";var n=e(23)(e(30)),r=e(64);t.exports=function(e){if("object"!==(0,n.default)(e))throw new TypeError("toQueryParameters error: argument is not an object");return r(e,!1)}},{23:23,30:30,64:64}],36:[function(e,t,i){"use strict";var n,r=e(12).EventEmitterMicro,s=e(61),a=e(47);function o(e){e=e||{},r.call(this),this.id=a.getNewID(),this.executor=e.executor||s,this._reset(),this._willRun=!1,this._didDestroy=!1}(n=o.prototype=Object.create(r.prototype)).run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},n.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},n.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,r.prototype.destroy.call(this),this._didDestroy=!0,e},n.willRun=function(){return this._willRun},n.isRunning=function(){return this._isRunning},n._subscribe=function(){return this.executor.subscribe(this)},n._unsubscribe=function(){return this.executor.unsubscribe(this)},n._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},n._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},n._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=o},{12:12,47:47,61:61}],37:[function(e,t,i){"use strict";var n=e(39),r=function(e){this.rafEmitter=new n,this.rafEmitter.on(e,this._onRAFExecuted.bind(this)),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._frameCallbacks=[],this._nextFrameCallbacks=[],this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},s=r.prototype;s.requestAnimationFrame=function(e){return this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2,this._currentFrameID},s.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),-1!==this._cancelFrameIdx&&(this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel())},s._onRAFExecuted=function(e){for(this._frameCallbacks=this._nextFrameCallbacks,this._frameCallbackLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks=[],this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e)},t.exports=r},{39:39}],38:[function(e,t,i){"use strict";var n=e(37),r=function(){this.events={}},s=r.prototype;s.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].requestAnimationFrame},s.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].cancelAnimationFrame},t.exports=new r},{37:37}],39:[function(e,t,i){"use strict";var n=e(36),r=function(e){n.call(this,e)};(r.prototype=Object.create(n.prototype))._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=r},{36:36}],40:[function(e,t,i){"use strict";var n=e(38);t.exports=n.requestAnimationFrame("draw")},{38:38}],41:[function(e,t,i){"use strict";var n=e(38);t.exports=n.requestAnimationFrame("update")},{38:38}],42:[function(e,t,i){"use strict";var n=e(33),r=e(43).LiveQueue,s=e(12).EventEmitterMicro,a=e(41),o=e(40),u={container:document.body,includeContainer:!1},l={loadingPoolSize:8,timeout:null,imageDataAttribute:"data-progressive-image",imageAnimate:!0,imageAnimateClass:"progressive-image-animated"};function c(e){s.call(this),this.options=n(u,e),this.loadingOptions=null,this.els=[],this.loadingQueue=null,this._queueItems=[],this._queueItemsObj={},this._loadOrder=[],this._timeout=null,this._didCallLoad=!1}c.Events={ImageLoad:"image-load",Complete:"complete"};var h=c.prototype=Object.create(s.prototype);h.load=function(e){this._didCallLoad||(this._didCallLoad=!0,this.loadingOptions=n(l,e),this.loadingQueue=new r(this.loadingOptions.loadingPoolSize),this.els=Array.from(this._getProgressiveImageElements()),this.options.includeContainer&&this.options.container.hasAttribute(this._getProgressiveImageDataAttribute())&&this.els.unshift(this.options.container),o(function(){var e,t,i=this.els.length;for(e=0;e<i;e++)t={queueItem:this.loadingQueue.enqueue(this._loadNextItem.bind(this,e),e),el:this.els[e],id:e},this._queueItems.push(t),this._queueItemsObj[e]=t,this.loadingOptions.imageAnimate&&this.els[e].classList.add(this.loadingOptions.imageAnimateClass);a(function(){this.loadingQueue.start(),"number"==typeof this.loadingOptions.timeout&&(this._timeout=setTimeout(this.cancel.bind(this),this.loadingOptions.timeout))}.bind(this))}.bind(this)))},h.setVisible=function(e){return new Promise(function(t,i){o(function(){e.removeAttribute(this._getProgressiveImageDataAttribute()),t(),e=null}.bind(this))}.bind(this))},h.cancel=function(){if(this.els){var e,t=this.els.length;for(e=0;e<t;e++)this.setVisible(this.els[e]),this.loadingOptions.imageAnimate&&o(function(){this.els[e].setAttribute("data-progressive-image-loaded","")}.bind(this,e))}this._handleLoadingComplete()},h.destroy=function(){this.cancel(),this.off(),s.prototype.destroy.call(this)},h._loadNextItem=function(e){return new Promise(function(e,t,i){var n=this._queueItemsObj[e];this._loadAndSetVisible(n.el).then(function(){var e=this._queueItems.indexOf(n);this._queueItems.splice(e,1),this._queueItemsObj[n.id]=null,t(),this._handleImageLoad(n.el),n=t=null,1===this.loadingQueue.count()&&this._handleLoadingComplete()}.bind(this))}.bind(this,e))},h._loadAndSetVisible=function(e){return new Promise(function(t,i){this.setVisible(e).then(function(){this._getBackgroundImageSrc(e).then(function(i){this._loadImage(i).then(t),e=null}.bind(this))}.bind(this))}.bind(this))},h._getBackgroundImageSrc=function(e){return new Promise(function(t,i){a(function(){var i=e.currentStyle;i||(i=window.getComputedStyle(e,!1)),e=null,0!==i.backgroundImage.indexOf("url(")?t(null):t(i.backgroundImage.slice(4,-1).replace(/"/g,""))}.bind(this))}.bind(this))},h._getProgressiveImageDataAttribute=function(){return this.loadingOptions.imageDataAttribute},h._getProgressiveImageCSSQuery=function(){return"["+this._getProgressiveImageDataAttribute()+"]"},h._getProgressiveImageElements=function(){return this.options.container.querySelectorAll(this._getProgressiveImageCSSQuery())||[]},h._loadImage=function(e){return new Promise(this._loadImagePromiseFunc.bind(this,e))},h._loadImagePromiseFunc=function(e,t,i){if(e){var n=new Image;n.addEventListener("load",(function e(){this.removeEventListener("load",e),t(this),t=null})),n.src=e}else t(null)},h._clearTimeout=function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null)},h._handleImageLoad=function(e){o(function(){this.trigger(c.Events.ImageLoad,e),this.loadingOptions.imageAnimate&&e.setAttribute("data-progressive-image-loaded",""),e=null}.bind(this))},h._handleLoadingComplete=function(){this.loadingQueue.stop(),this._clearTimeout(),this.trigger(c.Events.Complete)},t.exports=c},{12:12,33:33,40:40,41:41,43:43}],43:[function(e,t,i){"use strict";t.exports={Queue:e(45),QueueItem:e(46),LiveQueue:e(44)}},{44:44,45:45,46:46}],44:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Promise"),e("@marcom/ac-polyfills/requestAnimationFrame"),e("@marcom/ac-polyfills/Function/prototype.bind");var n=e(45),r=e(46);function s(e){this._queue=new n,this._maxProcesses=e||1,this._availableSlots=this._maxProcesses,this._rafId=0,this._isRunning=!1,this._boundFunctions={_run:this._run.bind(this),_releaseSlot:this._releaseSlot.bind(this)}}var a=s.prototype;a.start=function(){this._isRunning&&cancelAnimationFrame(this._rafId),this._rafId=requestAnimationFrame(this._boundFunctions._run),this._isRunning=!0},a.pause=function(){this._isRunning&&(cancelAnimationFrame(this._rafId),this._rafId=0),this._isRunning=!1},a.stop=function(){this.pause(),this.clear()},a.enqueue=function(e,t){if("function"!=typeof e)throw new Error("LiveQueue can only enqueue functions");void 0===t&&(t=n.PRIORITY_DEFAULT);var i=new r(e,t);return this.enqueueQueueItem(i)},a.enqueueQueueItem=function(e){return this._queue.enqueueQueueItem(e),this._isRunning&&0===this._rafId&&this.start(),e},a.dequeueQueueItem=function(e){return this._queue.dequeueQueueItem(e)},a.clear=function(){this._queue=new n},a.destroy=function(){this.pause(),this._isRunning=!1,this._queue=null,this._boundFunctions=null},a.count=function(){return this._queue.count()+this.pending()},a.pending=function(){return this._maxProcesses-this._availableSlots},a.isEmpty=function(){return 0===this.count()},a._run=function(){if(this._isRunning&&(this._rafId=requestAnimationFrame(this._boundFunctions._run),!this._queue.isEmpty()&&0!==this._availableSlots)){var e=this._queue.dequeue().data();this._isPromise(e)&&(this._retainSlot(),e.then(this._boundFunctions._releaseSlot,this._boundFunctions._releaseSlot)),this._stopRunningIfDone()}},a._retainSlot=function(){this._availableSlots--},a._releaseSlot=function(){this._availableSlots++,this._stopRunningIfDone()},a._stopRunningIfDone=function(){0!=this._rafId&&0===this._queue.count()&&this._availableSlots==this._maxProcesses&&(cancelAnimationFrame(this._rafId),this._rafId=0)},a._isPromise=function(e){return!(!e||"function"!=typeof e.then)},t.exports=s},{45:45,46:46,undefined:void 0}],45:[function(e,t,i){"use strict";var n=e(46);function r(){this._items=[]}var s=r.prototype;s.enqueue=function(e,t){void 0===t&&(t=r.PRIORITY_DEFAULT);var i=new n(e,t);return this.enqueueQueueItem(i)},s.enqueueQueueItem=function(e){return-1===this._items.indexOf(e)&&this._items.push(e),e},s.dequeue=function(){this._heapSort();var e=this._items.length-1,t=this._items[0];return this._items[0]=this._items[e],this._items.pop(),t},s.dequeueQueueItem=function(e){var t=this._items.indexOf(e);return t>-1&&this._items.splice(t,1),e},s.peek=function(){return 0==this.count()?null:(this._heapSort(),this._items[0])},s.isEmpty=function(){return 0===this._items.length},s.count=function(){return this._items.length},s.toString=function(){for(var e=["Queue total items: "+this.count()+"\n"],t=0;t<this.count();++t)e.push(this._items[t].toString()+"\n");return e.join("")},s._heapSort=function(){for(var e=this._items.length-1;e>=0;e--)for(var t=e;t>0;){0;var i=Math.floor((t-1)/2);if(this._items[t].compareTo(this._items[i])>=0)break;var n=this._items[t];this._items[t]=this._items[i],this._items[i]=n,t=i}},r.PRIORITY_LOW=10,r.PRIORITY_DEFAULT=5,r.PRIORITY_HIGH=1,t.exports=r},{46:46}],46:[function(e,t,i){"use strict";var n=0;function r(e,t){this.priority=t,this.data=e,this.insertionOrder=n++}var s=r.prototype;s.compareTo=function(e){return this.priority<e.priority?-1:this.priority>e.priority?1:this.insertionOrder<e.insertionOrder?-1:1},s.toString=function(){return"QueueItem {priority:"+this.priority+",\tdata:"+this.data+"\tinsertionOrder:"+this.insertionOrder+"}"},t.exports=r},{}],47:[function(e,t,i){"use strict";var n=e(62).SharedInstance,r=function(){this._currentID=0};r.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=n.share("ac-raf-emitter-id-generator:sharedRAFEmitterIDGeneratorInstance","1.0.3",r)},{62:62}],48:[function(e,t,i){"use strict";t.exports={majorVersionNumber:"3.x"}},{}],49:[function(e,t,i){"use strict";var n,r=e(12).EventEmitterMicro,s=e(58),a=e(57);function o(e){e=e||{},r.call(this),this.id=a.getNewID(),this.executor=e.executor||s,this._reset(),this._willRun=!1,this._didDestroy=!1}(n=o.prototype=Object.create(r.prototype)).run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},n.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},n.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,r.prototype.destroy.call(this),this._didDestroy=!0,e},n.willRun=function(){return this._willRun},n.isRunning=function(){return this._isRunning},n._subscribe=function(){return this.executor.subscribe(this)},n._unsubscribe=function(){return this.executor.unsubscribe(this)},n._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},n._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},n._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=o},{12:12,57:57,58:58}],50:[function(e,t,i){"use strict";var n,r=e(13);function s(e){e=e||{},this._reset(),this.updatePhases(),this.eventEmitter=new r,this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}(n=s.prototype).frameRequestedPhase="requested",n.startPhase="start",n.runPhases=["update","external","draw"],n.endPhase="end",n.disabledPhase="disabled",n.beforePhaseEventPrefix="before:",n.afterPhaseEventPrefix="after:",n.subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},n.subscribeImmediate=function(e,t){return this._totalSubscribeCount++,this._subscribers[e.id]||(t?this._subscribersOrder.splice(this._currentSubscriberIndex+1,0,e.id):this._subscribersOrder.unshift(e.id),this._subscribers[e.id]=e,this._subscriberArrayLength++,this._subscriberCount++),this._totalSubscribeCount},n.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},n.getSubscribeID=function(){return this._totalSubscribeCount+=1},n.destroy=function(){var e=this._cancel();return this.eventEmitter.destroy(),this.eventEmitter=null,this.phases=null,this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},n.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},n.updatePhases=function(){this.phases||(this.phases=[]),this.phases.length=0,this.phases.push(this.frameRequestedPhase),this.phases.push(this.startPhase),Array.prototype.push.apply(this.phases,this.runPhases),this.phases.push(this.endPhase),this._runPhasesLength=this.runPhases.length,this._phasesLength=this.phases.length},n._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this.phase===this.disabledPhase&&(this.phaseIndex=0,this.phase=this.phases[this.phaseIndex]),!0},n._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},n._onAnimationFrame=function(e){for(this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this.phaseIndex=0,this.phase=this.phases[this.phaseIndex],this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameStart(this._rafData);for(this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._runPhaseIndex=0;this._runPhaseIndex<this._runPhasesLength;this._runPhaseIndex++){for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]].trigger(this.phase,this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase)}for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameEnd(this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._willRun?(this.phaseIndex=0,this.phaseIndex=this.phases[this.phaseIndex]):this._reset()},n._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},n._reset=function(){this._rafData||(this._rafData={}),this._rafData.time=0,this._rafData.delta=0,this._rafData.fps=0,this._rafData.naturalFps=0,this._rafData.timeNow=0,this._subscribers={},this._subscribersOrder=[],this._currentSubscriberIndex=-1,this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0,this._runPhaseIndex=-1,this.phaseIndex=-1,this.phase=this.disabledPhase},t.exports=s},{13:13}],51:[function(e,t,i){"use strict";var n=e(53),r=function(e){this.phase=e,this.rafEmitter=new n,this._cachePhaseIndex(),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._onBeforeRAFExecutorStart=this._onBeforeRAFExecutorStart.bind(this),this._onBeforeRAFExecutorPhase=this._onBeforeRAFExecutorPhase.bind(this),this._onAfterRAFExecutorPhase=this._onAfterRAFExecutorPhase.bind(this),this.rafEmitter.on(this.phase,this._onRAFExecuted.bind(this)),this.rafEmitter.executor.eventEmitter.on("before:start",this._onBeforeRAFExecutorStart),this.rafEmitter.executor.eventEmitter.on("before:"+this.phase,this._onBeforeRAFExecutorPhase),this.rafEmitter.executor.eventEmitter.on("after:"+this.phase,this._onAfterRAFExecutorPhase),this._frameCallbacks=[],this._currentFrameCallbacks=[],this._nextFrameCallbacks=[],this._phaseActive=!1,this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._currentFrameCallbacksLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},s=r.prototype;s.requestAnimationFrame=function(e,t){return!0===t&&this.rafEmitter.executor.phaseIndex>0&&this.rafEmitter.executor.phaseIndex<=this.phaseIndex?this._phaseActive?(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!0),this._frameCallbacks.push(this._currentFrameID,e),this._frameCallbackLength+=2):(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!1),this._currentFrameCallbacks.push(this._currentFrameID,e),this._currentFrameCallbacksLength+=2):(this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2),this._currentFrameID},s.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelNextAnimationFrame():(this._cancelFrameIdx=this._currentFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelCurrentAnimationFrame():(this._cancelFrameIdx=this._frameCallbacks.indexOf(e),this._cancelFrameIdx>-1&&this._cancelRunningAnimationFrame()))},s._onRAFExecuted=function(e){for(this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e);this._frameCallbacks.length=0,this._frameCallbackLength=0},s._onBeforeRAFExecutorStart=function(){Array.prototype.push.apply(this._currentFrameCallbacks,this._nextFrameCallbacks.splice(0,this._nextFrameCallbacksLength)),this._currentFrameCallbacksLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks.length=0,this._nextFrameCallbacksLength=0},s._onBeforeRAFExecutorPhase=function(){this._phaseActive=!0,Array.prototype.push.apply(this._frameCallbacks,this._currentFrameCallbacks.splice(0,this._currentFrameCallbacksLength)),this._frameCallbackLength=this._currentFrameCallbacksLength,this._currentFrameCallbacks.length=0,this._currentFrameCallbacksLength=0},s._onAfterRAFExecutorPhase=function(){this._phaseActive=!1},s._cachePhaseIndex=function(){this.phaseIndex=this.rafEmitter.executor.phases.indexOf(this.phase)},s._cancelRunningAnimationFrame=function(){this._frameCallbacks.splice(this._cancelFrameIdx,2),this._frameCallbackLength-=2},s._cancelCurrentAnimationFrame=function(){this._currentFrameCallbacks.splice(this._cancelFrameIdx,2),this._currentFrameCallbacksLength-=2},s._cancelNextAnimationFrame=function(){this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel()},t.exports=r},{53:53}],52:[function(e,t,i){"use strict";var n=e(51),r=function(){this.events={}},s=r.prototype;s.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].requestAnimationFrame},s.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].cancelAnimationFrame},t.exports=new r},{51:51}],53:[function(e,t,i){"use strict";var n=e(49),r=function(e){n.call(this,e)};(r.prototype=Object.create(n.prototype))._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=r},{49:49}],54:[function(e,t,i){"use strict";var n=e(52);t.exports=n.cancelAnimationFrame("update")},{52:52}],55:[function(e,t,i){"use strict";var n=e(52);t.exports=n.requestAnimationFrame("draw")},{52:52}],56:[function(e,t,i){"use strict";var n=e(52);t.exports=n.requestAnimationFrame("external")},{52:52}],57:[function(e,t,i){"use strict";var n=e(62).SharedInstance,r=e(48).majorVersionNumber,s=function(){this._currentID=0};s.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=n.share("@marcom/ac-raf-emitter/sharedRAFEmitterIDGeneratorInstance",r,s)},{48:48,62:62}],58:[function(e,t,i){"use strict";var n=e(62).SharedInstance,r=e(48).majorVersionNumber,s=e(50);t.exports=n.share("@marcom/ac-raf-emitter/sharedRAFExecutorInstance",r,s)},{48:48,50:50,62:62}],59:[function(e,t,i){"use strict";var n=e(52);t.exports=n.requestAnimationFrame("update")},{52:52}],60:[function(e,t,i){"use strict";var n;function r(e){e=e||{},this._reset(),this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}e("@marcom/ac-polyfills/performance/now"),(n=r.prototype).subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},n.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},n.trigger=function(e,t){var i;for(i=0;i<this._subscriberArrayLength;i++)null!==this._subscribers[this._subscribersOrder[i]]&&!1===this._subscribers[this._subscribersOrder[i]]._didDestroy&&this._subscribers[this._subscribersOrder[i]].trigger(e,t)},n.destroy=function(){var e=this._cancel();return this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},n.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},n._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),!0},n._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},n._onSubscribersAnimationFrameStart=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&!1===this._subscribers[this._subscribersOrder[t]]._didDestroy&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameStart(e)},n._onSubscribersAnimationFrameEnd=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&!1===this._subscribers[this._subscribersOrder[t]]._didDestroy&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameEnd(e)},n._onAnimationFrame=function(e){this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this._onSubscribersAnimationFrameStart(this._rafData),this.trigger("update",this._rafData),this.trigger("external",this._rafData),this.trigger("draw",this._rafData),this._onSubscribersAnimationFrameEnd(this._rafData),this._willRun||this._reset()},n._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},n._reset=function(){this._rafData={time:0,delta:0,fps:0,naturalFps:0,timeNow:0},this._subscribers={},this._subscribersOrder=[],this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0},t.exports=r},{undefined:void 0}],61:[function(e,t,i){"use strict";var n=e(62).SharedInstance,r=e(60);t.exports=n.share("ac-raf-executor:sharedRAFExecutorInstance","2.0.1",r)},{60:60,62:62}],62:[function(e,t,i){"use strict";t.exports={SharedInstance:e(63)}},{63:63}],63:[function(e,t,i){"use strict";var n,r=e(23)(e(30)),s=window,a=s.AC,o=(n={},{get:function(e,t){var i=null;return n[e]&&n[e][t]&&(i=n[e][t]),i},set:function(e,t,i){return n[e]||(n[e]={}),n[e][t]="function"==typeof i?new i:i,n[e][t]},share:function(e,t,i){var n=this.get(e,t);return n||(n=this.set(e,t,i)),n},remove:function(e,t){var i=(0,r.default)(t);if("string"!==i&&"number"!==i)n[e]&&(n[e]=null);else{if(!n[e]||!n[e][t])return;n[e][t]=null}}});a||(a=s.AC={}),a.SharedInstance||(a.SharedInstance=o),t.exports=a.SharedInstance},{23:23,30:30}],64:[function(e,t,i){"use strict";t.exports=function(e,t){var i="";if(e){var n=Object.keys(e),r=n.length-1;n.forEach((function(t,n){var s=e[t],a=(t=t.trim())+(s=null===(s=s&&"string"==typeof s?s.trim():s)?"":"="+s)+(n===r?"":"&");i=i?i.concat(a):a}))}return i&&!1!==t?"?"+i:i}},{}],65:[function(e,t,i){"use strict";t.exports=function(e){var t=(e=(e=e||window.location.search).replace(/^[^?]*\?/,""))?e.split("&"):[],i={},n=new RegExp("=");return t.forEach((function(e){var t,r;if(n.test(e)){var s=e.split("=",2);t=s[0],r=s[1]}else t=e,r=null;i[t]=r})),i}},{}],66:[function(e,t,i){"use strict";var n=e(65);t.exports=function(e){var t,i="",r=!1;return e?window.URL&&"function"==typeof window.URL?t=new URL(e,window.location):((t=document.createElement("a")).href=e,t.href=t.href,function(e){var t=e.port,i=new RegExp(":"+t);return t&&!i.test(e.href)&&i.test(e.host)}(t)&&(i=t.host.replace(new RegExp(":"+t.port),""),r=!0)):t=window.location,{hash:t.hash,host:i||t.host,hostname:t.hostname,href:t.href,origin:t.origin||t.protocol+"//"+(i||t.host),pathname:t.pathname,port:r?"":t.port,protocol:t.protocol,search:t.search,searchParams:n(t.search)}}},{65:65}],67:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,e),this.options=i,"loading"===document.readyState?document.addEventListener("readystatechange",(function(e){"interactive"===document.readyState&&t._init()})):this._init()}return(0,s.default)(e,[{key:"_init",value:function(){if(this._images=Array.from(document.querySelectorAll("*[".concat(e.DATA_ATTRIBUTE,"]"))),this.AnimSystem=this._findAnim(),null===this.AnimSystem)return null;this._addKeyframesToImages()}},{key:"_defineKeyframeOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=t.getAttribute(e.DATA_DOWNLOAD_AREA_KEYFRAME)||"{}";return Object.assign({},{start:"t - 200vh",end:"b + 100vh",event:"AnimLazyImage"},JSON.parse(i))}},{key:"_addKeyframesToImages",value:function(){var e=this;this._scrollGroup=this.AnimSystem.getGroupForTarget(document.body),this._images.forEach((function(t){e.AnimSystem.getGroupForTarget(t)&&(e._scrollGroup=e.AnimSystem.getGroupForTarget(t));var i=e._defineKeyframeOptions(t);e._scrollGroup.addKeyframe(t,i).controller.once("AnimLazyImage:enter",(function(){e._imageIsInLoadRange(t)}))}))}},{key:"_cleanUpImageAttributes",value:function(t){var i=!1;try{i=this._scrollGroup.getControllerForTarget(t).getNearestKeyframeForAttribute("AnimLazyImage").isCurrentlyInRange}catch(e){i=!1}i||t.setAttribute(e.DATA_ATTRIBUTE,"")}},{key:"_downloadingImageAttributes",value:function(t){t.removeAttribute(e.DATA_ATTRIBUTE)}},{key:"_imageIsInLoadRange",value:function(e){this._downloadImage(e)}},{key:"_downloadImage",value:function(e){this._downloadingImageAttributes(e)}},{key:"_findAnim",value:function(){var e=Array.from(document.querySelectorAll("[data-anim-group],[data-anim-scroll-group],[data-anim-time-group]"));return e.map((function(e){return e._animInfo?e._animInfo.group:null})).filter((function(e){return null!==e})),e[0]&&e[0]._animInfo?e[0]._animInfo.group.anim:(console.error("AnimLazyImage: AnimSystem not found, please initialize anim before instantiating"),null)}}]),e}();a.DATA_DOWNLOAD_AREA_KEYFRAME="data-download-area-keyframe",a.DATA_ATTRIBUTE="data-anim-lazy-image",t.exports=a},{17:17,19:19,23:23}],68:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(20)),l=n(e(22)),c=e(67),h=e(107),d=e(55),f=e(59),m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.default)(this,t),(0,a.default)(this,(0,o.default)(t).call(this,e))}return(0,l.default)(t,e),(0,s.default)(t,[{key:"_init",value:function(){(0,u.default)((0,o.default)(t.prototype),"_init",this).call(this),this._onBreakpointChangeCallback=this._onBreakpointChangeCallback.bind(this),this._addViewportEvents(),this._resetPromises(),this._addMethodsToImageElement()}},{key:"_addViewportEvents",value:function(){var e=this.options.breakpoints?{breakpoints:this.options.breakpoints}:{};this.viewportEmitterMicro=new h(e),this.viewportEmitterMicro.on(h.CHANGE_EVENTS.VIEWPORT,this._onBreakpointChangeCallback),this.viewportEmitterMicro.on(h.CHANGE_EVENTS.RETINA,this._onBreakpointChangeCallback)}},{key:"_addKeyframesToImages",value:function(){var e=this;this._scrollGroup=this.AnimSystem.getGroupForTarget(document.body),this._images.forEach((function(t){e.AnimSystem.getGroupForTarget(t)&&(e._scrollGroup=e.AnimSystem.getGroupForTarget(t));var i=e._defineKeyframeOptions(t);e._scrollGroup.addKeyframe(t,i).controller.on("AnimLazyImage:enter",(function(){e._imageIsInLoadRange(t)}))}))}},{key:"_onBreakpointChangeCallback",value:function(e){var t=this;this._resetPromises(),this._images.forEach((function(e){t._cleanUpImageAttributes(e),""!=e.getAttribute(c.DATA_ATTRIBUTE)&&t._imageIsInLoadRange(e)}))}},{key:"_resetPromises",value:function(){this._images.forEach((function(e){e.promises={},e.promises.downloadComplete=new Promise((function(t){e.promises.__completePromiseResolver=t}))}))}},{key:"_addMethodsToImageElement",value:function(){var e=this;this._images.forEach((function(t){t.forceLazyLoad=function(){e._imageIsInLoadRange(t)}}))}},{key:"_imageIsInLoadRange",value:function(e){this._downloadImage(e).then((function(){e.promises.__completePromiseResolver(e),e.dispatchEvent(new Event(t.EVENTS.DOWNLOAD_COMPLETE))}))}},{key:"_cleanUpImageAttributes",value:function(e){e.removeAttribute(t.DATA_DOWNLOADING_ATTRIBUTE),e.removeAttribute(t.DATA_DOWNLOAD_COMPLETE_ATTRIBUTE)}},{key:"_downloadingImageAttributes",value:function(e){(0,u.default)((0,o.default)(t.prototype),"_downloadingImageAttributes",this).call(this,e),e.setAttribute(t.DATA_DOWNLOADING_ATTRIBUTE,"")}},{key:"_finishedDownloadAttributes",value:function(e){e.removeAttribute(t.DATA_DOWNLOADING_ATTRIBUTE),e.setAttribute(t.DATA_DOWNLOAD_COMPLETE_ATTRIBUTE,"")}},{key:"_downloadImage",value:function(e){var i=this;return new Promise((function(n,r){null===e.getAttribute(t.DATA_DOWNLOAD_COMPLETE_ATTRIBUTE)?null===e.getAttribute(t.DATA_DOWNLOADING_ATTRIBUTE)&&i._waitForBackgroundVisible(e).then((function(e){return i._getBackgroundImageSrc(e)})).then((function(e){return i._loadImage(e)})).then((function(){d((function(){i._finishedDownloadAttributes(e),n()}),!0)})):n()}))}},{key:"_waitForBackgroundVisible",value:function(e){var t=this;return new Promise((function(i,n){d((function(){t._downloadingImageAttributes(e),i(e)}),!0)}))}},{key:"_getBackgroundImageSrc",value:function(e){return new Promise((function(t,i){f((function(){var i=e.currentStyle;i||(i=window.getComputedStyle(e,!1)),0!==i.backgroundImage.indexOf("url(")?t(null):t(i.backgroundImage.slice(4,-1).replace(/"/g,""))}),!0)}))}},{key:"_loadImage",value:function(e){return new Promise(this._loadImagePromiseFunc.bind(this,e))}},{key:"_loadImagePromiseFunc",value:function(e,t,i){if(e){var n=new Image;n.addEventListener("load",(function e(){this.removeEventListener("load",e),t(this),t=null})),n.src=e}else t(null)}}]),t}(c);m.DATA_DOWNLOAD_COMPLETE_ATTRIBUTE="data-anim-lazy-image-download-complete",m.DATA_DOWNLOADING_ATTRIBUTE="data-anim-lazy-image-downloading",m.EVENTS={},m.EVENTS.DOWNLOAD_COMPLETE="video-loading-complete",t.exports=m},{107:107,17:17,19:19,20:20,21:21,22:22,23:23,26:26,55:55,59:59,67:67}],69:[function(e,t,i){"use strict";t.exports={version:"3.2.1",major:"3.x",majorMinor:"3.2"}},{}],70:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(15)),l=n(e(22)),c=e(12).EventEmitterMicro,h=e(76),d=e(71),f=e(72),m=e(74),p=e(86),v=e(87),y=e(69),g={update:e(59),cancelUpdate:e(54),external:e(56),draw:e(55)},_=null,b=function(e){function t(){var e;if((0,r.default)(this,t),e=(0,a.default)(this,(0,o.default)(t).call(this)),_)throw"You cannot create multiple AnimSystems. You probably want to create multiple groups instead. You can have unlimited groups on a page";return _=(0,u.default)(e),e.groups=[],e.scrollSystems=[],e.timeSystems=[],e._forceUpdateRAFId=-1,e._initialized=!1,e.model=h,e.version=y.version,e._resolveReady=function(){},e.ready=new Promise((function(t){return e._resolveReady=t})),e.onScroll=e.onScroll.bind((0,u.default)(e)),e.onResizedDebounced=e.onResizedDebounced.bind((0,u.default)(e)),e.onResizeImmediate=e.onResizeImmediate.bind((0,u.default)(e)),e}return(0,l.default)(t,e),(0,s.default)(t,[{key:"initialize",value:function(){return this._initialized?this.ready:(this._initialized=!0,this.timeSystems=[],this.scrollSystems=[],this.groups=[],this.setupEvents(),this.initializeResizeFilter(),this.initializeModel(),this.createDOMGroups(),this.createDOMKeyframes(),this._resolveReady(),this.ready)}},{key:"remove",value:function(){var e=this;return Promise.all(this.groups.map((function(e){return e.remove()}))).then((function(){e.groups=null,e.scrollSystems=null,e.timeSystems=null,window.clearTimeout(h.RESIZE_TIMEOUT),window.removeEventListener("scroll",e.onScroll),window.removeEventListener("resize",e.onResizeImmediate),e._events={},e._initialized=!1,e.ready=new Promise((function(t){return e._resolveReady=t}))}))}},{key:"destroy",value:function(){return this.remove()}},{key:"createTimeGroup",value:function(e){var t=new v(e,this);return this.groups.push(t),this.timeSystems.push(t),this.trigger(h.EVENTS.ON_GROUP_CREATED,t),t}},{key:"createScrollGroup",value:function(e){if(!e)throw"AnimSystem scroll based groups must supply an HTMLElement";var t=new p(e,this);return this.groups.push(t),this.scrollSystems.push(t),this.trigger(h.EVENTS.ON_GROUP_CREATED,t),t}},{key:"removeGroup",value:function(e){var t=this;return Promise.all(e.keyframeControllers.map((function(t){return e.removeKeyframeController(t)}))).then((function(){var i=t.groups.indexOf(e);-1!==i&&t.groups.splice(i,1),-1!==(i=t.scrollSystems.indexOf(e))&&t.scrollSystems.splice(i,1),-1!==(i=t.timeSystems.indexOf(e))&&t.timeSystems.splice(i,1),e.destroy()}))}},{key:"createDOMGroups",value:function(){var e=this;document.body.setAttribute("data-anim-scroll-group","body"),document.querySelectorAll("[data-anim-scroll-group]").forEach((function(t){return e.createScrollGroup(t)})),document.querySelectorAll("[data-anim-time-group]").forEach((function(t){return e.createTimeGroup(t)})),this.trigger(h.EVENTS.ON_DOM_GROUPS_CREATED,this.groups)}},{key:"createDOMKeyframes",value:function(){var e=this,t=[];[d.DATA_ATTRIBUTE,f.DATA_ATTRIBUTE,m.DATA_ATTRIBUTE].forEach((function(e){for(var i=0;i<12;i++)t.push(e+(0===i?"":"-"+(i-1)))}));for(var i=0;i<t.length;i++)for(var n=t[i],r=document.querySelectorAll("["+n+"]"),s=0;s<r.length;s++){var a=r[s],o=JSON.parse(a.getAttribute(n));this.addKeyframe(a,o)}g.update((function(){e.groups.forEach((function(e){return e.onKeyframesDirty({silent:!0})})),e.groups.forEach((function(e){return e.trigger(h.EVENTS.ON_DOM_KEYFRAMES_CREATED,e)})),e.trigger(h.EVENTS.ON_DOM_KEYFRAMES_CREATED,e),e.groups.forEach((function(e){e.forceUpdate({waitForNextUpdate:!1,silent:!0}),e.reconcile()})),e.onScroll()}),!0)}},{key:"initializeResizeFilter",value:function(){if(!h.cssDimensionsTracker){var e=document.querySelector(".cssDimensionsTracker")||document.createElement("div");e.setAttribute("cssDimensionsTracker","true"),e.style.position="fixed",e.style.top="0",e.style.width="100%",e.style.height="100vh",e.style.pointerEvents="none",e.style.visibility="hidden",e.style.zIndex="-1",document.documentElement.appendChild(e),h.cssDimensionsTracker=e}}},{key:"initializeModel",value:function(){h.pageMetrics.windowHeight=h.cssDimensionsTracker.clientHeight,h.pageMetrics.windowWidth=h.cssDimensionsTracker.clientWidth,h.pageMetrics.scrollY=window.scrollY||window.pageYOffset,h.pageMetrics.scrollX=window.scrollX||window.pageXOffset,h.pageMetrics.breakpoint=h.getBreakpoint();var e=document.documentElement.getBoundingClientRect();h.pageMetrics.documentOffsetX=e.left+h.pageMetrics.scrollX,h.pageMetrics.documentOffsetY=e.top+h.pageMetrics.scrollY}},{key:"setupEvents",value:function(){window.removeEventListener("scroll",this.onScroll),window.addEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResizeImmediate),window.addEventListener("resize",this.onResizeImmediate)}},{key:"onScroll",value:function(){h.pageMetrics.scrollY=window.scrollY||window.pageYOffset,h.pageMetrics.scrollX=window.scrollX||window.pageXOffset;for(var e=0,t=this.scrollSystems.length;e<t;e++)this.scrollSystems[e]._onScroll();this.trigger(h.PageEvents.ON_SCROLL,h.pageMetrics)}},{key:"onResizeImmediate",value:function(){var e=h.cssDimensionsTracker.clientWidth,t=h.cssDimensionsTracker.clientHeight;if(e!==h.pageMetrics.windowWidth||t!==h.pageMetrics.windowHeight){h.pageMetrics.windowWidth=e,h.pageMetrics.windowHeight=t,h.pageMetrics.scrollY=window.scrollY||window.pageYOffset,h.pageMetrics.scrollX=window.scrollX||window.pageXOffset;var i=document.documentElement.getBoundingClientRect();h.pageMetrics.documentOffsetX=i.left+h.pageMetrics.scrollX,h.pageMetrics.documentOffsetY=i.top+h.pageMetrics.scrollY,window.clearTimeout(h.RESIZE_TIMEOUT),h.RESIZE_TIMEOUT=window.setTimeout(this.onResizedDebounced,250),this.trigger(h.PageEvents.ON_RESIZE_IMMEDIATE,h.pageMetrics)}}},{key:"onResizedDebounced",value:function(){var e=this;g.update((function(){var t=h.pageMetrics.breakpoint,i=h.getBreakpoint();if(i!==t){h.pageMetrics.previousBreakpoint=t,h.pageMetrics.breakpoint=i;for(var n=0,r=e.groups.length;n<r;n++)e.groups[n]._onBreakpointChange();e.trigger(h.PageEvents.ON_BREAKPOINT_CHANGE,h.pageMetrics)}for(var s=0,a=e.groups.length;s<a;s++)e.groups[s].forceUpdate({waitForNextUpdate:!1});e.trigger(h.PageEvents.ON_RESIZE_DEBOUNCED,h.pageMetrics)}),!0)}},{key:"forceUpdate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.waitForNextUpdate,n=void 0===i||i,r=t.silent,s=void 0!==r&&r;-1!==this._forceUpdateRAFId&&g.cancelUpdate(this._forceUpdateRAFId);var a=function(){for(var t=0,i=e.groups.length;t<i;t++){e.groups[t].forceUpdate({waitForNextUpdate:!1,silent:s})}return-1};this._forceUpdateRAFId=n?g.update(a,!0):a()}},{key:"addKeyframe",value:function(e,t){var i=this.getGroupForTarget(e);return(i=i||this.getGroupForTarget(document.body)).addKeyframe(e,t)}},{key:"getGroupForTarget",value:function(e){if(e._animInfo&&e._animInfo.group)return e._animInfo.group;for(var t=e;t;){if(t._animInfo&&t._animInfo.isGroup)return t._animInfo.group;t=t.parentElement}}},{key:"getControllerForTarget",value:function(e){return e._animInfo&&e._animInfo.controller?e._animInfo.controller:null}}]),t}(c);t.exports=window.AC.SharedInstance.share("AnimSystem",y.major,b)},{12:12,15:15,17:17,19:19,21:21,22:22,23:23,26:26,54:54,55:55,56:56,59:59,69:69,71:71,72:72,74:74,76:76,86:86,87:87}],71:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=e(76),o=e(106),u=e(77),l=e(83),c=e(80),h=e(88),d=e(89),f=e(82),m=function(){function e(t,i){(0,r.default)(this,e),this.controller=t,this.anchors=[],this.jsonProps=i,this.ease=t.group.defaultEase,this.easeFunctionString=a.KeyframeDefaults.easeFunctionString,this.easeFunction=u[this.easeFunctionString],this.start=0,this.end=0,this.localT=0,this.curvedT=0,this.id=0,this.event="",this.needsEventDispatch=!1,this.snapAtCreation=!1,this.isEnabled=!1,this.animValues={},this.breakpointMask="SMLX",this.disabledWhen=[],this.keyframeType=a.KeyframeTypes.Interpolation,this.hold=!1,this.preserveState=!1,this.markedForRemoval=!1,this.hidden=!1,this.uuid=f()}return(0,s.default)(e,[{key:"destroy",value:function(){this.controller=null,this.disabledWhen=null,this.anchors=null,this.jsonProps=null,this.easeFunction=null,this.animValues=null}},{key:"remove",value:function(){return this.controller.removeKeyframe(this)}},{key:"parseOptions",value:function(e){var t=this;for(var i in this.jsonProps=e,e.relativeTo&&console.error("KeyframeError: relativeTo has been removed. Use 'anchors' property instead. Found 'relativeTo':\"".concat(e.relativeTo,'"')),""!==e.anchors&&e.anchors?(this.anchors=[],e.anchors=Array.isArray(e.anchors)?e.anchors:[e.anchors],e.anchors.forEach((function(i,n){var r=d(i,t.controller.group.element);if(!r){var s="";return"string"==typeof i&&(s=" Provided value was a string, so a failed attempt was made to find anchor with the provided querystring in group.element, or in the document."),void console.warn("Keyframe on",t.controller.element," failed to find anchor at index ".concat(n," in array"),e.anchors,". Anchors must be JS Object references, Elements references, or valid query selector strings. ".concat(s))}t.anchors.push(r),t.controller.group.metrics.add(r)}))):(this.anchors=[],e.anchors=[]),e.ease?this.ease=parseFloat(e.ease):e.ease=this.ease,e.hasOwnProperty("snapAtCreation")?this.snapAtCreation=e.snapAtCreation:e.snapAtCreation=this.snapAtCreation,e.easeFunction?this.easeFunctionString=e.easeFunction:e.easeFunction=this.easeFunctionString,e.breakpointMask?this.breakpointMask=e.breakpointMask:e.breakpointMask=this.breakpointMask,e.disabledWhen?this.disabledWhen=Array.isArray(e.disabledWhen)?e.disabledWhen:[e.disabledWhen]:e.disabledWhen=this.disabledWhen,e.hasOwnProperty("hold")?this.hold=e.hold:e.hold=this.hold,e.hasOwnProperty("preserveState")?this.preserveState=e.preserveState:e.preserveState=this.preserveState,this.easeFunction=u[e.easeFunction],u.hasOwnProperty(e.easeFunction)||(e.easeFunction.includes("bezier")?this.easeFunction=l.fromCSSString(e.easeFunction):e.easeFunction.includes("spring")?this.easeFunction=c.fromCSSString(e.easeFunction):console.error("Keyframe parseOptions cannot find 'easeFunction' named '"+e.easeFunction+"'")),e)if(-1===a.KeyframeJSONReservedWords.indexOf(i)){var n=e[i];if(Array.isArray(n)){if(this.animValues[i]=this.controller.group.expressionParser.parseArray(this,n),void 0===this.controller.tweenProps[i]||!this.controller._ownerIsElement){var r=0;this.controller._ownerIsElement||(r=this.controller.element[i]||0);var s=new a.TargetValue(r,a.KeyframeDefaults.epsilon,this.snapAtCreation);this.controller.tweenProps[i]=s}var o=this.controller.tweenProps[i];if(e.epsilon)o.epsilon=e.epsilon;else{var h=Math.abs(this.animValues[i][0]-this.animValues[i][1]),f=Math.min(.001*h,o.epsilon,a.KeyframeDefaults.epsilon);o.epsilon=Math.max(f,1e-4)}}}this.keyframeType=this.hold?a.KeyframeTypes.InterpolationForward:a.KeyframeTypes.Interpolation,e.event&&(this.event=e.event)}},{key:"overwriteProps",value:function(e){this.animValues={};var t=Object.assign({},this.jsonProps,e);this.controller.updateKeyframe(this,t)}},{key:"updateLocalProgress",value:function(e){if(this.start===this.end||e<this.start||e>this.end)return this.localT=e<this.start?0:e>this.end?1:0,void(this.curvedT=this.easeFunction(this.localT));var t=(e-this.start)/(this.end-this.start),i=this.hold?this.localT:0;this.localT=o.clamp(t,i,1),this.curvedT=this.easeFunction(this.localT)}},{key:"reconcile",value:function(e){var t=this.animValues[e],i=this.controller.tweenProps[e];i.initialValue=t[0],i.target=t[0]+this.curvedT*(t[1]-t[0]),i.current!==i.target&&(i.current=i.target,this.needsEventDispatch||(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this)))}},{key:"reset",value:function(e){this.localT=e||0;var t=this.ease;for(var i in this.ease=1,this.animValues)this.reconcile(i);this.ease=t}},{key:"onDOMRead",value:function(e){var t=this.animValues[e],i=this.controller.tweenProps[e];i.target=t[0]+this.curvedT*(t[1]-t[0]);var n=i.current;i.current+=(i.target-i.current)*this.ease;var r=i.current-i.target;r<i.epsilon&&r>-i.epsilon&&(i.current=i.target,r=0),""===this.event||this.needsEventDispatch||(r>i.epsilon||r<-i.epsilon||0===r&&n!==i.current)&&(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this))}},{key:"isInRange",value:function(e){return e>=this.start&&e<=this.end}},{key:"setEnabled",value:function(e){e=e||h(Array.from(document.documentElement.classList));var t=-1!==this.breakpointMask.indexOf(a.pageMetrics.breakpoint),i=!1;return this.disabledWhen.length>0&&(i=this.disabledWhen.some((function(t){return void 0!==e[t]}))),this.isEnabled=t&&!i,this.isEnabled}},{key:"evaluateConstraints",value:function(){this.start=this.controller.group.expressionParser.parseTimeValue(this,this.jsonProps.start),this.end=this.controller.group.expressionParser.parseTimeValue(this,this.jsonProps.end),this.evaluateInterpolationConstraints()}},{key:"evaluateInterpolationConstraints",value:function(){for(var e in this.animValues){var t=this.jsonProps[e];this.animValues[e]=this.controller.group.expressionParser.parseArray(this,t)}}}]),e}();m.DATA_ATTRIBUTE="data-anim-tween",t.exports=m},{106:106,17:17,19:19,23:23,76:76,77:77,80:80,82:82,83:83,88:88,89:89}],72:[function(e,t,i){"use strict";var n=e(23),r=n(e(30)),s=n(e(17)),a=n(e(19)),o=n(e(26)),u=n(e(21)),l=n(e(22)),c=e(71),h=e(76),d=function(e){function t(e,i){var n;return(0,s.default)(this,t),(n=(0,o.default)(this,(0,u.default)(t).call(this,e,i))).keyframeType=h.KeyframeTypes.CSSClass,n._triggerType=t.TRIGGER_TYPE_CSS_CLASS,n.cssClass="",n.friendlyName="",n.style={on:null,off:null},n.toggle=!1,n.isApplied=!1,n}return(0,l.default)(t,e),(0,a.default)(t,[{key:"parseOptions",value:function(e){if(!this.controller._ownerIsElement)throw new TypeError("CSS Keyframes cannot be applied to JS Objects");if(e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0!==e.toggle&&(this.toggle=e.toggle),void 0!==e.cssClass)this._triggerType=t.TRIGGER_TYPE_CSS_CLASS,this.cssClass=e.cssClass,this.friendlyName="."+this.cssClass,void 0===this.controller.tweenProps.targetClasses&&(this.controller.tweenProps.targetClasses={add:[],remove:[]});else{if(void 0===e.style||!this.isValidStyleProperty(e.style))throw new TypeError("KeyframeCSSClass no 'cssClass` property found. If using `style` property its also missing or invalid");if(this._triggerType=t.TRIGGER_TYPE_STYLE_PROPERTY,this.style=e.style,this.friendlyName="style",this.toggle=void 0!==this.style.off||this.toggle,this.toggle&&void 0===this.style.off)for(var i in this.style.off={},this.style.on)this.style.off[i]="";void 0===this.controller.tweenProps.targetStyles&&(this.controller.tweenProps.targetStyles={})}if(void 0===e.end&&(e.end=e.start),e.toggle=this.toggle,this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.isApplied=this.controller.element.classList.contains(this.cssClass);else{var n=getComputedStyle(this.controller.element);for(var r in this.isApplied=!0,this.style.on)if(n[r]!==this.style.on[r]){this.isApplied=!1;break}}c.prototype.parseOptions.call(this,e),this.animValues[this.friendlyName]=[0,0],void 0===this.controller.tweenProps[this.friendlyName]&&(this.controller.tweenProps[this.friendlyName]=new h.TargetValue(0,1,!1)),this.keyframeType=h.KeyframeTypes.CSSClass}},{key:"updateLocalProgress",value:function(e){this.isApplied&&!this.toggle||(this.start!==this.end?!this.isApplied&&e>=this.start&&e<=this.end?this._apply():this.isApplied&&this.toggle&&(e<this.start||e>this.end)&&this._unapply():!this.isApplied&&e>=this.start?this._apply():this.isApplied&&this.toggle&&e<this.start&&this._unapply())}},{key:"_apply",value:function(){if(this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.add.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var e in this.style.on)this.controller.tweenProps.targetStyles[e]=this.style.on[e];this.controller.needsStyleUpdate=!0}this.isApplied=!0}},{key:"_unapply",value:function(){if(this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.remove.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var e in this.style.off)this.controller.tweenProps.targetStyles[e]=this.style.off[e];this.controller.needsStyleUpdate=!0}this.isApplied=!1}},{key:"isValidStyleProperty",value:function(e){if(!e.hasOwnProperty("on"))return!1;if("object"!==(0,r.default)(e.on))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");if(this.toggle&&e.hasOwnProperty("off")&&"object"!==(0,r.default)(e.off))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");return!0}},{key:"reconcile",value:function(e,t){}},{key:"onDOMRead",value:function(e,t){}},{key:"evaluateInterpolationConstraints",value:function(){}}]),t}(c);d.TRIGGER_TYPE_CSS_CLASS=0,d.TRIGGER_TYPE_STYLE_PROPERTY=1,d.DATA_ATTRIBUTE="data-anim-classname",t.exports=d},{17:17,19:19,21:21,22:22,23:23,26:26,30:30,71:71,76:76}],73:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(15)),u=n(e(21)),l=n(e(20)),c=n(e(22)),h=e(76),d=(e(71),e(72)),f=e(79),m=e(88),p=e(82),v=e(12).EventEmitterMicro,y=e(98),g={update:e(59),external:e(56),draw:e(55)},_=Math.PI/180,b=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ"],k={create:e(110),rotateX:e(112),rotateY:e(113),rotateZ:e(114),scale:e(115)},E=function(e){function t(e,i){var n;return(0,r.default)(this,t),(n=(0,a.default)(this,(0,u.default)(t).call(this)))._events.draw=[],n.uuid=p(),n.group=e,n.element=i,n._ownerIsElement=n.element instanceof Element,n._ownerIsElement?n.friendlyName=n.element.tagName+"."+Array.from(n.element.classList).join("."):n.friendlyName=n.element.friendlyName||n.uuid,n.element._animInfo=n.element._animInfo||new h.AnimInfo(e,(0,o.default)(n)),n.element._animInfo.controller=(0,o.default)(n),n.element._animInfo.group=n.group,n.element._animInfo.controllers.push((0,o.default)(n)),n.tweenProps=n.element._animInfo.tweenProps,n.eventObject=new h.EventObject((0,o.default)(n)),n.needsStyleUpdate=!1,n.needsClassUpdate=!1,n.elementMetrics=n.group.metrics.add(n.element),n.attributes=[],n.keyframes={},n._allKeyframes=[],n._activeKeyframes=[],n.keyframesRequiringDispatch=[],n.updateCachedValuesFromElement(),n.boundsMin=0,n.boundsMax=0,n.mat2d=new Float32Array(6),n.mat4=k.create(),n.needsWrite=!0,n.onDOMWriteImp=n._ownerIsElement?n.onDOMWriteForElement:n.onDOMWriteForObject,n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"destroy",value:function(){if(this.element._animInfo){this.element._animInfo.controller===this&&(this.element._animInfo.controller=null);var e=this.element._animInfo.controllers.indexOf(this);-1!==e&&this.element._animInfo.controllers.splice(e,1),0===this.element._animInfo.controllers.length?this.element._animInfo=null:(this.element._animInfo.controller=this.element._animInfo.controllers[this.element._animInfo.controllers.length-1],this.element._animInfo.group=this.element._animInfo.controller.group)}this.eventObject.controller=null,this.eventObject.element=null,this.eventObject.keyframe=null,this.eventObject.tweenProps=null,this.eventObject=null,this.elementMetrics=null,this.group=null,this.keyframesRequiringDispatch=null;for(var i=0;i<this._allKeyframes.length;i++)this._allKeyframes[i].destroy();this._allKeyframes=null,this._activeKeyframes=null,this.attributes=null,this.keyframes=null,this.element=null,this.tweenProps=null,(0,l.default)((0,u.default)(t.prototype),"destroy",this).call(this)}},{key:"remove",value:function(){return this.group.removeKeyframeController(this)}},{key:"updateCachedValuesFromElement",value:function(){var e=this;if(this._ownerIsElement){var t=getComputedStyle(this.element),i=y(this.element,!0),n=h.KeyframeDefaults.epsilon;["x","y","z"].forEach((function(t,r){e.tweenProps[t]=new h.TargetValue(i.translation[r],n,!1)})),this.tweenProps.rotation=new h.TargetValue(i.eulerRotation[2],n,!1),["rotationX","rotationY","rotationZ"].forEach((function(t,r){e.tweenProps[t]=new h.TargetValue(i.eulerRotation[r],n,!1)})),this.tweenProps.scaleZ=new h.TargetValue(i.scale[0],n,!1),["scaleX","scaleY","scale"].forEach((function(t,r){e.tweenProps[t]=new h.TargetValue(i.scale[r],n,!1)})),this.tweenProps.opacity=new h.TargetValue(parseFloat(t.opacity),n,!1)}}},{key:"addKeyframe",value:function(e){var t=f(e);if(!t)throw new Error("AnimSystem Cannot create keyframe for from options `"+e+"`");var i=new t(this,e);return i.parseOptions(e),i.id=this._allKeyframes.length,this._allKeyframes.push(i),i}},{key:"needsUpdate",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var i=this.attributes[e],n=this.tweenProps[i];if(Math.abs(n.current-n.target)>n.epsilon)return!0}return!1}},{key:"updateLocalProgress",value:function(e){for(var t=0,i=this.attributes.length;t<i;t++){var n=this.attributes[t],r=this.keyframes[this.attributes[t]];if(1!==r.length){var s=this.getNearestKeyframeForAttribute(n,e);s&&s.updateLocalProgress(e)}else r[0].updateLocalProgress(e)}}},{key:"reconcile",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var i=this.attributes[e],n=this.getNearestKeyframeForAttribute(i,this.group.position.local);n.updateLocalProgress(this.group.position.local),n.snapAtCreation&&n.reconcile(i)}}},{key:"determineActiveKeyframes",value:function(e){var t=this;e=e||m(Array.from(document.documentElement.classList));var i=this._activeKeyframes,n=this.attributes,r={};this._activeKeyframes=[],this.attributes=[],this.keyframes={};for(var s=0;s<this._allKeyframes.length;s++){var a=this._allKeyframes[s];if(a.markedForRemoval||a.hidden||!a.setEnabled(e))for(var o in a.animValues)this.tweenProps[o].isActive=a.preserveState,a.preserveState&&(r[o]=!0);else for(var u in this._activeKeyframes.push(a),a.animValues)this.keyframes[u]=this.keyframes[u]||[],this.keyframes[u].push(a),-1===this.attributes.indexOf(u)&&(r[u]=!0,this.attributes.push(u),this.tweenProps[u].isActive=!0)}this.attributes.forEach((function(e){return t.tweenProps[e].isActive=!0}));var l=i.filter((function(e){return-1===t._activeKeyframes.indexOf(e)}));if(0!==l.length){var c=n.filter((function(e){return-1===t.attributes.indexOf(e)&&!r.hasOwnProperty(e)}));if(0!==c.length)if(this.needsWrite=!0,this._ownerIsElement)g.external((function(){0===Object.keys(r).filter((function(e){return b.includes(e)})).length&&t.element.style.removeProperty("transform");for(var e=0,i=c.length;e<i;++e){var n=c[e],s=t.tweenProps[n];s.current=s.target,s.isActive=!1,"opacity"===n&&t.element.style.removeProperty("opacity")}for(var a=0,o=l.length;a<o;++a){var u=l[a];u instanceof d&&!u.preserveState&&u._unapply()}}),!0);else for(var h=0,f=c.length;h<f;++h){var p=this.tweenProps[c[h]];p.current=p.target,p.isActive=!1}}}},{key:"onDOMRead",value:function(e){for(var t=0,i=this.attributes.length;t<i;t++){var n=this.attributes[t];this.tweenProps[n].previousValue=this.tweenProps[n].current;var r=this.getNearestKeyframeForAttribute(n,e);r&&r.onDOMRead(n),this.tweenProps[n].previousValue!==this.tweenProps[n].current&&(this.needsWrite=!0)}}},{key:"onDOMWrite",value:function(){(this.needsWrite||this.needsClassUpdate||this.needsStyleUpdate)&&(this.needsWrite=!1,this.onDOMWriteImp(),this.handleEventDispatch())}},{key:"onDOMWriteForObject",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var i=this.attributes[e];this.element[i]=this.tweenProps[i].current}}},{key:"onDOMWriteForElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.element.style,t=this.tweenProps;if(t.z.isActive||t.rotationX.isActive||t.rotationY.isActive){var i=this.mat4;if(i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,t.x.isActive||t.y.isActive||t.z.isActive){var n=t.x.current,r=t.y.current,s=t.z.current;i[12]=i[0]*n+i[4]*r+i[8]*s+i[12],i[13]=i[1]*n+i[5]*r+i[9]*s+i[13],i[14]=i[2]*n+i[6]*r+i[10]*s+i[14],i[15]=i[3]*n+i[7]*r+i[11]*s+i[15]}if(t.rotation.isActive||t.rotationZ.isActive){var a=(t.rotation.current||t.rotationZ.current)*_;k.rotateZ(i,i,a)}if(t.rotationX.isActive){var o=t.rotationX.current*_;k.rotateX(i,i,o)}if(t.rotationY.isActive){var u=t.rotationY.current*_;k.rotateY(i,i,u)}(t.scale.isActive||t.scaleX.isActive||t.scaleY.isActive)&&k.scale(i,i,[t.scale.current,t.scale.current,1]),e.transform="matrix3d("+i[0]+","+i[1]+","+i[2]+","+i[3]+","+i[4]+","+i[5]+","+i[6]+","+i[7]+","+i[8]+","+i[9]+","+i[10]+","+i[11]+","+i[12]+","+i[13]+","+i[14]+","+i[15]+")"}else if(t.x.isActive||t.y.isActive||t.rotation.isActive||t.rotationZ.isActive||t.scale.isActive||t.scaleX.isActive||t.scaleY.isActive){var l=this.mat2d;if(l[0]=1,l[1]=0,l[2]=0,l[3]=1,l[4]=0,l[5]=0,t.x.isActive||t.y.isActive){var c=t.x.current,h=t.y.current,d=l[0],f=l[1],m=l[2],p=l[3],v=l[4],y=l[5];l[0]=d,l[1]=f,l[2]=m,l[3]=p,l[4]=d*c+m*h+v,l[5]=f*c+p*h+y}if(t.rotation.isActive||t.rotationZ.isActive){var g=(t.rotation.current||t.rotationZ.current)*_,b=l[0],E=l[1],w=l[2],x=l[3],A=l[4],T=l[5],S=Math.sin(g),P=Math.cos(g);l[0]=b*P+w*S,l[1]=E*P+x*S,l[2]=b*-S+w*P,l[3]=E*-S+x*P,l[4]=A,l[5]=T}t.scale.isActive?(l[0]=l[0]*t.scale.current,l[1]=l[1]*t.scale.current,l[2]=l[2]*t.scale.current,l[3]=l[3]*t.scale.current,l[4]=l[4],l[5]=l[5]):(t.scaleX.isActive||t.scaleY.isActive)&&(l[0]=l[0]*t.scaleX.current,l[1]=l[1]*t.scaleX.current,l[2]=l[2]*t.scaleY.current,l[3]=l[3]*t.scaleY.current,l[4]=l[4],l[5]=l[5]),e.transform="matrix("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+", "+l[5]+")"}if(t.opacity.isActive&&(e.opacity=t.opacity.current),this.needsStyleUpdate){for(var O in this.tweenProps.targetStyles)null!==this.tweenProps.targetStyles[O]&&(this.element.style[O]=this.tweenProps.targetStyles[O]),this.tweenProps.targetStyles[O]=null;this.needsStyleUpdate=!1}this.needsClassUpdate&&(this.tweenProps.targetClasses.add.length>0&&this.element.classList.add.apply(this.element.classList,this.tweenProps.targetClasses.add),this.tweenProps.targetClasses.remove.length>0&&this.element.classList.remove.apply(this.element.classList,this.tweenProps.targetClasses.remove),this.tweenProps.targetClasses.add.length=0,this.tweenProps.targetClasses.remove.length=0,this.needsClassUpdate=!1)}},{key:"handleEventDispatch",value:function(){if(0!==this.keyframesRequiringDispatch.length){for(var e=0,t=this.keyframesRequiringDispatch.length;e<t;e++){var i=this.keyframesRequiringDispatch[e];i.needsEventDispatch=!1,this.eventObject.keyframe=i,this.eventObject.pageMetrics=h.pageMetrics,this.eventObject.event=i.event,this.trigger(i.event,this.eventObject)}this.keyframesRequiringDispatch.length=0}if(0!==this._events.draw.length){this.eventObject.keyframe=null,this.eventObject.event="draw";for(var n=this._events.draw.length-1;n>=0;n--)this._events.draw[n](this.eventObject)}}},{key:"updateAnimationConstraints",value:function(){for(var e=this,t=0,i=this._activeKeyframes.length;t<i;t++)this._activeKeyframes[t].evaluateConstraints();this.attributes.forEach((function(t){1!==e.keyframes[t].length&&e.keyframes[t].sort(h.KeyframeComparison)})),this.updateDeferredPropertyValues()}},{key:"refreshMetrics",value:function(){var e=new Set([this.element]);this._allKeyframes.forEach((function(t){return t.anchors.forEach((function(t){return e.add(t)}))})),this.group.metrics.refreshCollection(e),this.group.keyframesDirty=!0}},{key:"updateDeferredPropertyValues",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var i=this.attributes[e],n=this.keyframes[i];if(!(n[0].keyframeType>h.KeyframeTypes.InterpolationForward))for(var r=0,s=n.length;r<s;r++){var a=n[r];if(null===a.jsonProps[i][0]){if(0===r){a.animValues[i][0]=this.tweenProps[i].initialValue;continue}a.animValues[i][0]=n[r-1].animValues[i][1]}if(null===a.jsonProps[i][1]){if(r===s-1)throw new RangeError("AnimSystem - last keyframe cannot defer it's end value! ".concat(i,":[").concat(a.jsonProps[i][0],",null]"));a.animValues[i][1]=n[r+1].animValues[i][0]}}}}},{key:"getBounds",value:function(e){this.boundsMin=Number.MAX_VALUE,this.boundsMax=-Number.MAX_VALUE;for(var t=0,i=this.attributes.length;t<i;t++)for(var n=this.keyframes[this.attributes[t]],r=0;r<n.length;r++){var s=n[r];this.boundsMin=Math.min(s.start,this.boundsMin),this.boundsMax=Math.max(s.end,this.boundsMax),e.min=Math.min(s.start,e.min),e.max=Math.max(s.end,e.max)}}},{key:"getNearestKeyframeForAttribute",value:function(e,t){t=void 0!==t?t:this.group.position.local;var i=null,n=Number.POSITIVE_INFINITY,r=this.keyframes[e];if(void 0===r)return null;var s=r.length;if(0===s)return null;if(1===s)return r[0];for(var a=0;a<s;a++){var o=r[a];if(o.isInRange(t)){i=o;break}var u=Math.min(Math.abs(t-o.start),Math.abs(t-o.end));u<n&&(n=u,i=o)}return i}},{key:"getAllKeyframesForAttribute",value:function(e){return this.keyframes[e]}},{key:"updateKeyframe",value:function(e,t){var i=this;e.parseOptions(t),e.evaluateConstraints(),this.group.keyframesDirty=!0,g.update((function(){i.trigger(h.EVENTS.ON_KEYFRAME_UPDATED,e),i.group.trigger(h.EVENTS.ON_KEYFRAME_UPDATED,e)}),!0)}},{key:"removeKeyframe",value:function(e){var t=this;return e.controller!==this?Promise.resolve(null):(e.markedForRemoval=!0,this.group.keyframesDirty=!0,new Promise((function(i){t.group.rafEmitter.executor.eventEmitter.once("before:draw",(function(){i(e),e.destroy();var n=t._allKeyframes.indexOf(e);-1!==n&&t._allKeyframes.splice(n,1)}))})))}},{key:"updateAnimation",value:function(e,t){return this.group.gui&&console.warn("KeyframeController.updateAnimation(keyframe,props) has been deprecated. Please use updateKeyframe(keyframe,props)"),this.updateKeyframe(e,t)}}]),t}(v);t.exports=E},{110:110,112:112,113:113,114:114,115:115,12:12,15:15,17:17,19:19,20:20,21:21,22:22,23:23,26:26,55:55,56:56,59:59,71:71,72:72,76:76,79:79,82:82,88:88,98:98}],74:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(20)),l=n(e(22)),c=e(71),h=e(76),d=function(e){function t(e,i){var n;return(0,r.default)(this,t),(n=(0,a.default)(this,(0,o.default)(t).call(this,e,i))).keyframeType=h.KeyframeTypes.Event,n.isApplied=!1,n.hasDuration=!1,n.isCurrentlyInRange=!1,n}return(0,l.default)(t,e),(0,s.default)(t,[{key:"parseOptions",value:function(e){e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.style=void 0,e.cssClass=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0===e.end&&(e.end=e.start),this.event=e.event,this.animValues[this.event]=[0,0],void 0===this.controller.tweenProps[this.event]&&(this.controller.tweenProps[this.event]=new h.TargetValue(0,1,!1)),(0,u.default)((0,o.default)(t.prototype),"parseOptions",this).call(this,e),this.keyframeType=h.KeyframeTypes.Event}},{key:"updateLocalProgress",value:function(e){if(this.hasDuration){var t=this.isCurrentlyInRange,i=e>=this.start&&e<=this.end;if(t===i)return;return this.isCurrentlyInRange=i,void(i&&!t?this._trigger(this.event+":enter"):t&&!i&&this._trigger(this.event+":exit"))}!this.isApplied&&e>=this.start?(this.isApplied=!0,this._trigger(this.event)):this.isApplied&&e<this.start&&(this.isApplied=!1,this._trigger(this.event+":reverse"))}},{key:"_trigger",value:function(e){this.controller.eventObject.event=e,this.controller.eventObject.keyframe=this,this.controller.trigger(e,this.controller.eventObject)}},{key:"evaluateConstraints",value:function(){(0,u.default)((0,o.default)(t.prototype),"evaluateConstraints",this).call(this),this.hasDuration=this.start!==this.end}},{key:"reset",value:function(e){this.isApplied=!1,this.isCurrentlyInRange=!1,(0,u.default)((0,o.default)(t.prototype),"reset",this).call(this,e)}},{key:"onDOMRead",value:function(e,t){}},{key:"reconcile",value:function(e,t){}},{key:"evaluateInterpolationConstraints",value:function(){}}]),t}(c);d.DATA_ATTRIBUTE="data-anim-event",t.exports=d},{17:17,19:19,20:20,21:21,22:22,23:23,26:26,71:71,76:76}],75:[function(e,t,i){"use strict";var n=e(23)(e(17)),r=e(81);t.exports=function e(t,i){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,n.default)(this,e),this.isGroup=s,this.group=t,this.controller=i,this.controllers=[],this.tweenProps=new r}},{17:17,23:23,81:81}],76:[function(e,t,i){"use strict";var n=e(23)(e(17)),r={GUI_INSTANCE:null,ANIM_INSTANCE:null,VIEWPORT_EMITTER_ELEMENT:void 0,LOCAL_STORAGE_KEYS:{GuiPosition:"anim-ui.position",GroupCollapsedStates:"anim-ui.group-collapsed-states",scrollY:"anim-ui.scrollY-position",path:"anim-ui.path"},RESIZE_TIMEOUT:-1,BREAKPOINTS:[{name:"S",mediaQuery:"only screen and (max-width: 735px)"},{name:"M",mediaQuery:"only screen and (max-width: 1068px)"},{name:"L",mediaQuery:"only screen and (min-width: 1442px)"},{name:"L",mediaQuery:"only screen and (min-width: 1069px)"}],getBreakpoint:function(){for(var e=0;e<r.BREAKPOINTS.length;e++){var t=r.BREAKPOINTS[e];if(window.matchMedia(t.mediaQuery).matches)return t.name}},KeyframeDefaults:{ease:1,epsilon:.05,easeFunctionString:"linear",easeFunction:"linear",hold:!1,snapAtCreation:!1,toggle:!1,breakpointMask:"SMLX",event:"",disabledWhen:[],cssClass:""},KeyframeTypes:{Interpolation:0,InterpolationForward:1,CSSClass:2,Event:3},EVENTS:{ON_DOM_KEYFRAMES_CREATED:"ON_DOM_KEYFRAMES_CREATED",ON_DOM_GROUPS_CREATED:"ON_DOM_GROUPS_CREATED",ON_GROUP_CREATED:"ON_GROUP_CREATED",ON_KEYFRAME_UPDATED:"ON_KEYFRAME_UPDATED",ON_TIMELINE_START:"ON_TIMELINE_START",ON_TIMELINE_UPDATE:"ON_TIMELINE_UPDATE",ON_TIMELINE_COMPLETE:"ON_TIMELINE_COMPLETE"},PageEvents:{ON_SCROLL:"ON_SCROLL",ON_RESIZE_IMMEDIATE:"ON_RESIZE_IMMEDIATE",ON_RESIZE_DEBOUNCED:"ON_RESIZE_DEBOUNCED",ON_BREAKPOINT_CHANGE:"ON_BREAKPOINT_CHANGE"},KeyframeJSONReservedWords:["event","cssClass","style","anchors","start","end","epsilon","easeFunction","ease","breakpointMask","disabledWhen"],TweenProps:e(81),TargetValue:function e(t,i,r){(0,n.default)(this,e),this.epsilon=parseFloat(i),this.snapAtCreation=r,this.initialValue=t,this.target=t,this.current=t,this.previousValue=t,this.isActive=!1},AnimInfo:e(75),Progress:function(){this.local=0,this.localUnclamped=0,this.lastPosition=0},ViewableRange:function(e,t){this.a=e.top-t,this.a<0&&(this.a=e.top),this.b=e.top,this.d=e.bottom,this.c=Math.max(this.d-t,this.b)},pageMetrics:new function(){this.scrollX=0,this.scrollY=0,this.windowWidth=0,this.windowHeight=0,this.documentOffsetX=0,this.documentOffsetY=0,this.previousBreakpoint="",this.breakpoint=""},EventObject:function(e){this.controller=e,this.element=this.controller.element,this.keyframe=null,this.event="",this.tweenProps=this.controller.tweenProps},KeyframeComparison:function(e,t){return e.start<t.start?-1:e.start>t.start?1:0}};t.exports=r},{17:17,23:23,75:75,81:81}],77:[function(e,t,i){"use strict";var n=e(23)(e(17));t.exports=new function e(){(0,n.default)(this,e),this.linear=function(e){return e},this.easeInQuad=function(e){return e*e},this.easeOutQuad=function(e){return e*(2-e)},this.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1},this.easeInSin=function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)},this.easeOutSin=function(e){return Math.sin(Math.PI/2*e)},this.easeInOutSin=function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},this.easeInElastic=function(e){return 0===e?e:(.04-.04/e)*Math.sin(25*e)+1},this.easeOutElastic=function(e){return.04*e/--e*Math.sin(25*e)},this.easeInOutElastic=function(e){return(e-=.5)<0?(.02+.01/e)*Math.sin(50*e):(.02-.01/e)*Math.sin(50*e)+1},this.easeOutBack=function(e){return(e-=1)*e*(2.70158*e+1.70158)+1},this.easeInCubic=function(e){return e*e*e},this.easeOutCubic=function(e){return--e*e*e+1},this.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},this.easeInQuart=function(e){return e*e*e*e},this.easeOutQuart=function(e){return 1- --e*e*e*e},this.easeInOutQuart=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},this.easeInQuint=function(e){return e*e*e*e*e},this.easeOutQuint=function(e){return 1+--e*e*e*e*e},this.easeInOutQuint=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}}},{17:17,23:23}],78:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=e(76),o=function(e,t){return null==e?t:e},u=function(){function e(){(0,r.default)(this,e),this.clear()}return(0,s.default)(e,[{key:"clear",value:function(){this._metrics=new WeakMap}},{key:"destroy",value:function(){this._metrics=null}},{key:"add",value:function(e){var t=this._metrics.get(e);if(t)return t;var i=new l(e);return this._metrics.set(e,i),this._refreshMetrics(e,i)}},{key:"get",value:function(e){return this._metrics.get(e)}},{key:"refreshCollection",value:function(e){var t=this;e.forEach((function(e){return t._refreshMetrics(e,null)}))}},{key:"refreshMetrics",value:function(e){return this._refreshMetrics(e)}},{key:"_refreshMetrics",value:function(e,t){if(t=t||this._metrics.get(e),!(e instanceof Element))return t.width=o(e.width,0),t.height=o(e.height,0),t.top=o(e.top,o(e.y,0)),t.left=o(e.left,o(e.x,0)),t.right=t.left+t.width,t.bottom=t.top+t.height,t;if(void 0===e.offsetWidth){var i=e.getBoundingClientRect();return t.width=i.width,t.height=i.height,t.top=a.pageMetrics.scrollY+i.top,t.left=a.pageMetrics.scrollX+i.left,t.right=t.left+t.width,t.bottom=t.top+t.height,t}t.width=e.offsetWidth,t.height=e.offsetHeight,t.top=a.pageMetrics.documentOffsetY,t.left=a.pageMetrics.documentOffsetX;for(var n=e;n;)t.top+=n.offsetTop,t.left+=n.offsetLeft,n=n.offsetParent;return t.right=t.left+t.width,t.bottom=t.top+t.height,t}}]),e}(),l=function(){function e(t){(0,r.default)(this,e),this.top=0,this.bottom=0,this.left=0,this.right=0,this.height=0,this.width=0}return(0,s.default)(e,[{key:"toString",value:function(){return"top:".concat(this.top,", bottom:").concat(this.bottom,", left:").concat(this.left,", right:").concat(this.right,", height:").concat(this.height,", width:").concat(this.width)}},{key:"toObject",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right,height:this.height,width:this.width}}}]),e}();t.exports=u},{17:17,19:19,23:23,76:76}],79:[function(e,t,i){"use strict";var n=e(76),r=e(71),s=e(74),a=e(72),o=function(e){for(var t in e){var i=e[t];if(-1===n.KeyframeJSONReservedWords.indexOf(t)&&Array.isArray(i))return!0}return!1};t.exports=function(e){if(void 0!==e.cssClass||void 0!==e.style){if(o(e))throw"CSS Keyframes cannot tween values, please use multiple keyframes instead";return a}if(o(e))return r;if(e.event)return s;throw delete e.anchors,"Could not determine tween type based on ".concat(JSON.stringify(e))}},{71:71,72:72,74:74,76:76}],80:[function(e,t,i){"use strict";var n=e(23),r=n(e(18)),s=n(e(29)),a=n(e(17)),o=n(e(19)),u=function(){function e(t,i,n,r){(0,a.default)(this,e),this.mass=t,this.stiffness=i,this.damping=n,this.initialVelocity=r,this.m_w0=Math.sqrt(this.stiffness/this.mass),this.m_zeta=this.damping/(2*Math.sqrt(this.stiffness*this.mass)),this.m_zeta<1?(this.m_wd=this.m_w0*Math.sqrt(1-this.m_zeta*this.m_zeta),this.m_A=1,this.m_B=(this.m_zeta*this.m_w0-this.initialVelocity)/this.m_wd):(this.m_wd=0,this.m_A=1,this.m_B=-this.initialVelocity+this.m_w0)}return(0,o.default)(e,[{key:"solve",value:function(e){return 0===e||1===e?e:1-(e=this.m_zeta<1?Math.exp(-e*this.m_zeta*this.m_w0)*(this.m_A*Math.cos(this.m_wd*e)+this.m_B*Math.sin(this.m_wd*e)):(this.m_A+this.m_B*e)*Math.exp(-e*this.m_w0))}}]),e}(),l=/\d*\.?\d+/g;u.fromCSSString=function(e){var t=e.match(l);if(4!==t.length)throw"SpringEasing could not convert ".concat(cssString," to spring params");var i=t.map(Number),n=(0,r.default)(u,(0,s.default)(i));return n.solve.bind(n)},t.exports=u},{17:17,18:18,19:19,23:23,29:29}],81:[function(e,t,i){"use strict";var n=e(23)(e(17));t.exports=function e(){(0,n.default)(this,e)}},{17:17,23:23}],82:[function(e,t,i){"use strict";t.exports=function(){return Math.random().toString(16).slice(2)}},{}],83:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=Math.abs,o=function(){function e(t,i,n,s){(0,r.default)(this,e),this.cp=new Float32Array(6),this.cp[0]=3*t,this.cp[1]=3*(n-t)-this.cp[0],this.cp[2]=1-this.cp[0]-this.cp[1],this.cp[3]=3*i,this.cp[4]=3*(s-i)-this.cp[3],this.cp[5]=1-this.cp[3]-this.cp[4]}return(0,s.default)(e,[{key:"sampleCurveX",value:function(e){return((this.cp[2]*e+this.cp[1])*e+this.cp[0])*e}},{key:"sampleCurveY",value:function(e){return((this.cp[5]*e+this.cp[4])*e+this.cp[3])*e}},{key:"sampleCurveDerivativeX",value:function(e){return(3*this.cp[2]*e+2*this.cp[1])*e+this.cp[0]}},{key:"solveCurveX",value:function(e){var t,i,n,r,s,o;for(n=e,o=0;o<5;o++){if(r=this.sampleCurveX(n)-e,a(r)<1e-5)return n;if(s=this.sampleCurveDerivativeX(n),a(s)<1e-5)break;n-=r/s}if((n=e)<(t=0))return t;if(n>(i=1))return i;for(;t<i;){if(r=this.sampleCurveX(n),a(r-e)<1e-5)return n;e>r?t=n:i=n,n=.5*(i-t)+t}return n}},{key:"solve",value:function(e){return this.sampleCurveY(this.solveCurveX(e))}}]),e}(),u=/\d*\.?\d+/g;o.fromCSSString=function(e){var t=e.match(u);if(4!==t.length)throw"UnitBezier could not convert ".concat(e," to cubic-bezier");var i=t.map(Number),n=new o(i[0],i[1],i[2],i[3]);return n.solve.bind(n)},t.exports=o},{17:17,19:19,23:23}],84:[function(e,t,i){"use strict";var n=e(23),r=n(e(30)),s=n(e(17)),a=n(e(19)),o=e(85),u=new(e(78)),l=function(){function e(t){(0,s.default)(this,e),this.group=t,this.data={target:null,anchors:null,metrics:this.group.metrics}}return(0,a.default)(e,[{key:"parseArray",value:function(e,t){return[this.parseExpression(e,t[0]),this.parseExpression(e,t[1])]}},{key:"parseExpression",value:function(t,i){if(!i)return null;if("number"==typeof i)return i;if("string"!=typeof i)throw"Expression must be a string, received ".concat((0,r.default)(i),": ").concat(i);return this.data.target=t.controller.element,this.data.anchors=t.anchors,this.data.keyframe=t.keyframe,e._parse(i,this.data)}},{key:"parseTimeValue",value:function(e,t){if("number"==typeof t)return t;var i=this.group.expressionParser.parseExpression(e,t);return this.group.convertScrollPositionToTValue(i)}},{key:"destroy",value:function(){this.group=null}}],[{key:"parse",value:function(t,i){return(i=i||{})&&(u.clear(),i.target&&u.add(i.target),i.anchors&&i.anchors.forEach((function(e){return u.add(e)}))),i.metrics=u,e._parse(t,i)}},{key:"_parse",value:function(e,t){return o.Parse(e).execute(t)}}]),e}();l.programs=o.programs,window.ExpressionParser=l,t.exports=l},{17:17,19:19,23:23,30:30,78:78,85:85}],85:[function(e,t,i){"use strict";var n=e(23),r=n(e(19)),s=n(e(26)),a=n(e(21)),o=n(e(22)),u=n(e(17)),l=e(76),c=e(106),h={},d={smoothstep:function(e,t,i){return(i=d.clamp((i-e)/(t-e),0,1))*i*(3-2*i)},deg:function(e){return 180*e/Math.PI},rad:function(e){return e*Math.PI/180},random:function(e,t){return Math.random()*(t-e)+e},atan:Math.atan2};Object.getOwnPropertyNames(Math).forEach((function(e){return d[e]?null:d[e.toLowerCase()]=Math[e]})),Object.getOwnPropertyNames(c).forEach((function(e){return d[e]?null:d[e.toLowerCase()]=c[e]}));var f=null,m="a",p="ALPHA",v="(",y=")",g="PLUS",_="MINUS",b="MUL",k="DIV",E="INTEGER_CONST",w="FLOAT_CONST",x=",",A="EOF",T={NUMBERS:/\d|\d\.\d/,DIGIT:/\d/,OPERATOR:/[-+*/]/,PAREN:/[()]/,WHITE_SPACE:/\s/,ALPHA:/[a-zA-Z]|%/,ALPHANUMERIC:/[a-zA-Z0-9]/,OBJECT_UNIT:/^(t|l|b|r|%w|%h|%|h|w)$/,GLOBAL_METRICS_UNIT:/^(px|vh|vw)$/,ANY_UNIT:/^(t|l|b|r|%w|%h|%|h|w|px|vh|vw)$/,MATH_FUNCTION:new RegExp("\\b(".concat(Object.keys(d).join("|"),")\\b"),"i")},S={round:1,clamp:3,lerp:3,random:2,atan:2,floor:1,ceil:1,abs:1,cos:1,sin:1,smoothstep:3,rad:1,deg:1,pow:2,calc:1},P=function e(t,i){(0,u.default)(this,e),this.type=t,this.value=i};P.ONE=new P("100",100),P.EOF=new P(A,null);var O=function e(t){(0,u.default)(this,e),this.type=t},C=function(e){function t(e,i){var n;return(0,u.default)(this,t),(n=(0,s.default)(this,(0,a.default)(t).call(this,"UnaryOp"))).token=n.op=e,n.expr=i,n}return(0,o.default)(t,e),t}(O),R=function(e){function t(e,i,n){var r;return(0,u.default)(this,t),(r=(0,s.default)(this,(0,a.default)(t).call(this,"BinOp"))).left=e,r.op=i,r.right=n,r}return(0,o.default)(t,e),t}(O),I=function(e){function t(e,i){var n;if((0,u.default)(this,t),(n=(0,s.default)(this,(0,a.default)(t).call(this,"MathOp"))).op=e,n.list=i,S[e.value]&&i.length!==S[e.value])throw new Error("Incorrect number of arguments for '".concat(e.value,"'. Received ").concat(i.length,", expected ").concat(S[e.value]));return n}return(0,o.default)(t,e),t}(O),F=function(e){function t(e){var i;return(0,u.default)(this,t),(i=(0,s.default)(this,(0,a.default)(t).call(this,"Num"))).token=e,i.value=e.value,i}return(0,o.default)(t,e),t}(O),D=function(e){function t(e,i,n){var r;return(0,u.default)(this,t),(r=(0,s.default)(this,(0,a.default)(t).call(this,"RefValue"))).num=e,r.ref=i,r.unit=n,r}return(0,o.default)(t,e),t}(O),M=function(e){function t(e,i){var n;return(0,u.default)(this,t),(n=(0,s.default)(this,(0,a.default)(t).call(this,"CSSValue"))).ref=e,n.propertyName=i,n}return(0,o.default)(t,e),t}(O),L=function(e){function t(e,i){var n;return(0,u.default)(this,t),(n=(0,s.default)(this,(0,a.default)(t).call(this,"PropValue"))).ref=e,n.propertyName=i,n}return(0,o.default)(t,e),t}(O),q=function(){function e(t){var i;for((0,u.default)(this,e),this.text=t,this.pos=0,this.char=this.text[this.pos],this.tokens=[];(i=this.getNextToken())&&i!==P.EOF;)this.tokens.push(i);this.tokens.push(i)}return(0,r.default)(e,[{key:"advance",value:function(){this.char=this.text[++this.pos]}},{key:"skipWhiteSpace",value:function(){for(;null!=this.char&&T.WHITE_SPACE.test(this.char);)this.advance()}},{key:"name",value:function(){for(var e="";null!=this.char&&T.ALPHA.test(this.char);)e+=this.char,this.advance();return new P(p,e)}},{key:"number",value:function(){for(var e="";null!=this.char&&T.DIGIT.test(this.char);)e+=this.char,this.advance();if(null!=this.char&&"."===this.char){for(e+=this.char,this.advance();null!=this.char&&T.DIGIT.test(this.char);)e+=this.char,this.advance();return new P(w,parseFloat(e))}return new P(E,parseInt(e))}},{key:"getNextToken",value:function(){for(;null!=this.char;)if(T.WHITE_SPACE.test(this.char))this.skipWhiteSpace();else{if(T.DIGIT.test(this.char))return this.number();if(","===this.char)return this.advance(),new P(x,",");if(T.OPERATOR.test(this.char)){var e="",t=this.char;switch(t){case"+":e=g;break;case"-":e=_;break;case"*":e=b;break;case"/":e=k}return this.advance(),new P(e,t)}if(T.PAREN.test(this.char)){var i="",n=this.char;switch(n){case"(":i=v;break;case")":i=y}return this.advance(),new P(i,n)}if(T.ALPHA.test(this.char))return this.name();this.error("Unexpected character "+this.char)}return P.EOF}}]),e}(),N=function(){function e(t){(0,u.default)(this,e),this.lexer=t,this.pos=0}return(0,r.default)(e,[{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=this.lexer.text.slice(this.pos-3,this.pos+3),n=new Error("".concat(e,' in "').concat(this.lexer.text,'" near "').concat(i,'". ').concat(t," "));throw console.error(n.message,f?f.keyframe||f.target:""),n}},{key:"consume",value:function(e){var t=this.currentToken;return t.type===e?this.pos+=1:this.error("Invalid token ".concat(this.currentToken.value,", expected ").concat(e)),t}},{key:"consumeList",value:function(e){e.includes(this.currentToken)?this.pos+=1:this.error("Invalid token ".concat(this.currentToken.value,", expected ").concat(tokenType))}},{key:"expr",value:function(){for(var e=this.term();this.currentToken.type===g||this.currentToken.type===_;){var t=this.currentToken;switch(t.value){case"+":this.consume(g);break;case"-":this.consume(_)}e=new R(e,t,this.term())}return e}},{key:"term",value:function(){for(var e=this.factor();this.currentToken.type===b||this.currentToken.type===k;){var t=this.currentToken;switch(t.value){case"*":this.consume(b);break;case"/":this.consume(k)}e=new R(e,t,this.factor())}return e}},{key:"factor",value:function(){if(this.currentToken.type===g)return new C(this.consume(g),this.factor());if(this.currentToken.type===_)return new C(this.consume(_),this.factor());if(this.currentToken.type===E||this.currentToken.type===w){var e=new F(this.currentToken);if(this.pos+=1,T.OPERATOR.test(this.currentToken.value)||this.currentToken.type===y||this.currentToken.type===x||this.currentToken.type===A)return e;if(this.currentToken.type===p&&this.currentToken.value===m)return this.consume(p),new D(e,this.anchorIndex(),this.unit(T.ANY_UNIT));if(this.currentToken.type===p)return"%a"===this.currentToken.value&&this.error("%a is invalid, try removing the %"),new D(e,null,this.unit());this.error("Expected a scaling unit type","Such as 'h' / 'w'")}else{if(T.OBJECT_UNIT.test(this.currentToken.value))return new D(new F(P.ONE),null,this.unit());if(this.currentToken.value===m){this.consume(p);var t=this.anchorIndex();if(T.OBJECT_UNIT.test(this.currentToken.value))return new D(new F(P.ONE),t,this.unit())}else if(this.currentToken.type===p){if("css"===this.currentToken.value||"prop"===this.currentToken.value){var i="css"===this.currentToken.value?M:L;this.consume(p),this.consume(v);var n=this.propertyName(),r=null;return this.currentToken.type===x&&(this.consume(x),this.consume(p),r=this.anchorIndex()),this.consume(y),new i(r,n)}if(T.MATH_FUNCTION.test(this.currentToken.value)){var s=this.currentToken.value.toLowerCase();if("number"==typeof d[s])return this.consume(p),new F(new P(p,d[s]));var a=P[s]||new P(s,s),o=[];this.consume(p),this.consume(v);var u=null;do{this.currentToken.value===x&&this.consume(x),u=this.expr(),o.push(u)}while(this.currentToken.value===x);return this.consume(y),new I(a,o)}}else if(this.currentToken.type===v){this.consume(v);var l=this.expr();return this.consume(y),l}}this.error("Unexpected token ".concat(this.currentToken.value))}},{key:"propertyName",value:function(){for(var e="";this.currentToken.type===p||this.currentToken.type===_;)e+=this.currentToken.value,this.pos+=1;return e}},{key:"unit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.ANY_UNIT,t=this.currentToken;if(t.type===p&&e.test(t.value))return this.consume(p),new P(p,t.value=t.value.replace(/%(h|w)/,"$1").replace("%","h"));this.error("Expected unit type")}},{key:"anchorIndex",value:function(){var e=this.currentToken;if(e.type===E)return this.consume(E),new F(e);this.error("Invalid anchor reference",". Should be something like a0, a1, a2")}},{key:"parse",value:function(){var e=this.expr();return this.currentToken!==P.EOF&&this.error("Unexpected token ".concat(this.currentToken.value)),e}},{key:"currentToken",get:function(){return this.lexer.tokens[this.pos]}}]),e}(),G=function(){function e(t){(0,u.default)(this,e),this.parser=t,this.root=t.parse()}return(0,r.default)(e,[{key:"visit",value:function(e){var t=this[e.type];if(!t)throw new Error("No visit method named, ".concat(t));return t.call(this,e)}},{key:"BinOp",value:function(e){switch(e.op.type){case g:return this.visit(e.left)+this.visit(e.right);case _:return this.visit(e.left)-this.visit(e.right);case b:return this.visit(e.left)*this.visit(e.right);case k:return this.visit(e.left)/this.visit(e.right)}}},{key:"RefValue",value:function(e){var t=this.unwrapReference(e),i=e.unit.value,n=e.num.value,r=f.metrics.get(t);switch(i){case"h":return.01*n*r.height;case"t":return.01*n*r.top;case"vh":return.01*n*l.pageMetrics.windowHeight;case"vw":return.01*n*l.pageMetrics.windowWidth;case"px":return n;case"w":return.01*n*r.width;case"b":return.01*n*r.bottom;case"l":return.01*n*r.left;case"r":return.01*n*r.right}}},{key:"PropValue",value:function(e){return(null===e.ref?f.target:f.anchors[e.ref.value])[e.propertyName]}},{key:"CSSValue",value:function(t){var i=this.unwrapReference(t),n=getComputedStyle(i).getPropertyValue(t.propertyName);return""===n?0:e.Parse(n).execute(f)}},{key:"Num",value:function(e){return e.value}},{key:"UnaryOp",value:function(e){return e.op.type===g?+this.visit(e.expr):e.op.type===_?-this.visit(e.expr):void 0}},{key:"MathOp",value:function(e){var t=this,i=e.list.map((function(e){return t.visit(e)}));return d[e.op.value].apply(null,i)}},{key:"unwrapReference",value:function(e){return null===e.ref?f.target:(e.ref.value>=f.anchors.length&&console.error("Not enough anchors supplied for expression ".concat(this.parser.lexer.text),f.target),f.anchors[e.ref.value])}},{key:"execute",value:function(e){return f=e,this.visit(this.root)}}],[{key:"Parse",value:function(t){return h[t]||(h[t]=new e(new N(new q(t))))}}]),e}();G.programs=h,t.exports=G},{106:106,17:17,19:19,21:21,22:22,23:23,26:26,76:76}],86:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(15)),u=n(e(21)),l=n(e(20)),c=n(e(22)),h=e(12).EventEmitterMicro,d=e(106),f=e(88),m=e(76),p=e(78),v=e(84),y=e(73),g={create:e(49),update:e(59),draw:e(55)},_=function(e){function t(e,i){var n;return(0,r.default)(this,t),(n=(0,a.default)(this,(0,u.default)(t).call(this))).anim=i,n.element=e,n.name=n.name||e.getAttribute("data-anim-scroll-group"),n.isEnabled=!0,n.position=new m.Progress,n.metrics=new p,n.metrics.add(n.element),n.expressionParser=new v((0,o.default)(n)),n.boundsMin=0,n.boundsMax=0,n.timelineUpdateRequired=!1,n._keyframesDirty=!1,n.viewableRange=n.createViewableRange(),n.defaultEase=m.KeyframeDefaults.ease,n.keyframeControllers=[],n.updateProgress(n.getPosition()),n.onDOMRead=n.onDOMRead.bind((0,o.default)(n)),n.onDOMWrite=n.onDOMWrite.bind((0,o.default)(n)),n.gui=null,n.finalizeInit(),n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"finalizeInit",value:function(){this.element._animInfo=new m.AnimInfo(this,null,!0),this.setupRAFEmitter()}},{key:"destroy",value:function(){this.expressionParser.destroy(),this.expressionParser=null;for(var e=0,i=this.keyframeControllers.length;e<i;e++)this.keyframeControllers[e].destroy();this.keyframeControllers=null,this.position=null,this.viewableRange=null,this.gui&&(this.gui.destroy(),this.gui=null),this.metrics.destroy(),this.metrics=null,this.rafEmitter.destroy(),this.rafEmitter=null,this.anim=null,this.element._animInfo&&this.element._animInfo.group===this&&(this.element._animInfo.group=null,this.element._animInfo=null),this.element=null,this.isEnabled=!1,(0,l.default)((0,u.default)(t.prototype),"destroy",this).call(this)}},{key:"removeKeyframeController",value:function(e){var t=this;return this.keyframeControllers.includes(e)?(e._allKeyframes.forEach((function(e){return e.markedForRemoval=!0})),this.keyframesDirty=!0,new Promise((function(i){g.draw((function(){var n=t.keyframeControllers.indexOf(e);-1!==n?(t.keyframeControllers.splice(n,1),e.onDOMWrite(),e.destroy(),t.gui&&t.gui.create(),i()):i()}))}))):Promise.resolve()}},{key:"remove",value:function(){return this.anim.removeGroup(this)}},{key:"setupRAFEmitter",value:function(e){var t=this;this.rafEmitter&&this.rafEmitter.destroy(),this.rafEmitter=e||new g.create,this.rafEmitter.on("update",this.onDOMRead),this.rafEmitter.on("draw",this.onDOMWrite),this.rafEmitter.once("external",(function(){return t.reconcile()}))}},{key:"requestDOMChange",value:function(){return!!this.isEnabled&&this.rafEmitter.run()}},{key:"onDOMRead",value:function(){this.keyframesDirty&&this.onKeyframesDirty();for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMRead(this.position.local)}},{key:"onDOMWrite",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMWrite();this.needsUpdate()&&this.requestDOMChange()}},{key:"needsUpdate",value:function(){if(this._keyframesDirty)return!0;for(var e=0,t=this.keyframeControllers.length;e<t;e++)if(this.keyframeControllers[e].needsUpdate())return!0;return!1}},{key:"addKeyframe",value:function(e,t){var i=this.getControllerForTarget(e);return null===i&&(i=new y(this,e),this.keyframeControllers.push(i)),this.keyframesDirty=!0,i.addKeyframe(t)}},{key:"forceUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.waitForNextUpdate,i=void 0===t||t,n=e.silent,r=void 0!==n&&n;this.isEnabled&&(this.refreshMetrics(),this.timelineUpdateRequired=!0,i?this.keyframesDirty=!0:this.onKeyframesDirty({silent:r}))}},{key:"onKeyframesDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.silent,i=void 0!==t&&t;this.determineActiveKeyframes(),this.keyframesDirty=!1,this.metrics.refreshMetrics(this.element),this.viewableRange=this.createViewableRange();for(var n=0,r=this.keyframeControllers.length;n<r;n++)this.keyframeControllers[n].updateAnimationConstraints();this.updateBounds(),this.updateProgress(this.getPosition()),i||this._onScroll(),this.gui&&this.gui.create()}},{key:"refreshMetrics",value:function(){var e=new Set([this.element]);this.keyframeControllers.forEach((function(t){e.add(t.element),t._allKeyframes.forEach((function(t){return t.anchors.forEach((function(t){return e.add(t)}))}))})),this.metrics.refreshCollection(e),this.viewableRange=this.createViewableRange()}},{key:"reconcile",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].reconcile()}},{key:"determineActiveKeyframes",value:function(e){e=e||f(Array.from(document.documentElement.classList));for(var t=0,i=this.keyframeControllers.length;t<i;t++)this.keyframeControllers[t].determineActiveKeyframes(e)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},t=0,i=this.keyframeControllers.length;t<i;t++)this.keyframeControllers[t].getBounds(e);var n=this.convertTValueToScrollPosition(e.min),r=this.convertTValueToScrollPosition(e.max);r-n<m.pageMetrics.windowHeight?(e.min=this.convertScrollPositionToTValue(n-.5*m.pageMetrics.windowHeight),e.max=this.convertScrollPositionToTValue(r+.5*m.pageMetrics.windowHeight)):(e.min-=.001,e.max+=.001),this.boundsMin=e.min,this.boundsMax=e.max,this.timelineUpdateRequired=!0}},{key:"createViewableRange",value:function(){return new m.ViewableRange(this.metrics.get(this.element),m.pageMetrics.windowHeight)}},{key:"_onBreakpointChange",value:function(e,t){this.keyframesDirty=!0,this.determineActiveKeyframes()}},{key:"updateProgress",value:function(e){this.hasDuration()?(this.position.localUnclamped=(e-this.viewableRange.a)/(this.viewableRange.d-this.viewableRange.a),this.position.local=d.clamp(this.position.localUnclamped,this.boundsMin,this.boundsMax)):this.position.local=this.position.localUnclamped=0}},{key:"performTimelineDispatch",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].updateLocalProgress(this.position.local);this.trigger(m.EVENTS.ON_TIMELINE_UPDATE,this.position.local),this.timelineUpdateRequired=!1,this.position.lastPosition!==this.position.local&&(this.position.lastPosition<=this.boundsMin&&this.position.localUnclamped>this.boundsMin?this.trigger(m.EVENTS.ON_TIMELINE_START,this):this.position.lastPosition>=this.boundsMin&&this.position.localUnclamped<this.boundsMin?this.trigger(m.EVENTS.ON_TIMELINE_START+":reverse",this):this.position.lastPosition<=this.boundsMax&&this.position.localUnclamped>=this.boundsMax?this.trigger(m.EVENTS.ON_TIMELINE_COMPLETE,this):this.position.lastPosition>=this.boundsMax&&this.position.localUnclamped<this.boundsMax&&this.trigger(m.EVENTS.ON_TIMELINE_COMPLETE+":reverse",this)),null!==this.gui&&this.gui.onScrollUpdate(this.position)}},{key:"_onScroll",value:function(e){if(!this.isEnabled)return!1;void 0===e&&(e=this.getPosition()),this.updateProgress(e);var t=this.position.lastPosition===this.boundsMin||this.position.lastPosition===this.boundsMax,i=this.position.localUnclamped===this.boundsMin||this.position.localUnclamped===this.boundsMax;if(!this.timelineUpdateRequired&&t&&i&&this.position.lastPosition===e)this.position.local=this.position.localUnclamped;else{if(this.timelineUpdateRequired||this.position.localUnclamped>this.boundsMin&&this.position.localUnclamped<this.boundsMax)return this.performTimelineDispatch(),this.requestDOMChange(),void(this.position.lastPosition=this.position.localUnclamped);var n=this.position.lastPosition>this.boundsMin&&this.position.lastPosition<this.boundsMax,r=this.position.localUnclamped<=this.boundsMin||this.position.localUnclamped>=this.boundsMax;if(n&&r)return this.performTimelineDispatch(),this.requestDOMChange(),void(this.position.lastPosition=this.position.localUnclamped);var s=this.position.lastPosition<this.boundsMin&&this.position.localUnclamped>this.boundsMax,a=this.position.lastPosition>this.boundsMax&&this.position.localUnclamped<this.boundsMax;(s||a)&&(this.performTimelineDispatch(),this.requestDOMChange(),this.position.lastPosition=this.position.localUnclamped),null!==this.gui&&this.gui.onScrollUpdate(this.position)}}},{key:"convertScrollPositionToTValue",value:function(e){return this.hasDuration()?d.map(e,this.viewableRange.a,this.viewableRange.d,0,1):0}},{key:"convertTValueToScrollPosition",value:function(e){return this.hasDuration()?d.map(e,0,1,this.viewableRange.a,this.viewableRange.d):0}},{key:"hasDuration",value:function(){return this.viewableRange.a!==this.viewableRange.d}},{key:"getPosition",value:function(){return m.pageMetrics.scrollY}},{key:"getControllerForTarget",value:function(e){if(!e._animInfo||!e._animInfo.controllers)return null;if(e._animInfo.controller&&e._animInfo.controller.group===this)return e._animInfo.controller;for(var t=e._animInfo.controllers,i=0,n=t.length;i<n;i++)if(t[i].group===this)return t[i];return null}},{key:"trigger",value:function(e,t){if(void 0!==this._events[e])for(var i=this._events[e].length-1;i>=0;i--)void 0!==t?this._events[e][i](t):this._events[e][i]()}},{key:"keyframesDirty",set:function(e){this._keyframesDirty=e,this._keyframesDirty&&this.requestDOMChange()},get:function(){return this._keyframesDirty}}]),t}(h);t.exports=_},{106:106,12:12,15:15,17:17,19:19,20:20,21:21,22:22,23:23,26:26,49:49,55:55,59:59,73:73,76:76,78:78,84:84,88:88}],87:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(15)),u=n(e(21)),l=n(e(20)),c=n(e(22)),h=e(86),d=e(106),f=0,m={create:e(49)},p=function(e){function t(e,i){var n;return(0,r.default)(this,t),e||((e=document.createElement("div")).className="TimeGroup-"+f++),n=(0,a.default)(this,(0,u.default)(t).call(this,e,i)),window.timeGroup=window.timeGroup||(0,o.default)(n),n.name=n.name||e.getAttribute("data-anim-time-group"),n._isPaused=!0,n._repeats=0,n._isReversed=!1,n._timeScale=1,n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"finalizeInit",value:function(){if(!this.anim)throw"TimeGroup not instantiated correctly. Please use `AnimSystem.createTimeGroup(el)`";this.defaultEase=1,this.onPlayTimeUpdate=this.onPlayTimeUpdate.bind(this),(0,l.default)((0,u.default)(t.prototype),"finalizeInit",this).call(this)}},{key:"progress",value:function(e){if(void 0===e)return 0===this.boundsMax?0:this.position.local/this.boundsMax;var t=e*this.boundsMax;this.timelineUpdateRequired=!0,this._onScroll(t)}},{key:"time",value:function(e){if(void 0===e)return this.position.local;e=d.clamp(e,this.boundsMin,this.boundsMax),this.timelineUpdateRequired=!0,this._onScroll(e)}},{key:"play",value:function(e){this.reversed(!1),this.isEnabled=!0,this._isPaused=!1,this.time(e),this._playheadEmitter.run()}},{key:"reverse",value:function(e){this.reversed(!0),this.isEnabled=!0,this._isPaused=!1,this.time(e),this._playheadEmitter.run()}},{key:"reversed",value:function(e){if(void 0===e)return this._isReversed;this._isReversed=e}},{key:"restart",value:function(){this._isReversed?(this.progress(1),this.reverse(this.time())):(this.progress(0),this.play(this.time()))}},{key:"pause",value:function(e){this.time(e),this._isPaused=!0}},{key:"paused",value:function(e){return void 0===e?this._isPaused:(this._isPaused=e,this._isPaused||this.play(),this)}},{key:"onPlayTimeUpdate",value:function(e){if(!this._isPaused){var i=d.clamp(e.delta/1e3,0,.5);this._isReversed&&(i=-i);var n=this.time()+i*this._timeScale;if(this._repeats===t.REPEAT_FOREVER||this._repeats>0){var r=!1;!this._isReversed&&n>this.boundsMax?(n-=this.boundsMax,r=!0):this._isReversed&&n<0&&(n=this.boundsMax+n,r=!0),r&&(this._repeats=this._repeats===t.REPEAT_FOREVER?t.REPEAT_FOREVER:this._repeats-1)}this.time(n);var s=!this._isReversed&&this.position.local!==this.duration,a=this._isReversed&&0!==this.position.local;s||a?this._playheadEmitter.run():this.paused(!0)}}},{key:"updateProgress",value:function(e){this.hasDuration()?(this.position.localUnclamped=e,this.position.local=d.clamp(this.position.localUnclamped,this.boundsMin,this.boundsMax)):this.position.local=this.position.localUnclamped=0}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},t=0,i=this.keyframeControllers.length;t<i;t++)this.keyframeControllers[t].getBounds(e);this.boundsMin=0,this.boundsMax=e.max,this.viewableRange.a=this.viewableRange.b=0,this.viewableRange.c=this.viewableRange.d=this.boundsMax,this.timelineUpdateRequired=!0}},{key:"setupRAFEmitter",value:function(e){this._playheadEmitter=new m.create,this._playheadEmitter.on("update",this.onPlayTimeUpdate),(0,l.default)((0,u.default)(t.prototype),"setupRAFEmitter",this).call(this,e)}},{key:"timeScale",value:function(e){return void 0===e?this._timeScale:(this._timeScale=e,this)}},{key:"repeats",value:function(e){if(void 0===e)return this._repeats;this._repeats=e}},{key:"getPosition",value:function(){return this.position.local}},{key:"convertScrollPositionToTValue",value:function(e){return e}},{key:"convertTValueToScrollPosition",value:function(e){return e}},{key:"hasDuration",value:function(){return this.duration>0}},{key:"destroy",value:function(){this._playheadEmitter.destroy(),this._playheadEmitter=null,(0,l.default)((0,u.default)(t.prototype),"destroy",this).call(this)}},{key:"duration",get:function(){return this.keyframesDirty&&this.onKeyframesDirty({silent:!0}),this.boundsMax}}]),t}(h);p.REPEAT_FOREVER=-1,t.exports=p},{106:106,15:15,17:17,19:19,20:20,21:21,22:22,23:23,26:26,49:49,86:86}],88:[function(e,t,i){"use strict";t.exports=function(e){return e.reduce((function(e,t){return e[t]=t,e}),{})}},{}],89:[function(e,t,i){"use strict";t.exports=function(e,t){if("string"!=typeof e)return e;try{return(t||document).querySelector(e)||document.querySelector(e)}catch(e){return!1}}},{}],90:[function(e,t,i){"use strict";var n=e(23),r=n(e(30)),s=n(e(17)),a=n(e(19)),o=e(91),u=e(108),l=e(8),c=Object.freeze({responseType:"blob"}),h=function(){function e(t){(0,s.default)(this,e),t=Object.assign({},t),this._requestOptions=Object.assign({},c,t.xhr),this._template=new o(t),this._evtObserver=null,this._state={request:null,objectUrl:""},this._requestCache=new Map,this._history=[],this._openNewRequest()}return(0,a.default)(e,null,[{key:"convertToResolution",value:function(e){return"boolean"!=typeof e?null:e?"2x":"1x"}},{key:"convertViewportName",value:function(e,t){var i=e.toLowerCase();return"xl"===i&&!0===t?"xlarge":"l"===i||("xl"===i||"xlarge"===i)&&!0!==t?"large":"m"===i?"medium":"s"===i?"small":e}}]),(0,a.default)(e,[{key:"load",value:function(){var e=this,t=this._state.request,i=t.xhr.response;return(!i?t.send():200===t.xhr.status?Promise.resolve({response:i}):Promise.reject({error:this._state.requestErr})).then((function(t){var i=t.response;return"blob"===e._requestOptions.responseType&&(e._state.objectUrl=i=window.URL.createObjectURL(t.response),e._updateHistory()),Promise.resolve(i)}),(function(t){var i=e._state.requestErr=t.error;return Promise.reject(i)}))}},{key:"change",value:function(t){if("object"!==(0,r.default)(t)||Array.isArray(t))l("AssetSource.change expects an object argument.");else{var i=t.hasOwnProperty("viewport"),n=t.hasOwnProperty("resolution");if(i||n){if(i&&(this._template.viewport=t.viewport),n){var s=t.resolution;this._template.resolution="boolean"==typeof s?e.convertToResolution(s):s}this._openNewRequest()}else l("AssetSource.change requires a viewport and/or resolution.")}}},{key:"abortLoad",value:function(){this._state.request.xhr.abort()}},{key:"revokeLastObjectUrl",value:function(){if("blob"===this._requestOptions.responseType){var e=this._history.length-2;if(e<0)return;var t=this._history[e];window.URL.revokeObjectURL(t.objectUrl)}}},{key:"_openNewRequest",value:function(){var e="".concat(this._template.viewport,"_").concat(this._template.resolution),t=this._requestCache.get(e);if(!t){var i=this._template.generatePath();t=new u(i,this._requestOptions),this._requestCache.set(e,t),t.open()}this._state.request=t}},{key:"_updateHistory",value:function(){this._history.push(Object.assign({},this._state))}},{key:"_revokeAllObjectUrls",value:function(){"blob"===this._requestOptions.responseType&&this._history.forEach((function(e){window.URL.revokeObjectURL(e.objectUrl)}))}},{key:"name",get:function(){return this._template.name}},{key:"request",get:function(){return this._state.request}},{key:"assetUrl",get:function(){return this._state.request.requestUrl}},{key:"objectUrl",get:function(){return this._state.objectUrl}},{key:"viewport",get:function(){return this._template.viewport}},{key:"resolution",get:function(){return this._template.resolution}},{key:"requestCache",get:function(){return this._requestCache}},{key:"history",get:function(){return this._history}}]),e}();t.exports=h},{108:108,17:17,19:19,23:23,30:30,8:8,91:91}],91:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=e(92),o={isVatPath:!0},u=function(){function e(t){(0,r.default)(this,e),(t=Object.assign({},o,t)).model=t.model||a,this._model=t.model,this._isVatPath=t.isVatPath,this.viewport="",this.resolution="",this._pathSegmentsMap=this._createPathSegmentMap(t),this._template=this._createTemplate(this._pathSegmentsMap)}return(0,s.default)(e,null,[{key:"formatPathSegment",value:function(e){var t=e.replace(/^\s*\/*\s*|\s*\/*\s*$/g,"");return t?(t=t.replace(/\b\/{2,}\b/g,"/"),/\b:\/{2}\b/.test(t)?t:"/".concat(t)):""}}]),(0,s.default)(e,[{key:"generatePath",value:function(){var e=this._model.TEMPLATE_PLACEHOLDERS,t=this.viewport,i=this.resolution;return i&&(i="1x"===i||""===t?"":"_".concat(i)),this._template.replace(e.viewport,t).replace(e.resolution,i)}},{key:"_createPathSegmentMap",value:function(e){var t=e.el,i=e.model,n=i.PATH_SEGMENTS,r=i.ATTRIBUTES,s=new Map;return Object.keys(n).forEach((function(i){var a=r[i],o=a&&t&&t.hasAttribute(a),u=o?t.getAttribute(a):e[i];"/"===u||null===u||"null"===u?u="":u||o||(u=n[i]),s.set(i,u)})),this.viewport=s.get("viewport"),this.resolution=s.get("resolution"),s}},{key:"_createTemplate",value:function(t){var i=this._isVatPath?"/105/media":"",n=this._model.TEMPLATE_PLACEHOLDERS;return t.forEach((function(t,r){t&&(i+="viewport"===r?e.formatPathSegment(n.viewport):"resolution"===r?n.resolution:"format"===r?"."+t:e.formatPathSegment(t))})),i}},{key:"name",get:function(){return this._pathSegmentsMap.get("name")}}]),e}();t.exports=u},{17:17,19:19,23:23,92:92}],92:[function(e,t,i){"use strict";t.exports={ATTRIBUTES:{locale:"data-source-locale",path:"data-source-path",name:"data-source-name",viewport:"data-source-viewport",resolution:"data-source-resolution",format:"data-source-format"},TEMPLATE_PLACEHOLDERS:{viewport:"{{viewport}}",resolution:"{{resolution}}"},PATH_SEGMENTS:{locale:"us",path:"",name:"",viewport:"",resolution:"",format:"mp4"}}},{}],93:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(20)),l=n(e(22)),c=e(12).EventEmitterMicro,h=e(76),d={create:e(49),update:e(59),draw:e(55)},f=function(){},m=0,p=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this))).el=e.el,i.gum=e.gum,i.componentName=e.componentName,i._keyframeController=null,i}return(0,l.default)(t,e),(0,s.default)(t,[{key:"destroy",value:function(){this.el=null,this.gum=null,this._keyframeController=null,(0,u.default)((0,o.default)(t.prototype),"destroy",this).call(this)}},{key:"addKeyframe",value:function(e){var t=e.el||this.el;return(e.group||this.anim).addKeyframe(t,e)}},{key:"addDiscreteEvent",value:function(e){e.event=e.event||"Generic-Event-Name-"+m++;var t=void 0!==e.end&&e.end!==e.start,i=this.addKeyframe(e);return t?(e.onEnterOnce&&i.controller.once(e.event+":enter",e.onEnterOnce),e.onExitOnce&&i.controller.once(e.event+":exit",e.onExitOnce),e.onEnter&&i.controller.on(e.event+":enter",e.onEnter),e.onExit&&i.controller.on(e.event+":exit",e.onExit)):(e.onEventOnce&&i.controller.once(e.event,e.onEventOnce),e.onEventReverseOnce&&i.controller.once(e.event+":reverse",e.onEventReverseOnce),e.onEvent&&i.controller.on(e.event,e.onEvent),e.onEventReverse&&i.controller.on(e.event+":reverse",e.onEventReverse)),i}},{key:"addRAFLoop",value:function(e){var t=["start","end"];if(t.every((function(t){return e.hasOwnProperty(t)}))){var i=new d.create;i.on("update",e.onUpdate||f),i.on("draw",e.onDraw||f),i.on("draw",(function(){return i.run()}));var n=e.onEnter,r=e.onExit;return e.onEnter=function(){i.run(),n&&n()},e.onExit=function(){i.cancel(),r&&r()},this.addDiscreteEvent(e)}console.log("BubbleGum.BaseComponent::addRAFLoop required options are missing: "+t.join(" "))}},{key:"addContinuousEvent",value:function(e){e.onDraw||console.log("BubbleGum.BaseComponent::addContinuousEvent required option `onDraw` is missing. Consider using a regular keyframe if you do not need a callback"),e.event=e.event||"Generic-Event-Name-"+m++;var t=this.addKeyframe(e);return t.controller.on(e.event,e.onDraw),t}},{key:"mounted",value:function(){}},{key:"onResizeImmediate",value:function(e){}},{key:"onResizeDebounced",value:function(e){}},{key:"onBreakpointChange",value:function(e){}},{key:"anim",get:function(){return this.gum.anim}},{key:"keyframeController",get:function(){return this._keyframeController||(this._keyframeController=this.anim.getControllerForTarget(this.el))}},{key:"pageMetrics",get:function(){return h.pageMetrics}}]),t}(c);t.exports=p},{12:12,17:17,19:19,20:20,21:21,22:22,23:23,26:26,49:49,55:55,59:59,76:76}],94:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(12).EventEmitterMicro,c=e(99),h=e(70),d=e(76),f=e(95),m={},p=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this))).el=e,i.anim=h,i.components=[],i.el.getAttribute("data-anim-scroll-group")||i.el.setAttribute("data-anim-scroll-group","bubble-gum-group"),h.on(d.EVENTS.ON_DOM_GROUPS_CREATED,(function(e){i.componentsInitialized=!1,i.initComponents(),i.setupEvents()})),h.on(d.EVENTS.ON_DOM_KEYFRAMES_CREATED,(function(){i.components.forEach((function(e){return e.mounted()})),i.trigger(t.EVENTS.DOM_COMPONENTS_MOUNTED)})),c.add((function(){return h.initialize()})),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"initComponents",value:function(){var e=Array.prototype.slice.call(this.el.querySelectorAll("[data-component-list]"));this.el.hasAttribute("data-component-list")&&e.push(this.el);for(var t=0;t<e.length;t++)for(var i=e[t],n=i.getAttribute("data-component-list").split(" "),r=0,s=n.length;r<s;r++){var a=n[r];""!==a&&" "!==a&&this.addComponent({el:i,componentName:a})}this.componentsInitialized=!0}},{key:"setupEvents",value:function(){this.onResizeDebounced=this.onResizeDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),this.onBreakpointChange=this.onBreakpointChange.bind(this),h.on(d.PageEvents.ON_RESIZE_IMMEDIATE,this.onResizeImmediate),h.on(d.PageEvents.ON_RESIZE_DEBOUNCED,this.onResizeDebounced),h.on(d.PageEvents.ON_BREAKPOINT_CHANGE,this.onBreakpointChange)}},{key:"addComponent",value:function(e){var i=e.el,n=e.componentName,r=e.data;if(!f.hasOwnProperty(n))throw"BubbleGum::addComponent could not add component to '"+i.className+"'. No component type '"+n+"' found!";var s=f[n];if(!t.componentIsSupported(s,n))return void 0===m[n]&&(console.log("BubbleGum::addComponent unsupported component '"+n+"'. Reason: '"+n+".IS_SUPPORTED' returned false"),m[n]=!0),null;var a=i.dataset.componentList||"";a.includes(n)||(i.dataset.componentList=a.split(" ").concat(n).join(" "));var o=new s({el:i,data:r,componentName:e.componentName,gum:this,pageMetrics:d.pageMetrics});return this.components.push(o),this.componentsInitialized&&o.mounted(),o}},{key:"removeComponent",value:function(e){var t=this.components.indexOf(e);-1!==t&&(this.components.splice(t,1),e.el.dataset.componentList=e.el.dataset.componentList.split(" ").filter((function(t){return t!==e.componentName})).join(" "),e.destroy())}},{key:"getComponentOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,i="[data-component-list*="+e+"]",n=t.matches(i)?t:t.querySelector(i);return n?this.components.find((function(t){return t instanceof f[e]&&t.el===n})):null}},{key:"getComponentsOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,i="[data-component-list*="+e+"]",n=t.matches(i)?[t]:Array.from(t.querySelectorAll(i));return this.components.filter((function(t){return t instanceof f[e]&&n.includes(t.el)}))}},{key:"getComponentsForElement",value:function(e){return this.components.filter((function(t){return t.el===e}))}},{key:"onResizeImmediate",value:function(){this.components.forEach((function(e){return e.onResizeImmediate(d.pageMetrics)}))}},{key:"onResizeDebounced",value:function(){this.components.forEach((function(e){return e.onResizeDebounced(d.pageMetrics)}))}},{key:"onBreakpointChange",value:function(){this.components.forEach((function(e){return e.onBreakpointChange(d.pageMetrics)}))}}],[{key:"componentIsSupported",value:function(e,t){var i=e.IS_SUPPORTED;if(void 0===i)return!0;if("function"!=typeof i)return console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0;var n=e.IS_SUPPORTED();return void 0===n?(console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0):n}}]),t}(l);p.EVENTS={DOM_COMPONENTS_MOUNTED:"DOM_COMPONENTS_MOUNTED"},t.exports=p},{12:12,17:17,19:19,21:21,22:22,23:23,26:26,70:70,76:76,95:95,99:99}],95:[function(e,t,i){"use strict";t.exports={BaseComponent:e(93)}},{93:93}],96:[function(e,t,i){"use strict";var n=e(23),r=n(e(30)),s=n(e(17)),a=n(e(19)),o=function(){function e(t){(0,s.default)(this,e),this.name=t,this.playing=!1,this.requests=[]}return(0,a.default)(e,[{key:"addRequest",value:function(e){var t=this;this.requests.push(e),this.requests.sort((function(e,t){return e.priority-t.priority})),this.playing||(this.playing=!0,requestAnimationFrame((function(){t._schedule()})))}},{key:"_schedule",value:function(){var e=this;if(0!==this.requests.length){var t=this.requests.shift();0,t.callback(),setTimeout((function(){e._schedule()}),1e3*t.duration)}else this.playing=!1}}]),e}();var u=function(){function e(){(0,s.default)(this,e),this.buckets={}}return(0,a.default)(e,[{key:"_requestAnimationStartWithOptions",value:function(e){var t=this,i=e.bucket,n=e.duration,r=e.element,s=e.name,a=e.priority;return void 0!==r&&(i=Math.round(r.getBoundingClientRect().top+document.documentElement.scrollTop),a=c(r)),void 0===a&&(a=0),void 0===i||isNaN(i)?Promise.resolve():new Promise((function(e){t.buckets[i]||(t.buckets[i]=new o(i)),t.buckets[i].addRequest({callback:e,duration:n,name:s,priority:a})}))}},{key:"requestAnimationStart",value:function(e,t,i,n){var s;return s="object"==(0,r.default)(e)&&e?e:{bucket:e,duration:t/1e3,name:i,priority:n},this._requestAnimationStartWithOptions(s)}}]),e}(),l=new u;function c(e){return Array.prototype.indexOf.call(e.parentElement.children,e)}t.exports={CarnivalDirector:u,director:l,indexOf:c}},{17:17,19:19,23:23,30:30}],97:[function(e,t,i){"use strict";t.exports=function(e){var t=e.element,i=e.attribute,n=e.defaultOptions,r=t.getAttribute(i)||"{}",s=null;try{s=JSON.parse(r)}catch(e){return void console.error("attributeToJSON Error! Invalid JSON in `"+i+"` for element:",t)}for(var a in n)if(!s.hasOwnProperty(a)){if(null===n[a])return void console.error("attributeToJSON Error! Required key `"+a+"` missing from attribute JSON `"+i+"` for element:",t);s[a]=n[a]}return s}},{}],98:[function(e,t,i){"use strict";var n={create:e(110),invert:e(111),clone:e(109),transpose:e(116)},r={create:e(117),dot:e(119),normalize:e(122),length:e(121),cross:e(118),fromValues:e(120)},s={create:e(123),transformMat4:e(125),fromValues:e(124)},a=(Math.PI,180/Math.PI),o=function(e,t,i,n){var s=r.create();return s[0]=i*e[0]+n*t[0],s[1]=i*e[1]+n*t[1],s[2]=i*e[2]+n*t[2],s},u=function(e){var t,i,n,s=e[3]*e[3],a=e[0]*e[0],o=e[1]*e[1],u=e[2]*e[2],l=a+o+u+s,c=e[0]*e[1]+e[2]*e[3];return c>.499*l?(i=2*Math.atan2(e[0],e[3]),n=Math.PI/2,t=0,r.fromValues(t,i,n)):c<-.499*l?(i=-2*Math.atan2(e[0],e[3]),n=-Math.PI/2,t=0,r.fromValues(t,i,n)):(i=Math.atan2(2*e[1]*e[3]-2*e[0]*e[2],a-o-u+s),n=Math.asin(2*c/l),t=Math.atan2(2*e[0]*e[3]-2*e[1]*e[2],-a+o-u+s),r.fromValues(t,i,n))},l=function(e){return Math.abs(e)<1e-4};t.exports=function(e,t){return function(e,t){t=t||!1;for(var i=n.clone(e),c=r.create(),h=r.create(),d=r.create(),f=s.create(),m=s.create(),p=(r.create(),0);p<16;p++)i[p]/=i[15];var v=n.clone(i);v[3]=0,v[7]=0,v[11]=0,v[15]=1;i[3],i[7],i[11];var y=i[12],g=i[13],_=i[14],b=(i[15],s.create());if(l(i[3])&&l(i[7])&&l(i[11]))f=s.fromValues(0,0,0,1);else{b[0]=i[3],b[1]=i[7],b[2]=i[11],b[3]=i[15];var k=n.invert(n.create(),v),E=n.transpose(n.create(),k);f=s.transformMat4(f,b,E)}c[0]=y,c[1]=g,c[2]=_;var w=[r.create(),r.create(),r.create()];w[0][0]=i[0],w[0][1]=i[1],w[0][2]=i[2],w[1][0]=i[4],w[1][1]=i[5],w[1][2]=i[6],w[2][0]=i[8],w[2][1]=i[9],w[2][2]=i[10],h[0]=r.length(w[0]),r.normalize(w[0],w[0]),d[0]=r.dot(w[0],w[1]),w[1]=o(w[1],w[0],1,-d[0]),h[1]=r.length(w[1]),r.normalize(w[1],w[1]),d[0]/=h[1],d[1]=r.dot(w[0],w[2]),w[2]=o(w[2],w[0],1,-d[1]),d[2]=r.dot(w[1],w[2]),w[2]=o(w[2],w[1],1,-d[2]),h[2]=r.length(w[2]),r.normalize(w[2],w[2]),d[1]/=h[2],d[2]/=h[2];var x=r.cross(r.create(),w[1],w[2]);if(r.dot(w[0],x)<0)for(p=0;p<3;p++)h[p]*=-1,w[p][0]*=-1,w[p][1]*=-1,w[p][2]*=-1;m[0]=.5*Math.sqrt(Math.max(1+w[0][0]-w[1][1]-w[2][2],0)),m[1]=.5*Math.sqrt(Math.max(1-w[0][0]+w[1][1]-w[2][2],0)),m[2]=.5*Math.sqrt(Math.max(1-w[0][0]-w[1][1]+w[2][2],0)),m[3]=.5*Math.sqrt(Math.max(1+w[0][0]+w[1][1]+w[2][2],0)),w[2][1]>w[1][2]&&(m[0]=-m[0]),w[0][2]>w[2][0]&&(m[1]=-m[1]),w[1][0]>w[0][1]&&(m[2]=-m[2]);var A=s.fromValues(m[0],m[1],m[2],2*Math.acos(m[3])),T=u(m);return t&&(d[0]=Math.round(d[0]*a*100)/100,d[1]=Math.round(d[1]*a*100)/100,d[2]=Math.round(d[2]*a*100)/100,T[0]=Math.round(T[0]*a*100)/100,T[1]=Math.round(T[1]*a*100)/100,T[2]=Math.round(T[2]*a*100)/100,A[3]=Math.round(A[3]*a*100)/100),{translation:c,scale:h,skew:d,perspective:f,quaternion:m,eulerRotation:T,axisAngle:A}}(function(e){var t=String(getComputedStyle(e).transform).trim(),i=n.create();if("none"===t||""===t)return i;var r,s,a=t.slice(0,t.indexOf("("));if("matrix3d"===a)for(r=t.slice(9,-1).split(","),s=0;s<r.length;s++)i[s]=parseFloat(r[s]);else{if("matrix"!==a)throw new TypeError("Invalid Matrix Value");for(s=(r=t.slice(7,-1).split(",")).length;s--;)r[s]=parseFloat(r[s]);i[0]=r[0],i[1]=r[1],i[12]=r[4],i[4]=r[2],i[5]=r[3],i[13]=r[5]}return i}(e),t)}},{109:109,110:110,111:111,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125}],99:[function(e,t,i){"use strict";var n=!1,r=[];t.exports={NUMBER_OF_FRAMES_TO_WAIT:30,add:function(e){var t=this;if(r.push(e),!n){n=!0;var i=document.documentElement.scrollHeight,s=0;requestAnimationFrame((function e(){var n=document.documentElement.scrollHeight;if(i!==n)s=0;else if(++s>=t.NUMBER_OF_FRAMES_TO_WAIT)return void r.forEach((function(e){return e()}));i=n,requestAnimationFrame(e)}))}}}},{}],100:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=e(105).controls,o=e(11),u=function(){function e(t,i){(0,r.default)(this,e),i=Object.assign({},i),this._model=i.model||a,this._container=t,this._ctrls=new Map,this._state={arePresent:!1}}return(0,s.default)(e,[{key:"initialize",value:function(){var e=this,t=this._container;if(t){var i=this._model.SELECTORS;Object.keys(i).forEach((function(n){if("container"!==n){var r=i[n],s=t.querySelector(r);s&&(e._ctrls.set(n,s),e._state.arePresent=!0)}}))}}},{key:"isPresent",value:function(e){return!!this._ctrls.get(e)}},{key:"getElement",value:function(e){return this._ctrls.get(e)||null}},{key:"enable",value:function(e){this._setDisabled(e,!1)}},{key:"disable",value:function(e){this._setDisabled(e,!0)}},{key:"_setDisabled",value:function(e,t){var i=this._ctrls,n=function(n,r){var s=i.get(n);s?s.disabled=r:o("Unable to ".concat(t?"disable":"enable"," the ").concat(e," control. The element does not exist."))};"string"==typeof e?n(e,t):Array.isArray(e)&&e.forEach((function(e){n(e,t)}))}},{key:"disableAll",value:function(){var e=this;this._ctrls.forEach((function(t,i){e.disable(i)}))}},{key:"attach",value:function(e,t){var i=this._ctrls.get(e);i&&"function"==typeof t?i.addEventListener("click",t):o("Unable to attach ".concat(e," control."))}},{key:"remove",value:function(e,t){var i=this._ctrls.get(e);"string"!=typeof e&&"function"!=typeof t||!this._ctrls.get(e)?o("Unable to remove ".concat(e," control.")):i.removeEventListener("click",t)}},{key:"arePresent",get:function(){return this._state.arePresent}},{key:"allElements",get:function(){return this._ctrls}}]),e}();t.exports=u},{105:105,11:11,17:17,19:19,23:23}],101:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=e(105).frames,o=e(11),u=function(){function e(t,i){(0,r.default)(this,e),i=Object.assign({},i),this._model=i.model||a,this._container=t,this._frames=new Map,this._promise={},this._state={arePresent:!1,active:!1}}return(0,s.default)(e,[{key:"isPresent",value:function(e){return!!this._frames.get(e)}},{key:"isActive",value:function(e){return this._state[e].active}},{key:"getElement",value:function(e){var t=this._frames.get(e);return t||(o("The ".concat(e,"Frame does not appear to exist.")),null)}},{key:"initialize",value:function(){var e=this,t=this._container;if(t){var i=this._model.SELECTORS;Object.keys(i).forEach((function(n){if("container"!==n){var r=i[n],s=t.querySelector(r);s&&(e._frames.set(n,s),e._state.arePresent=!0,e._state[n]={},e._state[n].active=s.classList.contains(e._model.CLASS.active),e._state[n].hasCSSTransition=e._checkForCSSTransition(s,n),e._promise[n]={},e._promise[n].activate=null,e._promise[n].deactivate=null)}}))}}},{key:"activate",value:function(e){return this._setActivity(e,!0)}},{key:"deactivate",value:function(e){return this._setActivity(e,!1)}},{key:"deactivateAll",value:function(){var e=this,t=[];return this._frames.forEach((function(i,n){t.push(e.deactivate(n))})),Promise.all(t)}},{key:"_checkForCSSTransition",value:function(e,t){var i=window.getComputedStyle(e)["transition-duration"],n=i&&"0s"!==i;return n||o("InlineVideo : Frames : ".concat(t?t+"Frame":e," does not have a valid CSS transition for (de)activation")),n}},{key:"_toggleActivity",value:function(e,t){t||(t=this.getElement(e)),t.classList.toggle(this._model.CLASS.active),this._state[e].active=!this._state[e].active}},{key:"_setActivity",value:function(e,t){var i=this,n=this._frames.get(e);if(!n)return Promise.reject("The ".concat(e,"Frame element does not exist"));var r=t?"activate":"deactivate",s=t?"deactivate":"activate",a=this._promise[e][r];return a||(this._promise[e][s]||Promise.resolve()).then((function(){return i._promise[e][s]=null,i._promise[e][r]=new Promise((function(s,a){var o=i._state[e].active;if(!(t&&!o||!t&&o))return i._promise[e][r]=null,void s();var u=!!n.offsetHeight;if(i._state[e].hasCSSTransition&&u){n.addEventListener("transitionend",(function t(){n.removeEventListener("transitionend",t),i._promise[e][r]=null,s()})),i._toggleActivity(e,n)}else i._toggleActivity(e,n),i._promise[e][r]=null,s()}))}))}},{key:"arePresent",get:function(){return this._state.arePresent}},{key:"active",get:function(){var e=this,t=!1;return this._frames.forEach((function(i,n){var r=e.isActive(n);t=r||t})),t}}]),e}();t.exports=u},{105:105,11:11,17:17,19:19,23:23}],102:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=e(105).indicators,o=e(11),u=function(){function e(t,i){(0,r.default)(this,e),i=Object.assign({},i),this._model=i.model||a,this._container=t,this._indicators=new Map,this._state={arePresent:!1}}return(0,s.default)(e,[{key:"initialize",value:function(){var e=this,t=this._container;if(t){var i=this._model.SELECTORS;Object.keys(i).forEach((function(n){if("container"!==n){var r=i[n],s=t.querySelector(r);s&&(e._indicators.set(n,s),e._state.arePresent=!0,e._state[n]={},e._state[n].active=s.classList.contains(e._model.CLASS.active))}}))}}},{key:"isPresent",value:function(e){return!!this._indicators.get(e)}},{key:"isActive",value:function(e){return this._state[e].active}},{key:"getElement",value:function(e){return this._indicators.get(e)||null}},{key:"activate",value:function(e){this._setActivity(e,!1)}},{key:"deactivate",value:function(e){this._setActivity(e,!0)}},{key:"_setActivity",value:function(e,t){var i=this._indicators.get(e);if(i){var n=t?"remove":"add";this._state[e].active=!t,i.classList[n](this._model.CLASS.active)}else o("Unable to ".concat(t?"deactivate":"activate"," the ").concat(e," indicator. The element does not exist."))}},{key:"arePresent",get:function(){return this._state.arePresent}},{key:"allElements",get:function(){return this._indicators}}]),e}();t.exports=u},{105:105,11:11,17:17,19:19,23:23}],103:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(15)),u=n(e(21)),l=n(e(20)),c=n(e(22)),h=e(104),d=e(100),f=e(101),m=e(102),p=e(105),v=e(11),y=e(8),g=function(e){function t(e,i){var n;return(0,r.default)(this,t),(i=Object.assign({},i)).model=i.model||p,i.model=Object.assign({},i.model,i.model.video),delete i.model.video,(n=(0,a.default)(this,(0,u.default)(t).call(this,e,i)))._controls={},n._frames={},n._indicators={},n.replay=n.replay.bind((0,o.default)(n)),n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"initialize",value:function(){(0,l.default)((0,u.default)(t.prototype),"initialize",this).call(this);var e=this._container;if(e){var i=e.querySelector(this._model.controls.SELECTORS.container),n=e.querySelector(this._model.frames.SELECTORS.container)||e,r=e.querySelector(this._model.indicators.SELECTORS.container),s=this._model;i&&(this._controls=new d(i,{model:s.controls}),this._controls.initialize(),this._controls.arePresent&&this._attachControls()),n&&(this._frames=new f(n,{model:s.frames}),this._frames.initialize(),this._frames.arePresent||v("No inline-video frames appear to be present. At minimum, a static frame should be present for fallback.")),r&&(this._indicators=new m(r,{model:s.indicators}),this._indicators.initialize())}else y("InlineVideo Error : A video element was passed as the containing element. InlineVideo class expects a container element holding the video, optional frames, and optional controls.")}},{key:"load",value:function(){var e=this,i=this._indicators;!this.loaded&&i.arePresent&&i.activate("loading");var n=Promise.resolve();return this._frames.active,n.then((function(){return(0,l.default)((0,u.default)(t.prototype),"load",e).call(e)}))}},{key:"play",value:function(){var e=this,i=this._frames,n=this._controls,r=i.isPresent("end")&&i.isActive("end")?i.deactivate("end"):Promise.resolve();return this._el.addEventListener("playing",(function t(){e._el.removeEventListener("playing",t),n.arePresent&&(n.disable(["play","replay"]),n.enable("pause"))})),r.then((function(){return(0,l.default)((0,u.default)(t.prototype),"play",e).call(e)}),(function(e){v(e)}))}},{key:"pause",value:function(){var e=this._controls;return(0,l.default)((0,u.default)(t.prototype),"pause",this).call(this).then((function(){e.arePresent&&(e.disable("pause"),e.enable("play"))}),(function(e){v(e)}))}},{key:"reset",value:function(){var e=this,i=this._controls;return(0,l.default)((0,u.default)(t.prototype),"reset",this).call(this).then((function(){i.arePresent&&(i.disable("pause"),e.hasPlayed&&i.isPresent("replay")?i.enable("replay"):i.enable("play"))}),(function(e){v(e)}))}},{key:"replay",value:function(){var e=this,t=this._controls;return t.arePresent&&(t.disable("replay"),t.enable("pause")),this.reset().then((function(){return e.play()})).catch((function(e){v(e)}))}},{key:"_attachControls",value:function(){var e=this,t=this._controls;t.allElements.forEach((function(i,n){var r=e[n];r?t.attach(n,r):v("Unable to attach ".concat(n," control. No equivalent video method."))}))}},{key:"_onLoadSuccess",value:function(e){var i=this,n=this._controls,r=this._frames,s=this._indicators;return(0,l.default)((0,u.default)(t.prototype),"_onLoadSuccess",this).call(this,e).then((function(){return s.arePresent&&s.deactivate("loading"),n.arePresent&&(i.hasPlayed&&n.isPresent("replay")?n.enable("replay"):n.enable("play")),r.arePresent?r.deactivateAll():Promise.resolve()})).catch((function(e){v(e)})).then((function(){return Promise.resolve()}))}},{key:"_onLoadFailure",value:function(e){var i=this,n=this._controls,r=this._frames,s=this._indicators;return(0,l.default)((0,u.default)(t.prototype),"_onLoadFailure",this).call(this,e).catch((function(e){})).then((function(){return s.arePresent&&s.deactivate("loading"),n.arePresent&&n.disableAll(),r.arePresent?r.activate("static"):Promise.resolve()})).then((function(){var e=r.deactivate("end"),t=r.deactivate("start");return Promise.all([e,t])})).catch((function(e){v(e)})).then((function(){var t=i._el;return t.getAttribute("src")&&(t.setAttribute("src",""),i._video.source.revokeLastObjectUrl()),Promise.reject(e)}))}},{key:"_onEnded",value:function(e){var i=this,n=this._controls,r=this._frames;return n.arePresent&&(n.disable(["pause","play","replay"]),n.isPresent("replay")?n.enable("replay"):n.enable("play")),(r.isPresent("end")&&!r.isActive("end")?r.activate("end"):Promise.resolve()).catch((function(e){v(e)})).then((function(){return(0,l.default)((0,u.default)(t.prototype),"_onEnded",i).call(i,e)}))}},{key:"frames",get:function(){return this._frames}},{key:"controls",get:function(){return this._controls}},{key:"indicators",get:function(){return this._indicators}}]),t}(h);t.exports=g},{100:100,101:101,102:102,104:104,105:105,11:11,15:15,17:17,19:19,20:20,21:21,22:22,23:23,26:26,8:8}],104:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=e(105).video,o=e(90),u=e(8),l=function(){function e(t,i){(0,r.default)(this,e),i=Object.assign({},i),this._model=i.model||a,delete i.model,this._options=i;var n="VIDEO"===t.tagName;this._container=n?null:t,this._el=n?t:null,this._source=null,this._promise={load:null,nativePlay:null,playOnEnd:null},this._state={loading:!1,hasPlayed:!1,assetUrl:"",name:""},this.load=this.load.bind(this),this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.end=this.end.bind(this),this.reset=this.reset.bind(this),this._crossBrowserPlay=this._crossBrowserPlay.bind(this),this._playPromiseOnEnded=this._playPromiseOnEnded.bind(this),this._onEnded=this._onEnded.bind(this)}return(0,s.default)(e,null,[{key:"convertToResolution",value:function(e){return o.convertToResolution(e)}},{key:"convertViewportName",value:function(e,t){return o.convertViewportName(e,t)}}]),(0,s.default)(e,[{key:"initialize",value:function(){this._container&&(this._el=this._container.querySelector(this._model.SELECTORS.video)),this._options.el=this._el,this._source=new o(this._options),this._state.name=this._source.name}},{key:"change",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.viewport;n&&!i&&(t.viewport=e.convertViewportName(n)),this.source.change(t)}},{key:"load",value:function(){var e=this;return this._promise.load&&this.loaded?this._promise.load:(this._state.loading=!0,this._promise.load=this._source.load().then((function(t){return e._onLoadSuccess(t)}),(function(t){return e._onLoadFailure(t)})))}},{key:"play",value:function(){if(this._promise.nativePlay||this.isPlaying)return this._promise.playOnEnd;var e=this._promise.load;return e||this.loaded||(e=this.load()),this._promise.playOnEnd=e.then(this._playPromiseOnEnded)}},{key:"pause",value:function(){var e=this,t=this._promise.nativePlay;return(t=t||Promise.resolve()).then((function(){return!e._el.paused&&e.loaded&&e._el.pause(),Promise.resolve()}),(function(e){return Promise.reject(e)}))}},{key:"reset",value:function(){var e=this,t=this._promise.nativePlay;return(t=t||Promise.resolve()).then((function(){return e.loaded&&(e._el.paused||e._el.pause(),e._el.currentTime=0),Promise.resolve()}),(function(e){return Promise.reject(e)}))}},{key:"end",value:function(){var e=this;return this._el.ended?Promise.resolve():this.pause().then((function(){return e._el.currentTime=e.normalizedDuration,Promise.resolve()}),(function(e){return Promise.reject(e)}))}},{key:"_onLoadSuccess",value:function(e){var t=this;return new Promise((function(i,n){t._el.addEventListener("loadeddata",(function e(){t._el.removeEventListener("loadeddata",e),t._onFirstFrameLoaded(),i()})),t._el.setAttribute("src",e),t._el.load()}))}},{key:"_onFirstFrameLoaded",value:function(){this._state.assetUrl=this._source.assetUrl,this._state.loading=!1,this._source.revokeLastObjectUrl()}},{key:"_onLoadFailure",value:function(e){return u("inline-video load error:",e),this._state.loading=!1,Promise.reject(e)}},{key:"_crossBrowserPlay",value:function(){var e=this._el.play();return e||Promise.resolve()}},{key:"_playPromiseOnEnded",value:function(){var e=this;return new Promise((function(t,i){e._el.onended=function(){e._onEnded(t)},(e._promise.nativePlay=e._crossBrowserPlay()).then((function(){e._state.hasPlayed=!0,e._promise.nativePlay=null})).catch(i)}))}},{key:"_onEnded",value:function(e){return e()}},{key:"el",get:function(){return this._el}},{key:"source",get:function(){return this._source}},{key:"loading",get:function(){return this._state.loading}},{key:"loaded",get:function(){return this._state.assetUrl===this._source.assetUrl}},{key:"hasPlayed",get:function(){return this._state.hasPlayed}},{key:"assetUrl",get:function(){return this._state.hasPlayed}},{key:"isPlaying",get:function(){var e=this._el;return!(!e||e.paused||e.ended||!(e.readyState>2))}},{key:"viewport",get:function(){return this.source.viewport}},{key:"resolution",get:function(){return this.source.resolution}},{key:"normalizedDuration",get:function(){var e=this._el.duration,t=e%1;return e-t+.1*Math.ceil(t/.1)}},{key:"name",get:function(){return this._state.name},set:function(e){this._state.name=e}}]),e}();t.exports=l},{105:105,17:17,19:19,23:23,8:8,90:90}],105:[function(e,t,i){"use strict";t.exports={video:{SELECTORS:{video:"video",mediaContainer:".inline-video-media"}},frames:{CLASS:{active:"active"},SELECTORS:{container:".inline-video-media",static:".inline-video-frame-static",start:".inline-video-frame-start",end:".inline-video-frame-end"}},controls:{SELECTORS:{container:".inline-video-controls",play:".inline-video-control-play",replay:".inline-video-control-replay",pause:".inline-video-control-pause",reset:".inline-video-control-reset"}},indicators:{CLASS:{active:"active"},SELECTORS:{container:".inline-video-indicators",loading:".inline-video-indicator-loading"}}}},{}],106:[function(e,t,i){"use strict";t.exports={lerp:function(e,t,i){return t+(i-t)*e},map:function(e,t,i,n,r){return n+(r-n)*(e-t)/(i-t)},mapClamp:function(e,t,i,n,r){var s=n+(r-n)*(e-t)/(i-t);return Math.max(n,Math.min(r,s))},norm:function(e,t,i){return(e-t)/(i-t)},clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},randFloat:function(e,t){return Math.random()*(t-e)+e},randInt:function(e,t){return Math.floor(Math.random()*(t-e)+e)}}},{}],107:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(15)),u=n(e(21)),l=n(e(20)),c=n(e(22)),h=e(12).EventEmitterMicro,d=[{name:"S",mediaQuery:"only screen and (max-width: 734px)"},{name:"M",mediaQuery:"only screen and (min-width: 735px) and (max-width: 1068px)  "},{name:"L",mediaQuery:"only screen and (min-width: 1069px) and (max-width: 1440px)"},{name:"X",mediaQuery:"only screen and (min-width: 1441px)"}],f="only screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min-resolution: 1.5dppx), screen and (min-resolution: 144dpi)",m="only screen and (orientation: portrait)",p=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.default)(this,t),(e=(0,a.default)(this,(0,u.default)(t).call(this))).BREAKPOINTS=i.breakpoints||d,e._setupProperties(),e._onRetinaChange=e._onRetinaChange.bind((0,o.default)(e)),e._onOrientationChange=e._onOrientationChange.bind((0,o.default)(e)),e.listenersAdded={orientation:!1,retina:!1,viewport:!1},e}return(0,c.default)(t,e),(0,s.default)(t,[{key:"on",value:function(){this._setupListeners(arguments[0]),(0,l.default)((0,u.default)(t.prototype),"on",this).apply(this,arguments)}},{key:"_onRetinaChange",value:function(){this.trigger(t.CHANGE_EVENTS.RETINA,this)}},{key:"_onOrientationChange",value:function(){this.trigger(t.CHANGE_EVENTS.ORIENTATION,this)}},{key:"_setupProperties",value:function(){Object.defineProperty(this,"retina",{get:function(){return window.matchMedia(f).matches}}),Object.defineProperty(this,"orientation",{get:function(){return window.matchMedia(m).matches?"portrait":"landscape"}}),this.viewport=this.getBreakpoint()}},{key:"_setupListeners",value:function(e){var i=this;if(e!==t.CHANGE_EVENTS.RETINA||this.listenersAdded.retina||(window.matchMedia(f).addListener(this._onRetinaChange),this.listenersAdded.retina=!0),e!==t.CHANGE_EVENTS.ORIENTATION||this.listenersAdded.orientation||(window.matchMedia(m).addListener(this._onOrientationChange),this.listenersAdded.orientation=!0),e===t.CHANGE_EVENTS.VIEWPORT&&!this.listenersAdded.viewport){for(var n=function(e){var n=i.BREAKPOINTS[e];window.matchMedia(n.mediaQuery).addListener((function(e){e.matches&&(i.oldViewport=i.viewport,i.viewport=n.name,i.trigger(t.CHANGE_EVENTS.VIEWPORT,i))}))},r=0;r<this.BREAKPOINTS.length;r++)n(r);this.listenersAdded.viewport=!0}}},{key:"getBreakpoint",value:function(){for(var e=0;e<this.BREAKPOINTS.length;e++){var t=this.BREAKPOINTS[e];if(window.matchMedia(t.mediaQuery).matches)return t.name}}}],[{key:"CHANGE_EVENTS",get:function(){return{ORIENTATION:"change:orientation",RETINA:"change:retina",VIEWPORT:"change:viewport"}}}]),t}(h);t.exports=p},{12:12,15:15,17:17,19:19,20:20,21:21,22:22,23:23,26:26}],108:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=e(66),o=e(8),u=e(10),l={requestMethod:"GET",timeout:3e4};Object.freeze(l);var c={response:null,xhr:null};Object.freeze(c);var h={evt:null,xhr:null};Object.freeze(h);var d=function(){function e(t,i){(0,r.default)(this,e),t||"string"==typeof t?(this._src=a(t).href,this._opts=Object.assign({},l,i),this._xhr=new XMLHttpRequest,this._promise=null,this._metrics={progress:0,totalAssetSize:null,time:{requested:null,load:{start:null,end:null,total:null}}},this._onLoadStart=this._onLoadStart.bind(this),this._onProgress=this._onProgress.bind(this),this._rejectData=this._rejectData.bind(this)):o("createXhr(src, opts), a src is required to create an XMLHttpRequest")}return(0,s.default)(e,null,[{key:"isCORSRequest",value:function(e){return window.location.hostname!==a(e).hostname}},{key:"IS_SUPPORTED",get:function(){var e=window.XMLHttpRequest,t=window.Promise;return e&&"function"==typeof e&&(t&&"function"==typeof t)}}]),(0,s.default)(e,[{key:"open",value:function(){0===this._xhr.readyState&&(this._xhr.open(this._opts.requestMethod,this._src,!0,this._opts.user,this._opts.password),this._setXhrProps(),u("XmlHttpRequest opened and properties set"))}},{key:"send",value:function(e){var t=this;return e=void 0===e?null:e,this._promise?this._promise:this._promise=new Promise((function(i,n){t._xhr.onprogress=t._onProgress,t._xhr.onloadstart=t._onLoadStart,t._xhr.onload=function(e){return t._onLoad(i,n,e)},t._xhr.ontimeout=function(e){return t._rejectData(n,e)},t._xhr.onerror=function(e){return t._rejectData(n,e)},t._xhr.onabort=function(e){return t._rejectData(n,e)},t._metrics.time.requested=Date.now(),t._xhr.send(e),u("XmlHttpRequest sent")}))}},{key:"destroy",value:function(){var e=this;return 4!==this._xhr.readyState&&this._xhr.abort(),this._promise=this._promise||Promise.resolve(),this._promise.then((function(){e._nullifyConstructorProps()}),(function(){e._nullifyConstructorProps()})).then((function(){return Promise.resolve()}))}},{key:"_nullifyConstructorProps",value:function(){this._src=null,this._metrics={progress:null,totalAssetSize:null,time:{requested:null,load:{start:null,end:null,total:null}}}}},{key:"_calcTotalLoadTime",value:function(){this._metrics.time.load.end=Date.now(),this._metrics.time.load.total=this._metrics.time.load.end-this._metrics.time.load.start}},{key:"_setXhrProps",value:function(){var e=this;Object.keys(this._opts).forEach((function(t){t in e._xhr&&"function"!=typeof e._xhr[t]&&(e._xhr[t]=e._opts[t])}))}},{key:"_onLoadStart",value:function(){this._metrics.time.load.start=Date.now(),this._metrics.progress=0,u("XmlHttpRequest loading")}},{key:"_onLoad",value:function(e,t,i){if(200!==this._xhr.status)return this._rejectData(t,i);this._calcTotalLoadTime();var n=Object.assign({},c,{response:this._xhr.response,xhr:this._xhr});return u("XmlHttpRequest loaded"),e(n)}},{key:"_onProgress",value:function(e){this._metrics.totalAssetSize||(this._metrics.totalAssetSize=e.total),this._metrics.progress=e.total?e.loaded/e.total:0}},{key:"_rejectData",value:function(e,t){var i=Object.assign({},h,{evt:t,xhr:this._xhr});return o("XhrRequest failed due to",i),e(i)}},{key:"xhr",get:function(){return this._xhr}},{key:"requestUrl",get:function(){return this._src}},{key:"progress",get:function(){return this._metrics.progress}},{key:"totalAssetSize",get:function(){return this._metrics.totalAssetSize}},{key:"requestedAtTime",get:function(){return this._metrics.time.requested}},{key:"loadStartTime",get:function(){return this._metrics.time.load.start}},{key:"loadEndTime",get:function(){return this._metrics.time.load.end}},{key:"totalLoadTime",get:function(){return this._metrics.time.load.total}}]),e}();t.exports=d},{10:10,17:17,19:19,23:23,66:66,8:8}],109:[function(e,t,i){t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],110:[function(e,t,i){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],111:[function(e,t,i){t.exports=function(e,t){var i=t[0],n=t[1],r=t[2],s=t[3],a=t[4],o=t[5],u=t[6],l=t[7],c=t[8],h=t[9],d=t[10],f=t[11],m=t[12],p=t[13],v=t[14],y=t[15],g=i*o-n*a,_=i*u-r*a,b=i*l-s*a,k=n*u-r*o,E=n*l-s*o,w=r*l-s*u,x=c*p-h*m,A=c*v-d*m,T=c*y-f*m,S=h*v-d*p,P=h*y-f*p,O=d*y-f*v,C=g*O-_*P+b*S+k*T-E*A+w*x;if(!C)return null;return C=1/C,e[0]=(o*O-u*P+l*S)*C,e[1]=(r*P-n*O-s*S)*C,e[2]=(p*w-v*E+y*k)*C,e[3]=(d*E-h*w-f*k)*C,e[4]=(u*T-a*O-l*A)*C,e[5]=(i*O-r*T+s*A)*C,e[6]=(v*b-m*w-y*_)*C,e[7]=(c*w-d*b+f*_)*C,e[8]=(a*P-o*T+l*x)*C,e[9]=(n*T-i*P-s*x)*C,e[10]=(m*E-p*b+y*g)*C,e[11]=(h*b-c*E-f*g)*C,e[12]=(o*A-a*S-u*x)*C,e[13]=(i*S-n*A+r*x)*C,e[14]=(p*_-m*k-v*g)*C,e[15]=(c*k-h*_+d*g)*C,e}},{}],112:[function(e,t,i){t.exports=function(e,t,i){var n=Math.sin(i),r=Math.cos(i),s=t[4],a=t[5],o=t[6],u=t[7],l=t[8],c=t[9],h=t[10],d=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=s*r+l*n,e[5]=a*r+c*n,e[6]=o*r+h*n,e[7]=u*r+d*n,e[8]=l*r-s*n,e[9]=c*r-a*n,e[10]=h*r-o*n,e[11]=d*r-u*n,e}},{}],113:[function(e,t,i){t.exports=function(e,t,i){var n=Math.sin(i),r=Math.cos(i),s=t[0],a=t[1],o=t[2],u=t[3],l=t[8],c=t[9],h=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=s*r-l*n,e[1]=a*r-c*n,e[2]=o*r-h*n,e[3]=u*r-d*n,e[8]=s*n+l*r,e[9]=a*n+c*r,e[10]=o*n+h*r,e[11]=u*n+d*r,e}},{}],114:[function(e,t,i){t.exports=function(e,t,i){var n=Math.sin(i),r=Math.cos(i),s=t[0],a=t[1],o=t[2],u=t[3],l=t[4],c=t[5],h=t[6],d=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=s*r+l*n,e[1]=a*r+c*n,e[2]=o*r+h*n,e[3]=u*r+d*n,e[4]=l*r-s*n,e[5]=c*r-a*n,e[6]=h*r-o*n,e[7]=d*r-u*n,e}},{}],115:[function(e,t,i){t.exports=function(e,t,i){var n=i[0],r=i[1],s=i[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],116:[function(e,t,i){t.exports=function(e,t){if(e===t){var i=t[1],n=t[2],r=t[3],s=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=s,e[11]=t[14],e[12]=r,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},{}],117:[function(e,t,i){t.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],118:[function(e,t,i){t.exports=function(e,t,i){var n=t[0],r=t[1],s=t[2],a=i[0],o=i[1],u=i[2];return e[0]=r*u-s*o,e[1]=s*a-n*u,e[2]=n*o-r*a,e}},{}],119:[function(e,t,i){t.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},{}],120:[function(e,t,i){t.exports=function(e,t,i){var n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=i,n}},{}],121:[function(e,t,i){t.exports=function(e){var t=e[0],i=e[1],n=e[2];return Math.sqrt(t*t+i*i+n*n)}},{}],122:[function(e,t,i){t.exports=function(e,t){var i=t[0],n=t[1],r=t[2],s=i*i+n*n+r*r;s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s);return e}},{}],123:[function(e,t,i){t.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],124:[function(e,t,i){t.exports=function(e,t,i,n){var r=new Float32Array(4);return r[0]=e,r[1]=t,r[2]=i,r[3]=n,r}},{}],125:[function(e,t,i){t.exports=function(e,t,i){var n=t[0],r=t[1],s=t[2],a=t[3];return e[0]=i[0]*n+i[4]*r+i[8]*s+i[12]*a,e[1]=i[1]*n+i[5]*r+i[9]*s+i[13]*a,e[2]=i[2]*n+i[6]*r+i[10]*s+i[14]*a,e[3]=i[3]*n+i[7]*r+i[11]*s+i[15]*a,e}},{}],126:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(96),c=e(153),h=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).cancelAnimationRequest=null,i.gridItemClass=".grid-item-".concat(i.el.getAttribute("data-anim-scroll-group")),i.animationDuration=4.5,i.timeGroup=i.anim.createTimeGroup(),i.timeGroup.name="adaptive-lighting",i.scrollGroup=i.anim.getGroupForTarget(i.el),i.icon=i.el.querySelector(".adaptive-lighting-icon"),i.text=i.el.querySelector(".typography-blockquote-copy"),i.params={easeFunction:"cubic-bezier(.66,0,.34,1)",currRGB:{r:0,g:0,b:0},baseRGB:i._hexToRGB(window.getComputedStyle(i.el).getPropertyValue("--base-color").trim()),startRGB:i._hexToRGB(window.getComputedStyle(i.el).getPropertyValue("--start-color").trim()),endRGB:i._hexToRGB(window.getComputedStyle(i.el).getPropertyValue("--end-color").trim())},i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){this._setupEvents(),this._setupTimelineKeyframes()}},{key:"_setupEvents",value:function(){var e=this,t=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.play),i=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.reset);t.controller.on("play:enter",(function(){e._playTileAnimation()})),i.controller.on("reset:exit",(function(){e._resetTileAnimation()}))}},{key:"_setupTimelineKeyframes",value:function(){var e=this,t=this.animationDuration/3;this.timeGroup.addKeyframe(this.el,{start:0,end:t,easeFunction:this.params.easeFunction,t:[0,1],event:"fade-to-cool"}),this.timeGroup.addKeyframe(this.el,{start:t,end:2*t,easeFunction:this.params.easeFunction,t:[0,1],event:"fade-to-warm"}),this.timeGroup.addKeyframe(this.el,{start:2*t,end:this.animationDuration,easeFunction:this.params.easeFunction,t:[0,1],event:"fade-to-base"}),this.anim.getControllerForTarget(this.el).on("fade-to-cool",(function(t){e._updateColors(e.params.baseRGB,e.params.startRGB,t.tweenProps.t.current)})),this.anim.getControllerForTarget(this.el).on("fade-to-warm",(function(t){e._updateColors(e.params.startRGB,e.params.endRGB,t.tweenProps.t.current)})),this.anim.getControllerForTarget(this.el).on("fade-to-base",(function(t){e._updateColors(e.params.endRGB,e.params.baseRGB,t.tweenProps.t.current)}))}},{key:"_playTileAnimation",value:function(){var e=this,t=l.director.requestAnimationStart({element:this.el,duration:this.animationDuration});t.then((function(){e.timeGroup.play()})),this.cancelAnimationRequest=t.cancel}},{key:"_resetTileAnimation",value:function(){this.cancelAnimationRequest&&(this.cancelAnimationRequest(),this.cancelAnimationRequest=null),this.timeGroup.restart(),this.timeGroup.pause()}},{key:"_hexToRGB",value:function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,i,n){return t+t+i+i+n+n}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}},{key:"_lerpRGB",value:function(e,t,i){var n={};return n.r=Math.round(e.r+(t.r-e.r)*i),n.g=Math.round(e.g+(t.g-e.g)*i),n.b=Math.round(e.b+(t.b-e.b)*i),n}},{key:"_updateColors",value:function(e,t,i){this.params.currRGB=this._lerpRGB(e,t,i);var n="rgb(".concat(this.params.currRGB.r,", ").concat(this.params.currRGB.g,", ").concat(this.params.currRGB.b,")");return this.icon.style.background=n,this.text.style.color=n,n}}],[{key:"IS_SUPPORTED",value:function(){var e=document.documentElement;return!e.classList.contains("aow")&&!e.classList.contains("reduced-motion")}}]),t}(e(93));t.exports=h},{153:153,17:17,19:19,21:21,22:22,23:23,26:26,93:93,96:96}],127:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(12).EventEmitterMicro,c=e(129),h=e(2),d=function(e){function t(e,i){var n;return(0,r.default)(this,t),(n=(0,a.default)(this,(0,o.default)(t).call(this))).name=e,n.image=new Image,n.width=0,n.height=0,n.defaultSettings=new c,n.image.addEventListener("load",(function(){n.width=n.image.naturalWidth,n.height=n.image.naturalHeight,h.get(i.replace(".png",".json"),{success:function(e,t){n.defaultSettings.set(JSON.parse(e)),n.defaultSettings.brush=n.name},complete:function(){return n.trigger("load")}})})),n.image.src=i,n.coloredVariants={"#FFFFFF":n.image},n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"getColor",value:function(e){return this.coloredVariants[e]?this.coloredVariants[e]:(this.coloredVariants[e]=this._tint(e,1),this.coloredVariants[e])}},{key:"_tint",value:function(e,t){var i=document.createElement("canvas");i.width=this.image.width,i.height=this.image.height;var n=i.getContext("2d");return n.fillStyle=e,n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.globalAlpha=1,n.drawImage(this.image,0,0),i}}]),t}(l);t.exports=d},{12:12,129:129,17:17,19:19,2:2,21:21,22:22,23:23,26:26}],128:[function(e,t,i){"use strict";var n=e(23),r=n(e(32)),s=n(e(16)),a=n(e(17)),o=n(e(19)),u=n(e(26)),l=n(e(21)),c=n(e(22)),h=e(93),d=e(106),f=e(97),m=e(2),p={update:e(59)},v=e(130),y=e(132),g=e(134),_=e(133),b=e(131),k=e(135),E=e(136),w=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,u.default)(this,(0,l.default)(t).call(this,e))).retinaScale=2,i.editor=null,i.canvas=null,i.ctx=null,i.wantsToStartPlayback=!1,i.hasLoaded=!1,i.disabled=!1,i.triggerKeyframe=null,i.breakpointMask="SMLX",i.breakpoint=e.pageMetrics.breakpoint,"X"===i.breakpoint&&(i.breakpoint="L"),i}var i,n,h,w,x;return(0,c.default)(t,e),(0,o.default)(t,[{key:"mounted",value:function(){if(this.config={data:null,trigger:null,fallback:"",preventAutoplay:!1,instant:!1,delay:0},this.el.hasAttribute(_.ConfigAttribute)){if(this.config=f({element:this.el,attribute:_.ConfigAttribute,defaultOptions:this.config}),this.config.customBreakpoints&&(this.breakpoint=this.getCSSBreakpoint()||this.breakpoint,this.config.breakpointMask||(this.config.breakpointMask=this.config.customBreakpoints)),this.config.breakpointMask||(this.config.breakpointMask=this.breakpointMask),!this.enabledForBreakpoint())return;this.config.preventAutoplay||this.createTriggerKeyframe()}this.loadBrushes()}},{key:"enabledForBreakpoint",value:function(){var e=-1!==this.config.breakpointMask.toUpperCase().indexOf(this.breakpoint);if(!e){if(this.config.fallback&&""!==this.config.fallback){var t=this.el.parentElement.querySelector(this.config.fallback);t||console.error('CanvasAnnotation error: Attempting to disable dynamic annotation and display fallback image, but could not find fallback image using  provided querySelector "'.concat(this.config.fallbackImage,'"')),t.classList.add(_.DynamicAnnotationShowFallback)}return!1}return!0}},{key:"disable",value:function(){this.disabled||(this.disabled=!0,this.canvas&&(this.el.removeChild(this.canvas),this.canvas=null,this.ctx=null),this.triggerKeyframe&&this.triggerKeyframe.controller.off(this.triggerKeyframe.event+":enter"))}},{key:"loadBrushes",value:function(){var e=this;b.once("brushesloaded",(function(){return e.onBrushesLoaded()})),b.load()}},{key:"onBreakpointChange",value:function(e){this.enabledForBreakpoint()&&!this.config.customBreakpoints&&(this.breakpoint=e.breakpoint,"X"===this.breakpoint&&(this.breakpoint="L"),this.onBrushesLoaded())}},{key:"onCustomBreakpointChanged",value:function(e){this.enabledForBreakpoint()&&(this.breakpoint=e,this.onBrushesLoaded())}},{key:"onResizeDebounced",value:function(e){this.config.customBreakpoints&&(this.breakpoint=this.getCSSBreakpoint()||e.breakpoint,this.breakpoint!==this.previousBP&&(this.previousBP=this.breakpoint,this.onCustomBreakpointChanged(this.breakpoint)))}},{key:"getCSSBreakpoint",value:function(){return window.getComputedStyle(this.el).getPropertyValue("--breakpoint").replace(/[\s\"]/g,"")}},{key:"onBrushesLoaded",value:function(){var e=this;if(this.trigger("brushes-loaded"),this.config){var t=_.BasePath+"data/"+this.config.data+".json";m.get(t,{success:function(t,i){var n=JSON.parse(t);n=e.applyTransforms(n),e.data=e.centerDrawing(n),n.forEach((function(e){var t=y.getPoints(e.rawPoints);e.bezierCurves=y.getCurves(t)}));var r=e.getBoundingBox(n);r.width*=.5,r.height*=.5,e.removeCanvas(),e.createCanvas(r),e.triggerKeyframe&&p.update((function(){e.triggerKeyframe.controller.group.metrics.refreshMetrics(e.el),e.triggerKeyframe.overwriteProps({})})),e.hasLoaded=!0,e.tryToStartPlayback()}})}}},{key:"applyTransforms",value:function(e){var t=this;return this.getTransformationList().forEach((function(i){var n=Object.keys(i)[0],r=i[n];["transform_"+n]in t&&t["transform_"+n](r,e)})),e}},{key:"transform_translate",value:function(e,t){return t.forEach((function(t){t.rawPoints=t.rawPoints.map((function(t){return t.x+=e[0],t.y+=e[1],t}))}))}},{key:"transform_scale",value:function(e,t){return t.forEach((function(t){t.rawPoints=t.rawPoints.map((function(t){return t.x*=e[0],t.y*=e[1],t}))}))}},{key:"transform_rotate",value:function(e,t){var i=e[0]*Math.PI/180,n=void 0===e[1]?e[0]:e[1];n*=Math.PI/180;var r=Math.cos(i),s=Math.sin(i),a=Math.cos(n),o=Math.sin(n),u=this.getCenter(t);return t.forEach((function(e){e.rawPoints=e.rawPoints.map((function(e){var t=e.x-u.x,i=e.y-u.y,n=t*r-i*s,l=t*o+i*a;return e.x=n+u.x,e.y=l+u.y,e}))}))}},{key:"getTransformationList",value:function(){for(var e=this.config.customBreakpoints||"SML",t=e.indexOf(this.breakpoint),i=this.config.transforms||[],n=t;n<e.length;n++){var r="transforms_"+e[n].toLowerCase();if(this.config[r]){i=this.config[r];break}}return i}},{key:"createTriggerKeyframe",value:function(){var e=this,t=this.addDiscreteEvent({start:this.config.instant?"t - 150vh":this.config.trigger,end:this.config.instant?"t + 150vh":"b",disabledWhen:"no-dynamic-annotations",event:this.config.data+"-playback"}),i=this.config.repeats?"on":"once";t.controller[i](t.event+":enter",(function(){e.wantsToStartPlayback=!0,e.tryToStartPlayback()})),this.triggerKeyframe=t}},{key:"initializeEditorMode",value:function(e){this.editor=e;var t=this.el.getBoundingClientRect();this.createCanvas(t),this.setupOffscreenCanvas(t),this.continuousPlaybackMode()}},{key:"createCanvas",value:function(e){var t=Math.ceil(e.width),i=Math.ceil(e.height);this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d",{alpha:!0}),this.canvas.width=2*t,this.canvas.height=2*i,this.canvas.style.width=Math.round(t)+"px",this.canvas.style.height=Math.round(i)+"px",this.el.appendChild(this.canvas)}},{key:"removeCanvas",value:function(){var e=this.el.getElementsByTagName("canvas");e.length>0&&this.el.removeChild(e[0])}},{key:"getBoundingBox",value:function(e){var t=e.map((function(e){var t=b.get(e.settings.brush),i=Math.max(t.width,t.height);return g.calculateBoundingBoxOfPoints(e.rawPoints,i)}));return g.calculateBoundingBoxOfRects(t,10)}},{key:"centerDrawing",value:function(e){var t=this.getCenter(e);return e.forEach((function(e){e.rawPoints=e.rawPoints.map((function(e){return e.x-=t.x,e.y-=t.y,e}))})),e}},{key:"getCenter",value:function(e){var t=this.getBoundingBox(e);return{x:(t.x+t.right)/2,y:(t.y+t.bottom)/2}}},{key:"setupOffscreenCanvas",value:function(e){var t=document.createElement("canvas");this.offscreenCtx=t.getContext("2d",{alpha:!0}),t.width=2*e.width,t.height=2*e.height,t.style.width=Math.round(e.width)+"px",t.style.height=Math.round(e.height)+"px",this.addRAFLoop({start:"-100vh",end:"100%",event:"CanvasAnnotation-".concat(this.uuid),onDraw:this.onDraw.bind(this)})}},{key:"onDraw",value:function(){this.editor&&this.editor.onDraw(),this.hasOffscreenCanvasUpdate&&(this.ctx.setTransform(1,0,0,1,.5*this.canvas.width,.5*this.canvas.height),this.ctx.clearRect(-.5*this.canvas.width,-.5*this.canvas.height,this.canvas.width,this.canvas.height),this.editor&&(this.editor.drawGuide(),this.ctx.setTransform(1,0,0,1,.5*this.canvas.width,.5*this.canvas.height)),this.ctx.drawImage(this.offscreenCtx.canvas,-.5*this.canvas.width,-.5*this.canvas.height),this.hasOffscreenCanvasUpdate=!1)}},{key:"continuousPlaybackMode",value:(x=(0,s.default)(r.default.mark((function e(){var t,i,n,s=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.editor.serialize(),(i=JSON.stringify(t))!==this.lastData){e.next=5;break}return requestAnimationFrame((function(){return s.continuousPlaybackMode()})),e.abrupt("return");case 5:return this.lastData=i,n=function(e){return e.stampsThisFrame>e.stampsPerFrame&&(e.stampsThisFrame=0,!0)},e.next=9,this.draw({ctx:this.offscreenCtx,data:t,stopCondition:n});case 9:this.hasOffscreenCanvasUpdate=!0,requestAnimationFrame((function(){return s.continuousPlaybackMode()}));case 11:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"tryToStartPlayback",value:(w=(0,s.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasLoaded&&this.wantsToStartPlayback){e.next=2;break}return e.abrupt("return");case 2:if(!this.config.delay||0===this.config.delay){e.next=5;break}return e.next=5,E(this.config.delay);case 5:this.startPlayback();case 6:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"resetPlayback",value:function(){this.startPlayback(!0)}},{key:"startPlayback",value:(h=(0,s.default)(r.default.mark((function e(){var t,i,n,s,a=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],e.prev=1,i=(i=this.data||this.editor.serialize()).sort((function(e,t){return e.order<t.order?-1:e.order>t.order?1:0})),n=function(e){return e.elapsedTimeThisFrame>e.maxTimePerFrame&&(e.elapsedTimeThisFrame-=e.maxTimePerFrame,!0)},s=this.config.instant?1e3:15,e.next=8,this.draw({ctx:this.ctx,maxTimePerFrame:s,data:i,stopCondition:n,reset:!this.config.instant&&t});case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return h.apply(this,arguments)})},{key:"draw",value:(n=(0,s.default)(r.default.mark((function e(t){var i,n,s,a,o,u,l,c,h,f,m,p,y,g,E,w,x,A,T,S,P,O,C;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.data,this.el.classList.add("is-playing"),t.reset&&(i=[]),(n={ctx:t.ctx,brush:null,brushWidth:0,brushHeight:0,start:0,end:0,leftOverDistance:0,normalizedSpacing:0,scaleStart:0,scaleEnd:0,segmentTimeStart:0,segmentTimeEnd:0,elapsedTimeThisFrame:0,maxTimePerFrame:t.maxTimePerFrame,stampsThisFrame:0,stampsPerFrame:_.StampsPerFrame,stopCondition:t.stopCondition}).ctx.setTransform(1,0,0,1,.5*this.canvas.width,.5*this.canvas.height),n.ctx.clearRect(-.5*this.canvas.width,-.5*this.canvas.height,this.canvas.width,this.canvas.height),n.ctx.globalCompositeOperation="source-over",s=this.config.strokeScale&&this.config.strokeScale[this.breakpoint]?this.config.strokeScale[this.breakpoint]:null,a=0;case 9:if(!(a<i.length)){e.next=63;break}if(null!==(o=i[a]).bezierCurves&&0!==o.bezierCurves.length){e.next=13;break}return e.abrupt("continue",60);case 13:n.brush=b.get(o.settings.brush).getColor(o.settings.color),n.brushWidth=b.get(o.settings.brush).width,n.brushHeight=b.get(o.settings.brush).height,n.normalizedSpacing=o.settings.spacing,n.rotationSpeed=o.settings.rotationSpeed,n.rotateRandomly=o.settings.rotateRandomly,n.currentRotation=o.settings.initialRotation,n.ctx.globalAlpha=o.settings.opacity,n.ctx.globalCompositeOperation=o.settings.blendMode,u=_.CatmullRomSamples,l=o.bezierCurves[0],c=l.points[0],h=s||o.settings.scale,f=l.meta.timeStamp,m=1,p=o.bezierCurves.length;case 28:if(!(m<p)){e.next=58;break}y=o.bezierCurves[m-1],g=y.points[y.points.length-1],E=1;case 32:if(!(E<=u)){e.next=55;break}return w=E/u,x=o.bezierCurves[m],A=y.meta.force*(1-w)+x.meta.force*w,T=o.settings.scale*o.settings.taper.size*A*.95,S=(s||o.settings.scale)+T,P=v.computeT_fromPoints(g.x,g.y,x.points[0].x,x.points[0].y,x.points[1].x,x.points[1].y,x.points[2].x,x.points[2].y,w),n.start=c,n.end=P,n.scaleStart=h,n.scaleEnd=S,n.segmentTimeStart=f,n.segmentTimeEnd=d.lerp(w,y.meta.timeStamp,x.meta.timeStamp),e.next=47,this.lineTo(n);case 47:O=e.sent,n.leftOverDistance=O.distanceLeft,c=P,h=S,f=n.segmentTimeEnd;case 52:E++,e.next=32;break;case 55:m++,e.next=28;break;case 58:return e.next=60,k();case 60:a++,e.next=9;break;case 63:t.reset||(C=new Event("annotation-complete",{bubbles:!0}),this.el.dispatchEvent(C)),this.el.classList.remove("is-playing"),n.ctx.globalAlpha=1,n.ctx.globalCompositeOperation="source-over";case 67:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"lineTo",value:(i=(0,s.default)(r.default.mark((function e(t){var i,n,s,a,o,u,l,c,h,f,m,p,v,y,g,_,b,E,w,x,A,T,S,P,O,C,R,I,F,D,M,L,q,N,G,K,V,U;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.ctx,n=t.brush,s=t.brushWidth,a=t.brushHeight,o=t.start,u=t.end,l=t.leftOverDistance,c=t.normalizedSpacing,h=t.scaleStart,f=t.scaleEnd,m=t.segmentTimeStart,p=t.segmentTimeEnd,v=t.rotateRandomly?(o.x+o.y+u.x+u.y+m)*p*1e3:Math.atan2(o.y-u.y,o.x-u.x),y=v,1!==t.rotationSpeed&&(y=d.lerp(t.rotationSpeed,t.currentRotation,v)),g=s*c,_=o,E=(b=u).x-_.x,w=b.y-_.y,x=Math.sqrt(E*E+w*w),A=0,T=0,x>0&&(A=E*(S=1/x),T=w*S),P=0,O=0,C=l+x,R=Math.round(C/g),I=0,F=(p-m)/R,D=0,M=0,L=m;case 23:if(!(C>=g)){e.next=50;break}if((q=D/R)>1&&(q=1),N=v,1!==t.rotationSpeed&&(N=d.lerp(q,t.currentRotation,y)),M=d.lerp(q,h,f),l>0?(P+=A*(g-l),O+=T*(g-l),l-=g):(P+=A*g,O+=T*g),G=_.x+P,K=_.y+O,t.rotateRandomly&&(L+=o.x,N=L,t.rotateRandomly&&(G+=L%1*M*2,K+=L%1*M*2)),V=G,U=K,i.translate(V,U),i.rotate(N),i.drawImage(n,.5*-s*M,.5*-a*M,s*M,a*M),i.rotate(-N),i.translate(-V,-U),C-=g,I+=g,t.stampsThisFrame++,t.elapsedTimeThisFrame+=F,D++,void 0===t.stopCondition||!t.stopCondition(t)){e.next=48;break}return e.next=48,k(1);case 48:e.next=23;break;case 50:return t.currentRotation=y,e.abrupt("return",{distanceLeft:C,distanceTraveled:I});case 52:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("dynamic-annotations")}}]),t}(h);t.exports=w},{106:106,130:130,131:131,132:132,133:133,134:134,135:135,136:136,16:16,17:17,19:19,2:2,21:21,22:22,23:23,26:26,32:32,59:59,93:93,97:97}],129:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=function(){function e(t){(0,r.default)(this,e),this.brush="GelPen-10",this.spacing=.05,this.initialRotation=0,this.rotationSpeed=.25,this.rotateRandomly=!1,this.opacity=1,this.scale=1,this.color="#000000",this.taper={size:0,opacity:.5},this.blendMode="normal"}return(0,s.default)(e,[{key:"set",value:function(e){this.brush=void 0===e.brush?this.brush:e.brush,this.opacity=void 0===e.opacity?this.opacity:e.opacity,this.initialRotation=void 0===e.initialRotation?this.initialRotation:e.initialRotation,this.rotationSpeed=void 0===e.rotationSpeed?this.rotationSpeed:e.rotationSpeed,this.rotateRandomly=void 0===e.rotateRandomly?this.rotateRandomly:e.rotateRandomly,this.blendMode=void 0===e.blendMode?this.blendMode:e.blendMode,this.spacing=void 0===e.spacing?this.spacing:e.spacing,this.scale=void 0===e.scale?this.scale:e.scale,this.color=void 0===e.color?this.color:e.color,this.taper.opacity=e.taper&&void 0!==e.taper.opacity?e.taper.opacity:this.taper.opacity,this.taper.size=e.taper&&void 0!==e.taper.size?e.taper.size:this.taper.size}},{key:"serialize",value:function(){return{brush:this.brush,opacity:this.opacity,initialRotation:this.initialRotation,rotationSpeed:this.rotationSpeed,rotateRandomly:this.rotateRandomly,blendMode:this.blendMode,spacing:this.spacing,color:this.color,scale:this.scale,taper:this.taper}}}]),e}();t.exports=a},{17:17,19:19,23:23}],130:[function(e,t,i){"use strict";t.exports={computeT_fromPoints:function(e,t,i,n,r,s,a,o,u){return{x:(1-u)*(1-u)*(1-u)*e+3*(1-u)*(1-u)*u*i+3*(1-u)*u*u*r+u*u*u*a,y:(1-u)*(1-u)*(1-u)*t+3*(1-u)*(1-u)*u*n+3*(1-u)*u*u*s+u*u*u*o}}}},{}],131:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(12).EventEmitterMicro,c=e(127),h=e(133),d=function(e){function t(){var e;return(0,r.default)(this,t),(e=(0,a.default)(this,(0,o.default)(t).call(this))).hasLoaded=!1,e.sources=["BrokenBrush-32","BrokenBrush-64","color-pencil-16","GelPen-6","GelPen-10","GelPen-15","GelPen-12","GelPen-20","Highlighter-16","Highlighter-32","Highlighter-64","Highlighter-96","Highlighter-128"],e.brushCount=e.sources.length,e.brushes={},e}return(0,u.default)(t,e),(0,s.default)(t,[{key:"load",value:function(){var e=this;requestAnimationFrame((function(){e.sources.forEach((function(t){var i=t.split(".")[0],n=h.BasePath+"brushes/"+t+".png",r=new c(i,n);r.on("load",(function(){e.brushes[i]=r,Object.keys(e.brushes).length===e.brushCount&&e.onBrushesLoaded()}))})),e.sources=[]}))}},{key:"onBrushesLoaded",value:function(){this.trigger("brushesloaded")}},{key:"get",value:function(e){return this.brushes[e]}}]),t}(l);t.exports=new d},{12:12,127:127,133:133,17:17,19:19,21:21,22:22,23:23,26:26}],132:[function(e,t,i){"use strict";t.exports={getPoints:function(e){var t=e.length;if(t<3)return[{points:e,meta:e[0]}];for(var i=e[0],n=e[0],r=e[1],s=e[2],a=[{points:[e[0]],meta:n}],o=1;o<t;o++){var u=[{x:(-i.x+6*n.x+r.x)/6,y:(-i.y+6*n.y+r.y)/6},{x:(n.x+6*r.x-s.x)/6,y:(n.y+6*r.y-s.y)/6},{x:r.x,y:r.y}];a.push({points:u,meta:r}),i=n,n=r,r=s,s=e[o+2]||s}return a},getCurves:function(e){var t=[];if(1===e.length)return t;for(var i=0,n=e.length;i<n;i++){var r=e[i],s=r.points,a=s.length,o={meta:r.meta,points:[]};0===i?o.points.push({x:s[0].x,y:s[0].y}):a>2?(o.points.push({x:s[0].x,y:s[0].y}),o.points.push({x:s[1].x,y:s[1].y}),o.points.push({x:s[2].x,y:s[2].y})):(o.points.push({x:s[0].x,y:s[0].y}),o.points.push({x:s[1].x,y:s[1].y})),t.push(o)}return t}}},{}],133:[function(e,t,i){"use strict";t.exports={CatmullRomSamples:15,ConfigAttribute:"data-annotation-config",DynamicAnnotationShowFallback:"dynamic-annotation-hidden",StampsPerFrame:100,BasePath:"scribbles/"}},{}],134:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=function(){function e(){(0,r.default)(this,e),this.x=0,this.y=0,this.width=0,this.height=0}return(0,s.default)(e,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"fromRect",value:function(t){var i=new e;return i.x=t.x,i.y=t.y,i.width=t.width,i.height=t.height,i}},{key:"containsPoint",value:function(e,t){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}},{key:"calculateBoundingBoxOfPoints",value:function(t,i){if(t.length<2)return e.fromRect({x:0,y:0,width:1,height:1});var n=1e4,r=-1e4,s=1e4,a=-1e4;return t.forEach((function(e){e.x<n&&(n=e.x),e.x>r&&(r=e.x),e.y<s&&(s=e.y),e.y>a&&(a=e.y)})),e.fromRect({x:n-.5*i,y:s-.5*i,width:r-n+i,height:a-s+i})}},{key:"calculateBoundingBoxOfRects",value:function(t,i){var n=1e4,r=-1e4,s=1e4,a=-1e4;return t.forEach((function(e){e.x<n&&(n=e.x),e.x+e.width>r&&(r=e.x+e.width),e.y<s&&(s=e.y),e.y+e.height>a&&(a=e.y+e.height)})),e.fromRect({x:n-.5*i,y:s-.5*i,width:r-n+i,height:a-s+i})}}]),e}();t.exports=a},{17:17,19:19,23:23}],135:[function(e,t,i){"use strict";var n=e(23),r=n(e(32)),s=n(e(16));t.exports=(0,s.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){requestAnimationFrame(e)})));case 1:case"end":return e.stop()}}),e)})))},{16:16,23:23,32:32}],136:[function(e,t,i){"use strict";var n=e(23),r=n(e(32)),s=n(e(16));t.exports=function(){var e=(0,s.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout((function(){return e()}),1e3*t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{16:16,23:23,32:32}],137:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(96),c=e(153),h=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).cancelAnimationRequest=null,i.gridItemClass=".grid-item-".concat(i.el.getAttribute("data-anim-scroll-group")),i.animationDuration=1.4,i.timeGroup=i.anim.createTimeGroup(),i.scrollGroup=i.anim.getGroupForTarget(i.el),i.svgContainer=i.el.querySelector(".charging-station-pins"),i.svg=i.svgContainer.querySelector("svg"),i.line=i.svg.querySelector("#line path"),i.pins={startPinOuter:{el:i.svg.querySelectorAll("#dots path")[0],s:0,d:.83,e:"cubic-bezier(.66, 0, .01, 1)"},startPinInner0:{el:i.svg.querySelectorAll("#dots path")[1],s:.16,d:.76,e:"cubic-bezier(.66, 0, .01, 1)"},startPinInner1:{el:i.svg.querySelectorAll("#dots path")[2],s:.33,d:.67,e:"cubic-bezier(.66, 0, .01, 1)"},pin0:{el:i.svg.querySelector("#ev1"),s:.8,d:.64,e:"cubic-bezier(.66, 0, .03, 1.31)"},pin1:{el:i.svg.querySelector("#ev2"),s:.95,d:.64,e:"cubic-bezier(.66, 0, .03, 1.31)"},pin2:{el:i.svg.querySelector("#ev3"),s:1.1,d:.64,e:"cubic-bezier(.66, 0, .03, 1.31)"},endPin:{el:i.svg.querySelector("#star"),s:.7,d:.64,e:"cubic-bezier(.66, 0, .03, 1.31)"}},i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){this._setupEvents(),this._setupTimelineKeyframes()}},{key:"_setupEvents",value:function(){var e=this,t=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.play),i=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.reset);t.controller.on("play:enter",(function(){e._playTileAnimation()})),i.controller.on("reset:exit",(function(){e._resetTileAnimation()}))}},{key:"_setupTimelineKeyframes",value:function(){for(var e in this._addLineKeyframes(),this.pins){var t=this.pins[e].el.getBBox(),i=t.x+.5*t.width,n=t.y+(e.indexOf("startPin")>-1?.5*t.height:t.height);this.pins[e].el.style.transformOrigin="".concat(this._round(i,2),"px ").concat(this._round(n,2),"px"),this._addPinsKeyframes(e,this.pins[e])}}},{key:"_playTileAnimation",value:function(){var e=this,t=l.director.requestAnimationStart({element:this.el,duration:this.animationDuration});t.then((function(){e.timeGroup.play()})),this.cancelAnimationRequest=t.cancel}},{key:"_resetTileAnimation",value:function(){this.cancelAnimationRequest&&(this.cancelAnimationRequest(),this.cancelAnimationRequest=null),this.timeGroup.restart(),this.timeGroup.pause()}},{key:"_addLineKeyframes",value:function(){var e=this,t=this.line.getTotalLength()+1,i=this.timeGroup.addKeyframe(this.line,{start:.55,end:1.46,easeFunction:"cubic-bezier(.66, 0, .01, 1)",strokeDashoffset:[t,0]});this.line.style.strokeDasharray=t,this.line.style.strokeDashoffset=t,i.controller.on("draw",(function(t){e.line.style.strokeDashoffset=t.tweenProps.strokeDashoffset.current}))}},{key:"_addPinsKeyframes",value:function(e,t){"pin0"===e?(this.timeGroup.addKeyframe(t.el,{start:t.s,end:t.s+t.d,scale:[0,.5],easeFunction:t.e}),this.timeGroup.addKeyframe(t.el,{start:t.s+2*t.d,end:t.s+3*t.d,scale:[.5,1],easeFunction:t.e})):this.timeGroup.addKeyframe(t.el,{start:t.s,end:t.s+t.d,scale:[0,1],easeFunction:t.e})}},{key:"_round",value:function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}}],[{key:"IS_SUPPORTED",value:function(){var e=document.documentElement;return!e.classList.contains("aow")&&!e.classList.contains("reduced-motion")}}]),t}(e(93));t.exports=h},{153:153,17:17,19:19,21:21,22:22,23:23,26:26,93:93,96:96}],138:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(96),c=e(153),h=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).cancelAnimationRequest=null,i.gridItemClass=".grid-item-".concat(i.el.getAttribute("data-anim-scroll-group")),i.animationDuration=1,i.timeGroup=i.anim.createTimeGroup(),i.timeGroup.name="Circle Handler",i.scrollGroup=i.anim.getGroupForTarget(i.el),i.highlight=i.el.querySelector(".highlight"),i.circle=i.el.querySelector(".annotation-circle"),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){this._setupEvents(),this._setupTimelineKeyframes(),this._addEventListeners()}},{key:"_setupEvents",value:function(){var e=this;this.annotation=this.gum.getComponentOfType("CanvasAnnotation",this.el);var t=this.anim.addKeyframe(this.el,c.scribbleTileTriggerKeyframeOptions.play),i=this.anim.addKeyframe(this.el,c.scribbleTileTriggerKeyframeOptions.reset);t.controller.on("play:enter",(function(){e._playTileAnimation()})),i.controller.on("reset:exit",(function(){e._resetTileAnimation()}))}},{key:"_setupTimelineKeyframes",value:function(){this.timeGroup.addKeyframe(this.circle,{start:.5,end:.6,scale:[null,.95],toggle:!0}),this.timeGroup.addKeyframe(this.circle,{start:.6,end:.7,opacity:[null,0]}),this.timeGroup.addKeyframe(this.highlight,{start:.7,cssClass:"highlighted",toggle:!0})}},{key:"_playTileAnimation",value:function(){var e=this,t=l.director.requestAnimationStart({element:this.el,duration:this.animationDuration});t.then((function(){e.annotation.el.classList.contains("is-playing")||e.highlight.classList.contains("highlighted")||e.annotation.startPlayback()})),this.cancelAnimationRequest=t.cancel}},{key:"_resetTileAnimation",value:function(){this.cancelAnimationRequest&&(this.cancelAnimationRequest(),this.cancelAnimationRequest=null),this.timeGroup.restart(),this.timeGroup.pause(),this.annotation.resetPlayback()}},{key:"_addEventListeners",value:function(){var e=this;this.annotation.el.addEventListener("annotation-complete",(function(){e.timeGroup.play(0)}))}}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("dynamic-annotations")}}]),t}(e(93));t.exports=h},{153:153,17:17,19:19,21:21,22:22,23:23,26:26,93:93,96:96}],139:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(96),c=e(153),h=n(e(84)),d=e(93),f=e(146),m={viewport:"large"},p=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).cancelAnimationRequest=null,i.gridItemClass=".grid-item-".concat(i.el.getAttribute("data-anim-scroll-group")),i.animationDuration=4.5,i.timeGroup=i.anim.createTimeGroup(),i.timeGroup.name="City-Level Location",i.scrollGroup=i.anim.getGroupForTarget(i.el),i.videoContainer=i.el.querySelector(".inline-video-media"),i.tileContainer=i.el.querySelector(".grid-item-content"),i.pinRipple=i.el.querySelector(".pin-ripple"),i.pinWhiteBorder=i.el.querySelector(".pin-border"),i.mapRipple=i.el.querySelector(".city-map-ripple"),i.pin=i.el.querySelector(".pin"),i.pinMask=i.el.querySelector(".map-mask"),i.rippleBorder=12,i.cubicBezier="cubic-bezier(.66,0,.01,1)",i.maxWidth="366px - ".concat(2*i.rippleBorder,"px"),i.scaledWidth="(a0w - (css(--tile-header-padding) *2) - ".concat(2*i.rippleBorder,"px)"),i.roundedWidth="2 * floor(".concat(i.scaledWidth," / 2)"),i.Expression="min(".concat(i.maxWidth,", ").concat(i.roundedWidth,")"),i.inlineVideoContainer=i.el.querySelector(".inline-video"),i.inlineVideo=new f(i.inlineVideoContainer,m),i.inlineVideo.restartVideoOnBreakPoint=!1,i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){this._addFallbackListeners(),this._loadInlineVideo(),this._setWidths(),this._setupEvents(),this._setupTimelineKeyframes()}},{key:"_addFallbackListeners",value:function(){var e=this;addEventListener("gestureend",(function(t){t.scale>1&&e._setStaticFallback()}))}},{key:"_setStaticFallback",value:function(){this.el.classList.contains("static")||this.el.classList.add("static")}},{key:"_loadInlineVideo",value:function(){var e=this;this.scrollGroup.addKeyframe(this.el,{start:"t - 200vh",end:"b + 200vh",event:"load-inline-video"}),this.anim.getControllerForTarget(this.el).on("load-inline-video:enter",(function(t){e.inlineVideo.load()}))}},{key:"_setWidths",value:function(){var e=h.default.parse("".concat(this.Expression),{target:this.el,anchors:[this.el]});this.el.style.setProperty("--maxDimensions","".concat(e,"px"))}},{key:"_setupEvents",value:function(){var e=this,t=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.play),i=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.reset);t.controller.on("play:enter",(function(){e._playTileAnimation()})),i.controller.on("reset:exit",(function(){e._resetTileAnimation()}))}},{key:"_setupTimelineKeyframes",value:function(){var e=this;this.timeGroup.addKeyframe(this.el,{progress:[0,1],start:0,end:4.5}),this.timeGroup.addKeyframe(this.pinRipple,{scale:[0,1],x:[null,"-50%"],y:[null,"-50%"],easeFunction:this.cubicBezier,start:0,end:.83}),this.timeGroup.addKeyframe(this.pinRipple,{scale:[null,0],easeFunction:"cubic-bezier(.99,0,.33,1)",start:1.5,end:2}),this.timeGroup.addKeyframe(this.pinWhiteBorder,{scale:[0,1],x:[null,"-50%"],y:[null,"-50%"],easeFunction:this.cubicBezier,start:.16,end:.92}),this.timeGroup.addKeyframe(this.pinWhiteBorder,{opacity:[null,0],start:1.8,end:1.81}),[this.pin,this.pinMask].map((function(t){e.timeGroup.addKeyframe(t,{scale:[0,"22px / ".concat(e.Expression)],x:["-1px * ".concat(e.Expression," / 2"),"-1px * ".concat(e.Expression," / 2")],y:["-1px * ".concat(e.Expression," / 2"),"-1px * ".concat(e.Expression," / 2")],easeFunction:e.cubicBezier,anchors:[e.el],start:.33,end:1}),e.timeGroup.addKeyframe(t,{scale:[null,1],easeFunction:e.cubicBezier,start:1.5,end:3.5})})),this.mapRippleBorder=this.timeGroup.addKeyframe(this.mapRipple,{scale:["150px / ".concat(this.Expression),1],x:["-1px * ".concat(this.Expression," / 2"),"-1px * ".concat(this.Expression," / 2 - ").concat(this.rippleBorder,"px")],y:["-1px * ".concat(this.Expression," / 2"),"-1px * ".concat(this.Expression," / 2 - ").concat(this.rippleBorder,"px")],rippleBorder:["0",this.rippleBorder],easeFunction:this.cubicBezier,anchors:[this.el],start:1.5,end:3.5}),this.mapRippleBorder.controller.on("draw",(function(t){var i=t.tweenProps.rippleBorder.current;e.el.style.setProperty("--mapRippleBorder","".concat(i,"px"))})),this.timeGroup.addKeyframe(this.el,{rgbAlpha:[1,0],easeFunction:"linear",start:1.5,end:3.5}).controller.on("draw",(function(t){var i=t.tweenProps.rgbAlpha.current;e.el.style.setProperty("--pinOpacity",i)})),this.timeGroup.addKeyframe(this.el,{start:1.5,event:"playVideo"}).controller.on("playVideo",(function(t){e.inlineVideo.play()}))}},{key:"_playTileAnimation",value:function(){var e=this,t=l.director.requestAnimationStart({element:this.el,duration:this.animationDuration});t.then((function(){e.timeGroup.play()})),this.cancelAnimationRequest=t.cancel}},{key:"_resetTileAnimation",value:function(){this.cancelAnimationRequest&&(this.cancelAnimationRequest(),this.cancelAnimationRequest=null),this.timeGroup.restart(),this.timeGroup.pause(),this.inlineVideo.reset()}},{key:"onResizeDebounced",value:function(e){this._setWidths()}},{key:"onBreakpointChange",value:function(e){this._setStaticFallback()}}],[{key:"IS_SUPPORTED",value:function(){var e=document.documentElement;return!e.classList.contains("edge")&&(!e.classList.contains("aow")&&!e.classList.contains("reduced-motion"))}}]),t}(d);t.exports=p},{146:146,153:153,17:17,19:19,21:21,22:22,23:23,26:26,84:84,93:93,96:96}],140:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=function(e){function t(e){return(0,r.default)(this,t),(0,a.default)(this,(0,o.default)(t).call(this,e))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){var e=this,i=document.querySelector(".notification");t.IS_SUPPORTED()&&(i.style.transform="translate3d(0px, -100px, 0px)"),this.anim.addKeyframe(this.el,{start:"a0t - 110vh",end:"a0b + 10vh",event:"reset-animation",anchors:[".animated-device"]}).controller.on("reset-animation:exit",(function(){e.el.classList.remove("show")}));var n=this.anim.addKeyframe(this.el,{start:"a0t + 85h - 95vh",event:"play-animation",anchors:[".animated-device"]}),r=this.anim.addKeyframe(this.el,{start:"a0t - 10h",event:"play-animation",anchors:[".animated-device"]});n.controller.on("play-animation",(function(){e.el.classList.add("show")})),r.controller.on("play-animation:reverse",(function(){e.el.classList.add("show")}))}}],[{key:"IS_SUPPORTED",value:function(){var e=document.documentElement;return!e.classList.contains("aow")&&!e.classList.contains("reduced-motion")}}]),t}(e(93));t.exports=l},{17:17,19:19,21:21,22:22,23:23,26:26,93:93}],141:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(93),c=e(97),h=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).breakpoint=e.pageMetrics.breakpoint,i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){this.config=c({element:this.el,attribute:"data-fixed-width-config"}),this.resize(this.getCSSBreakpoint()||this.breakpoint)}},{key:"resize",value:function(e){var t=this.config[e]||null;this.el.style.maxWidth=t||""}},{key:"getCSSBreakpoint",value:function(){return window.getComputedStyle(this.el).getPropertyValue("--breakpoint").replace(/[\s"]/g,"")}},{key:"onResizeDebounced",value:function(e){this.breakpoint=this.getCSSBreakpoint()||e.breakpoint,this.breakpoint!==this.previousBP&&(this.previousBP=this.breakpoint,this.resize(this.breakpoint))}}],[{key:"IS_SUPPORTED",value:function(){return!0}}]),t}(l);t.exports=h},{17:17,19:19,21:21,22:22,23:23,26:26,93:93,97:97}],142:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(96),c=e(153),h=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).cancelAnimationRequest=null,i.gridItemClass=".grid-item-".concat(i.el.getAttribute("data-anim-scroll-group")),i.animationDuration=1.5,i.timeGroup=i.anim.createTimeGroup(),i.timeGroup.name="Handwriting Handler",i.scrollGroup=i.anim.getGroupForTarget(i.el),i.convert=i.el.querySelector(".convert"),i.input=i.el.querySelector(".annotation-input"),i.convert.classList.add("typography-blockquote-copy"),i.convert.setAttribute("aria-hidden",!0),i.input.appendChild(i.convert),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){this._setupEvents(),this._setupTimelineKeyframes(),this._addEventListeners()}},{key:"_setupEvents",value:function(){var e=this;this.annotation=this.gum.getComponentOfType("CanvasAnnotation",this.el);var t=this.anim.addKeyframe(this.el,c.scribbleTileTriggerKeyframeOptions.play),i=this.anim.addKeyframe(this.el,c.scribbleTileTriggerKeyframeOptions.reset);t.controller.on("play:enter",(function(){e._playTileAnimation()})),i.controller.on("reset:exit",(function(){e._resetTileAnimation()}))}},{key:"_setupTimelineKeyframes",value:function(){this.timeGroup.addKeyframe(this.el,{start:.6,cssClass:"converted",toggle:!0})}},{key:"_playTileAnimation",value:function(){var e=this,t=l.director.requestAnimationStart({element:this.el,duration:this.animationDuration});t.then((function(){e.annotation.el.classList.contains("is-playing")||e.el.classList.contains("converted")||e.annotation.startPlayback()})),this.cancelAnimationRequest=t.cancel}},{key:"_resetTileAnimation",value:function(){this.timeGroup.restart(),this.timeGroup.pause(),this.annotation.resetPlayback()}},{key:"_addEventListeners",value:function(){var e=this;this.annotation.el.addEventListener("annotation-complete",(function(){e.timeGroup.play(0)}))}}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("dynamic-annotations")}}]),t}(e(93));t.exports=h},{153:153,17:17,19:19,21:21,22:22,23:23,26:26,93:93,96:96}],143:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(93),c=e(70),h=e(42),d=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).options=e,i.heroLogoContainer=i.el.querySelector(".hero-logo-container"),i.heroLogo=i.el.querySelector(".hero-logo"),i.heroDeviceGrid=i.el.querySelector(".hero-device-grid"),i.devicesOuter=i.el.querySelectorAll(".hero-grid-item-outer"),i.deviceElements=[i.el.querySelector(".hero-hardware-1"),i.el.querySelector(".hero-hardware-2"),i.el.querySelector(".hero-hardware-2"),i.el.querySelector(".hero-hardware-3"),i.el.querySelector(".hero-hardware-4"),i.el.querySelector(".hero-hardware-5"),i.el.querySelector(".hero-hardware-6"),i.el.querySelector(".hero-hardware-7"),i.el.querySelector(".hero-hardware-8"),i.el.querySelector(".hero-hardware-9"),i.el.querySelector(".hero-hardware-10")],i.outerDeviceElements=[i.el.querySelector(".hero-hardware-topleft"),i.el.querySelector(".hero-hardware-topright"),i.el.querySelector(".hero-hardware-middleleft"),i.el.querySelector(".hero-hardware-middleright"),i.el.querySelector(".hero-hardware-bottomleft"),i.el.querySelector(".hero-hardware-bottomright")],i.deviceTopRowSmallElements=[i.el.querySelector(".hero-hardware-toprow-small-1"),i.el.querySelector(".hero-hardware-toprow-small-2"),i.el.querySelector(".hero-hardware-toprow-small-3")],i.startDelay=0,i.cubicBezier="easeOutQuint",i.easingCopy="cubic-bezier(0, 1, 1, 1)",i.introContainer=i.el.querySelector(".hero-intro-container"),i.introEyebrow=i.el.querySelector(".intro-eyebrow"),i.introHeadline=i.el.querySelector(".intro-headline"),i.introCopy=i.el.querySelector(".intro-copy"),i.introViolator=i.el.querySelector(".intro-violator")||null,i.introCta=i.el.querySelector(".intro-cta")||null,i.copyElements=[i.introEyebrow,i.introHeadline,i.introCopy,i.introViolator,i.introCta],i.copyAnimStart=.1,i.copyAnimIncrement=.2,i.copyAnimEnd=i.copyAnimStart+i.copyElements.length*i.copyAnimIncrement,i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){this.isOuterDevicesVisible="block"===window.getComputedStyle(this.devicesOuter[0]).display,this.isInitialViewportSmall="S"===this.pageMetrics.breakpoint,this._initializeTransitionToGrid(),this._initializeScrollTransition(),this._initializeCopyAnimation(),this._loadImages()}},{key:"_loadImages",value:function(){var e=this;this._setImagesQueue(),this.heroImgLoader=new h({container:this.el}),this.heroImgLoader.on("complete",(function(){e._imagesLoadComplete()})),this.heroImgLoader.load({imageAnimate:!1})}},{key:"_setImagesQueue",value:function(){this.isOuterDevicesVisible||this.outerDeviceElements.forEach((function(e){e.querySelector(".hardware").removeAttribute("data-progressive-image"),e.querySelector(".screen").removeAttribute("data-progressive-image")})),this.isInitialViewportSmall||this.deviceTopRowSmallElements.forEach((function(e){e.querySelector(".hardware").removeAttribute("data-progressive-image"),e.querySelector(".screen").removeAttribute("data-progressive-image")}))}},{key:"_imagesLoadComplete",value:function(){this.introTimeline.play()}},{key:"_initializeTransitionToGrid",value:function(){var e=this;this.introTimeline=c.createTimeGroup(),this.introTimeline.name="Hero Intro",this.introTimeline.addKeyframe(this.heroLogo,{start:0+this.startDelay,end:1.2+this.startDelay,scale:["css(--hero-logo-scale-start)",1],easeFunction:this.cubicBezier}),this.deviceGridStart=.1+this.startDelay,this.deviceGridEnd=1.3+this.startDelay,this.introTimeline.addKeyframe(this.heroDeviceGrid,{start:this.deviceGridStart,end:.2,opacity:[0,1],easeFunction:"linear"}),this.isOuterDevicesVisible&&(this.deviceElements=this.deviceElements.concat(this.outerDeviceElements)),this.isInitialViewportSmall&&(this.deviceElements=this.deviceElements.concat(this.deviceTopRowSmallElements)),this.deviceElements.forEach((function(t){e.introTimeline.addKeyframe(t,{start:e.deviceGridStart,end:e.deviceGridEnd,x:["css(--device-x)","0px"],y:["css(--device-y)","0px"],scale:["css(--hero-device-scale-start)",1],easeFunction:e.cubicBezier})}))}},{key:"_initializeScrollTransition",value:function(){this.scrollGroup=c.createScrollGroup(this.el),this.scrollGroup.group="Hero Transition Out",this.scrollGroup.addKeyframe(this.heroLogoContainer,{start:"a0t",end:"a0t + 100vh",y:["0px","25px"],easeFunction:this.easingCopy,anchors:[this.el]})}},{key:"_initializeCopyAnimation",value:function(){var e=this;this.addDiscreteEvent({start:"a0t - 90vh",onEvent:function(){e.copyTimeline.play()},onEventReverse:function(){e.copyTimeline.reverse()},breakpointMask:"MLX",anchors:[this.introContainer]}),this.addDiscreteEvent({start:"a0t - 80vh",onEvent:function(){e.copyTimeline.play()},onEventReverse:function(){e.copyTimeline.reverse()},breakpointMask:"S",anchors:[this.introContainer]}),this.copyTimeline=c.createTimeGroup(),this.copyTimeline.name="Hero Copy",this.copyElements.forEach((function(t,i){null!==t&&e.copyTimeline.addKeyframe(t,{start:e.copyAnimStart+e.copyAnimIncrement*i,end:e.copyAnimEnd,opacity:[0,1],y:["100px",0],easeFunction:e.easingCopy})}))}}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("hero-enhanced")}}]),t}(l);t.exports=d},{17:17,19:19,21:21,22:22,23:23,26:26,42:42,70:70,93:93}],144:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).triggers=i.el.querySelectorAll(".modal-toggle"),i.labels=i.el.querySelectorAll(".modal-cta"),i.btns=i.el.querySelectorAll(".modal-cta-text"),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){var e=this;this.triggers.forEach((function(t,i){var n=t.getAttribute("data-analytics-click"),r=t.nextElementSibling.querySelector(".modal-content");t.addEventListener("change",(function(s){t.checked?(e.btns[i].setAttribute("aria-expanded",!0),t.parentElement.classList.add("expanded"),t.removeAttribute("data-analytics-click"),r.setAttribute("aria-hidden",!1)):(e.btns[i].setAttribute("aria-expanded",!1),t.parentElement.classList.remove("expanded"),t.setAttribute("data-analytics-click",n),r.setAttribute("aria-hidden",!0))})),e.labels[i].addEventListener("keypress",(function(e){13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),t.checked=!t.checked,t.dispatchEvent(new Event("change")))}))}))}}],[{key:"IS_SUPPORTED",value:function(){return!0}}]),t}(n(e(93)).default);t.exports=l},{17:17,19:19,21:21,22:22,23:23,26:26,93:93}],145:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(96),c=e(153),h=e(93),d=e(146),f=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).cancelAnimationRequest=null,i.gridItemClass=".grid-item-".concat(i.el.getAttribute("data-anim-scroll-group")),i.animationDuration=5,i.timeGroup=i.anim.createTimeGroup(),i.scrollGroup=i.anim.getGroupForTarget(i.el),i.inlineVideoContainer=i.el.querySelector(".inline-video"),i.inlineVideo=new d(i.inlineVideoContainer),i.prefersReducedMotion=document.documentElement.classList.contains("reduced-motion"),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){this._loadInlineVideo(),this.prefersReducedMotion||(this._setupEvents(),this._setupTimelineKeyframes())}},{key:"_setupEvents",value:function(){var e=this,t=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.play),i=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.reset);t.controller.on("play:enter",(function(){e._playTileAnimation()})),i.controller.on("reset:exit",(function(){e._resetTileAnimation()}))}},{key:"_setupTimelineKeyframes",value:function(){var e=this;this.timeGroup.addKeyframe(this.inlineVideo,{start:.1,event:"play-inline-video",disabledWhen:"reduced-motion"}).controller.on("play-inline-video",(function(){e.inlineVideo.play()}))}},{key:"_playTileAnimation",value:function(){var e=this,t=l.director.requestAnimationStart({element:this.el,duration:this.animationDuration});t.then((function(){e.inlineVideo.play()})),this.cancelAnimationRequest=t.cancel}},{key:"_resetTileAnimation",value:function(){this.cancelAnimationRequest&&(this.cancelAnimationRequest.cancel(),this.cancelAnimationRequest=null),this.inlineVideo.reset()}},{key:"_loadInlineVideo",value:function(){var e=this;!this.inlineVideo.video.controls.arePresent&&this.prefersReducedMotion||(this.scrollGroup.addKeyframe(this.el,{start:"t - 200vh",end:"b + 200vh",event:"load-inline-video"}),this.anim.getControllerForTarget(this.el).on("load-inline-video:enter",(function(t){e.inlineVideo.load().then((function(){e.animationDuration=e.inlineVideo.video.normalizedDuration}))})))}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.classList.contains("no-inline-video")}}]),t}(h);t.exports=f},{146:146,153:153,17:17,19:19,21:21,22:22,23:23,26:26,93:93,96:96}],146:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=e(107),o=e(103),u=e(70),l=new a,c="X"===l.viewport||"L"===l.viewport?"L":l.viewport,h={path:"/ipados/ipados-preview/2020/bf6605be-c470-483f-8acd-015e1ba2a638/",viewport:o.convertViewportName(c),resolution:o.convertToResolution(l.retina)},d=function(){function e(t,i){var n=this;(0,r.default)(this,e),this.overrides=i,this.video=this._initInlineVideo(t),this.restartVideoOnBreakPoint=!0,l.on("change:viewport",(function(){c="X"===l.viewport||"L"===l.viewport?"L":l.viewport,n._onBreakpointChange()})),l.on("change:retina",(function(){n._onBreakpointChange()}))}return(0,s.default)(e,[{key:"_initInlineVideo",value:function(e){var t,i=h;return this.overrides&&(i=Object.assign({},h,this.overrides)),(t=new o(e,i)).initialize(),t.controls.arePresent&&this._setupControls(t),t}},{key:"_load",value:function(){return this.video.load()}},{key:"_play",value:function(){var e=this;return this.video.load().then((function(){e.video.frames.deactivateAll().then(e.video.play())}))}},{key:"_pause",value:function(){return this.video.pause()}},{key:"_reset",value:function(){var e=this;return this.video.reset().then((function(){e.video.frames.activate("start"),e.video.frames.deactivate("end"),e.video.controls.arePresent&&(e.video.controls.disableAll(),e.video.hasPlayed?e.video.controls.enable("replay"):e.video.controls.enable("play"))}))}},{key:"_setupControls",value:function(e){var t,i,n,r=e._container.querySelector(".focus-item"),s=e._container.querySelector(".control-button"),a=e._container.querySelector(".control-button .visuallyhidden span"),o=e.controls._container;function l(){c(),n=setTimeout((function(){a.innerText=o.querySelector("button:not([disabled])").innerText}),250),document.activeElement!==s&&document.activeElement!==r||(t=setTimeout((function(){o.querySelector("button:not([disabled])").focus()}),300),i=setTimeout((function(){s.focus()}),350))}function c(){clearTimeout(t),clearTimeout(i),clearTimeout(n)}e.controls.allElements.forEach((function(e){e.setAttribute("tabindex","-1"),e.setAttribute("aria-hidden","true"),e.addEventListener("click",(function(){setTimeout((function(){r.focus()}),250)}))})),s.addEventListener("click",(function(){o.querySelector("button:not([disabled])").click()})),u.addKeyframe(s,{start:"b - 100vh",end:"b",event:"control-events"}),u.getControllerForTarget(s).on("control-events:enter",(function(){e.el.addEventListener("pause",l),e.el.addEventListener("playing",l),e.el.addEventListener("ended",l)})),u.getControllerForTarget(s).on("control-events:exit",(function(){c(),e.el.removeEventListener("pause",l),e.el.removeEventListener("playing",l),e.el.removeEventListener("ended",l),setTimeout((function(){a.innerText=o.querySelector("button:not([disabled])").innerText}),350)}))}},{key:"_onBreakpointChange",value:function(){var e=this,t=c,i=this._shouldReloadResolution(),n={};n.viewport=o.convertViewportName(t),i&&(n.resolution=o.convertToResolution(l.retina)),this.overrides&&(n=Object.assign({},n,this.overrides)),this.video.change(n),this.video.controls.arePresent&&(this.video.controls.disableAll(),this.video.hasPlayed?this.video.controls.enable("replay"):this.video.controls.enable("play")),this.restartVideoOnBreakPoint?this.video.frames.deactivateAll().then((function(){e.video.frames.activate("start").then((function(){e.video.load().then((function(){e.video.frames.deactivate("start")}))}))})):this.video.hasPlayed&&this.video.frames.activate("end")}},{key:"_shouldReloadResolution",value:function(){return o.convertToResolution(l.retina)!==this.video.resolution}},{key:"load",get:function(){return this._load}},{key:"play",get:function(){return this._play}},{key:"pause",get:function(){return this._pause}},{key:"reset",get:function(){return this._reset}},{key:"duration",get:function(){return this.video.normalizedDuration}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.classList.contains("no-inline-video")}}]),e}();t.exports=d},{103:103,107:107,17:17,19:19,23:23,70:70}],147:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(96),c=e(153),h=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).cancelAnimationRequest=null,i.gridItemClass=".grid-item-".concat(i.el.getAttribute("data-anim-scroll-group")),i.animationDuration=1.1,i.timeGroup=i.anim.createTimeGroup(),i.scrollGroup=i.anim.getGroupForTarget(i.el),i.password=i.el.querySelector(".password"),i.replacementChar="",i.startColor=i.hexToRGB(window.getComputedStyle(i.password).getPropertyValue("--startColor").replace(/\s/g,"")),i.endColor=i.hexToRGB(window.getComputedStyle(i.password).getPropertyValue("--endColor").replace(/\s/g,"")),i.stringAnimationFrames=[],i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){this._setupString(),this._setupEvents(),this._setupTimelineKeyframes()}},{key:"lerpRange",value:function(e,t,i){return e*(i-t)+t}},{key:"replaceChar",value:function(e,t,i){return e.substr(0,t)+i+e.substr(t+1)}},{key:"hexToRGB",value:function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,i,n){return t+t+i+i+n+n}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}},{key:"_setupString",value:function(){/\u00a0/g.test(this.password.innerText)&&(this.password.innerText=this.password.innerText.replace(/\u00a0/g," ")),this.stringLength=this.password.innerHTML.length,this.password.innerText=this.password.innerText.replace(" ",""),this.originalString=this.password.innerText,this.password.innerText=this.replacementChar.repeat(this.stringLength),this.stringAnimationFrames[this.stringLength]=this.originalString;for(var e=this.stringLength-1;e>-1;e--){var t=this.stringAnimationFrames[e+1],i=this.replaceChar(t,e,this.replacementChar);this.stringAnimationFrames[e]=i}}},{key:"_setupEvents",value:function(){var e=this,t=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.play),i=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.reset);t.controller.on("play:enter",(function(){e._playTileAnimation()})),i.controller.on("reset:exit",(function(){e._resetTileAnimation()}))}},{key:"_setupTimelineKeyframes",value:function(){var e=this;this.timeGroup.addKeyframe(this.el,{index:[0,1],red:[this.startColor.r,this.endColor.r],green:[this.startColor.g,this.endColor.g],blue:[this.startColor.b,this.endColor.b],start:.1,end:this.animationDuration}).controller.on("draw",(function(t){var i=Math.floor(e.lerpRange(t.tweenProps.index.current,0,e.stringLength)),n="rgb(".concat(t.tweenProps.red.current,", ").concat(t.tweenProps.green.current,", ").concat(t.tweenProps.blue.current,")");e.password.innerText=e.stringAnimationFrames[i],e.password.style.setProperty("color",n)}))}},{key:"_playTileAnimation",value:function(){var e=this,t=l.director.requestAnimationStart({element:this.el,duration:this.animationDuration});t.then((function(){e.timeGroup.play()})),this.cancelAnimationRequest=t.cancel}},{key:"_resetTileAnimation",value:function(){this.cancelAnimationRequest&&(this.cancelAnimationRequest(),this.cancelAnimationRequest=null),this.timeGroup.restart(),this.timeGroup.pause()}}],[{key:"IS_SUPPORTED",value:function(){var e=document.documentElement;return!e.classList.contains("aow")&&!e.classList.contains("reduced-motion")}}]),t}(e(93));t.exports=h},{153:153,17:17,19:19,21:21,22:22,23:23,26:26,93:93,96:96}],148:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(96),c=(e(153),function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).sprite=i.el.querySelector(".hardware-spritesheet"),i.hasSpritePlayed=!1,i.cancelAnimationRequest=null,i.tileClass=".grid-item-".concat(i.el.getAttribute("data-anim-scroll-group")),i._setAnimatonDuration(),i.handwritingTileTriggerKeyframeOptions={play:{start:"t + 60h - 100vh",end:"b - 60h",event:"play",breakpointMask:"MLX"},reset:{start:"t - 110vh",end:"b + 10vh",event:"reset",breakpointMask:"MLX"}},i.handwritingSmallTileTriggerKeyframeOptions={play:{start:"t + 60h - 100vh",end:"b - 90h",event:"play",breakpointMask:"S"},reset:{start:"t - 110vh",end:"b + 10vh",event:"reset",breakpointMask:"S"}},i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){this._setupEvents()}},{key:"_setupEvents",value:function(){var e=this,t=this.anim.addKeyframe(this.el,this.handwritingTileTriggerKeyframeOptions.play),i=this.anim.addKeyframe(this.el,this.handwritingTileTriggerKeyframeOptions.reset);t.controller.on("play:enter",(function(){e._playTileAnimation(),e.hasSpritePlayed=!0})),i.controller.on("reset:exit",(function(){e._resetTileAnimation()}));var n=this.anim.addKeyframe(this.el,this.handwritingSmallTileTriggerKeyframeOptions.play);this.anim.addKeyframe(this.el,this.handwritingSmallTileTriggerKeyframeOptions.reset);n.controller.on("play:enter",(function(){e._playTileAnimation(),e.hasSpritePlayed=!0})),n.controller.on("reset:exit",(function(){e._resetTileAnimation()}))}},{key:"_playTileAnimation",value:function(){var e=this,t=l.director.requestAnimationStart({element:this.el,duration:this.tileAnimationDuration});t.then((function(){e.playAnimSprite()})),this.cancelAnimationRequest=t.cancel}},{key:"_resetTileAnimation",value:function(){this.cancelAnimationRequest&&(this.cancelAnimationRequest(),this.cancelAnimationRequest=null),this.resetAnimSprite()}},{key:"playAnimSprite",value:function(){this.hasSpritePlayed&&this.sprite.classList.remove("anim-sprite-end"),this.sprite.classList.add("anim-sprite-start")}},{key:"resetAnimSprite",value:function(){this.hasSpritePlayed&&this.sprite.classList.remove("anim-sprite-start"),this.sprite.classList.add("anim-sprite-end")}},{key:"_setAnimatonDuration",value:function(){this.duration=parseFloat(window.getComputedStyle(this.sprite).getPropertyValue("--spriteAnimDuration").replace(/s/g,"")),this.delay=parseFloat(window.getComputedStyle(this.sprite).getPropertyValue("--spriteAnimDelay").replace(/s/g,"")),this.animationDuration=this.duration+this.delay}},{key:"onBreakpointChange",value:function(e){this._setAnimatonDuration()}}],[{key:"IS_SUPPORTED",value:function(){var e=document.documentElement;return!e.classList.contains("aow")&&!e.classList.contains("reduced-motion")}}]),t}(e(93)));t.exports=c},{153:153,17:17,19:19,21:21,22:22,23:23,26:26,93:93,96:96}],149:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(96),c=e(153),h=e(93),d=e(146),f=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).cancelAnimationRequest=null,i.gridItemClass=".grid-item-".concat(i.el.getAttribute("data-anim-scroll-group")),i.animationDuration=10.5,i.timeGroup=i.anim.createTimeGroup(),i.scrollGroup=i.anim.getGroupForTarget(i.el),i.hardware=i.el.querySelector(".hardware"),i.inlineVideoContainer=i.el.querySelector(".inline-video"),i.inlineVideo=new d(i.inlineVideoContainer),i.prefersReducedMotion=document.documentElement.classList.contains("reduced-motion"),i.zoomDuration=1,i.rtl="ltr"==document.documentElement.getAttribute("dir")?1:-1,i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){this._loadInlineVideo(),this.prefersReducedMotion||(this._setupEvents(),this._setupTimelineKeyframes(),this._setupVideoControls())}},{key:"_setupEvents",value:function(){var e=this,t=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.play),i=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.reset);t.controller.on("play:enter",(function(){e._playTileAnimation()})),i.controller.on("reset:enter",(function(){e.hardware.style.willChange="transform"})),i.controller.on("reset:exit",(function(){e.hardware.style.willChange="",e._resetTileAnimation()}))}},{key:"_setupTimelineKeyframes",value:function(){var e=this;this.timeGroup.addKeyframe(this.hardware,{start:0,end:1,scale:["css(--start-scale)",1],x:[0,"((max(-250, ((a0w * 0.5) - (w * 0.5))) - css(--tile-header-padding)) + css(--offset-x)) * ".concat(this.rtl)],anchors:[this.el],easeFunction:"cubic-bezier(0.66,0,0.2,1)"}),this.timeGroup.addKeyframe(this.inlineVideo,{start:1,event:"play-inline-video"}).controller.on("play-inline-video",(function(){e.inlineVideo.play()}))}},{key:"_playTileAnimation",value:function(){var e=this,t=l.director.requestAnimationStart({element:this.el,duration:this.animationDuration});t.then((function(){e.timeGroup.play()})),this.cancelAnimationRequest=t.cancel}},{key:"_resetTileAnimation",value:function(){this.cancelAnimationRequest&&(this.cancelAnimationRequest(),this.cancelAnimationRequest=null),this.timeGroup.restart(),this.timeGroup.pause(),this.inlineVideo.reset()}},{key:"_loadInlineVideo",value:function(){var e=this;this.scrollGroup.addKeyframe(this.el,{start:"t - 200vh",end:"b + 200vh",event:"load-inline-video"}),this.anim.getControllerForTarget(this.el).on("load-inline-video:enter",(function(t){e.inlineVideo.load().then((function(){e.animationDuration=e.inlineVideo.video.normalizedDuration+e.zoomDuration}))}))}},{key:"_setupVideoControls",value:function(){var e=this,t=this.inlineVideo.video.controls.getElement("replay");this.inlineVideo.video.controls.getElement("play").addEventListener("click",(function(){e.timeGroup.play()})),t.addEventListener("click",(function(){e.timeGroup.play()}))}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.classList.contains("no-inline-video")}}]),t}(h);t.exports=f},{146:146,153:153,17:17,19:19,21:21,22:22,23:23,26:26,93:93,96:96}],150:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(96),c=e(153),h=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).cancelAnimationRequest=null,i.gridItemClass=".grid-item-".concat(i.el.getAttribute("data-anim-scroll-group")),i.animationDuration=1,i.timeGroup=i.anim.createTimeGroup(),i.scrollGroup=i.anim.getGroupForTarget(i.el),i.gridItemContent=i.el.querySelector(".grid-item-content"),i.hardwareContainer=i.gridItemContent.querySelector(".grid-item-figure"),i.hardware=i.hardwareContainer.querySelector(".hardware"),i.rtl="ltr"==document.documentElement.getAttribute("dir")?1:-1,i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){this._setupEvents(),this._setupTimelineKeyframes()}},{key:"_setupEvents",value:function(){var e=this,t=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.play),i=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.reset);t.controller.on("play:enter",(function(){e._playTileAnimation()})),i.controller.on("reset:enter",(function(){e.hardware.style.willChange="transform"})),i.controller.on("reset:exit",(function(){e.hardware.style.willChange="auto",e._resetTileAnimation()}))}},{key:"_setupTimelineKeyframes",value:function(){this.timeGroup.addKeyframe(this.hardware,{start:0,end:this.animationDuration,scale:["css(--start-scale)",1],x:[0,"(((a1w - a0w) * 0.5) - css(--offset-x)) * ".concat(this.rtl)],y:[0,"((a1h - a0h) * 0.5) + css(--tile-content-padding)"],anchors:[this.gridItemContent,this.hardwareContainer],easeFunction:"cubic-bezier(0.66,0,0.2,1)"})}},{key:"_playTileAnimation",value:function(){var e=this,t=l.director.requestAnimationStart({element:this.el,duration:this.animationDuration});t.then((function(){e.timeGroup.play()})),this.cancelAnimationRequest=t.cancel}},{key:"_resetTileAnimation",value:function(){this.cancelAnimationRequest&&(this.cancelAnimationRequest(),this.cancelAnimationRequest=null),this.timeGroup.restart(),this.timeGroup.pause()}}],[{key:"IS_SUPPORTED",value:function(){var e=document.documentElement;return!e.classList.contains("aow")&&!e.classList.contains("reduced-motion")}}]),t}(e(93));t.exports=h},{153:153,17:17,19:19,21:21,22:22,23:23,26:26,93:93,96:96}],151:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(96),c=e(153),h=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).cancelAnimationRequest=null,i.gridItemClass=".grid-item-".concat(i.el.getAttribute("data-anim-scroll-group")),i.animationDuration=1.5,i.timeGroup=i.anim.createTimeGroup(),i.timeGroup.name="Scratch Handler",i.scrollGroup=i.anim.getGroupForTarget(i.el),i.scratchOut=i.el.querySelector(".scratch-out"),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){this._setupEvents(),this._setupTimelineKeyframes(),this._addEventListeners()}},{key:"_setupEvents",value:function(){var e=this;this.annotation=this.gum.getComponentOfType("CanvasAnnotation",this.el);var t=this.anim.addKeyframe(this.el,c.scribbleTileTriggerKeyframeOptions.play),i=this.anim.addKeyframe(this.el,c.scribbleTileTriggerKeyframeOptions.reset);t.controller.on("play:enter",(function(){e._playTileAnimation()})),i.controller.on("reset:exit",(function(){e._resetTileAnimation()}))}},{key:"_setupTimelineKeyframes",value:function(){this.timeGroup.addKeyframe(this.el,{start:.6,cssClass:"scratched-out",toggle:!0})}},{key:"_playTileAnimation",value:function(){var e=this,t=l.director.requestAnimationStart({element:this.el,duration:this.animationDuration});t.then((function(){e.annotation.el.classList.contains("is-playing")||e.el.classList.contains("scratched-out")||e.annotation.startPlayback()})),this.cancelAnimationRequest=t.cancel}},{key:"_resetTileAnimation",value:function(){this.cancelAnimationRequest&&(this.cancelAnimationRequest(),this.cancelAnimationRequest=null),this.timeGroup.restart(),this.timeGroup.pause(),this.annotation.resetPlayback()}},{key:"_addEventListeners",value:function(){var e=this;this.annotation.el.addEventListener("annotation-complete",(function(){e.timeGroup.play(0)}))}}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("dynamic-annotations")}}]),t}(e(93));t.exports=h},{153:153,17:17,19:19,21:21,22:22,23:23,26:26,93:93,96:96}],152:[function(e,t,i){"use strict";var n=e(23),r=n(e(17)),s=n(e(19)),a=n(e(26)),o=n(e(21)),u=n(e(22)),l=e(96),c=e(153),h=e(93),d=e(70),f=e(146),m=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,a.default)(this,(0,o.default)(t).call(this,e))).siriAura=i.el.querySelector(".siri-aura"),i.cancelAnimationRequest=null,i.tileClass=".grid-item-".concat(i.el.getAttribute("data-anim-scroll-group")),i.animationDuration=window.getComputedStyle(i.el).getPropertyValue("--siriAnimDuration"),i.inlineVideoContainer=i.el.querySelector(".inline-video"),i.inlineVideo=new f(i.inlineVideoContainer),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"mounted",value:function(){this._loadInlineVideo(),this._setupEvents(),this._createAnimKeyframes()}},{key:"_createAnimKeyframes",value:function(){this.siriAuraAnim=d.createTimeGroup(),this.siriAuraAnim.name="Siri Aura",this.siriAuraAnim.addKeyframe(this.siriAura,{start:0,end:"css(--siriAnimDuration)",rotation:[0,360],snapAtCreation:!0})}},{key:"_setupEvents",value:function(){var e=this,t=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.play),i=this.anim.addKeyframe(this.el,c.tileTriggerKeyframeOptions.reset);t.controller.on("play:enter",(function(){e._playTileAnimation()})),i.controller.on("reset:exit",(function(){e._resetTileAnimation()}))}},{key:"_playTileAnimation",value:function(){var e=this,t=l.director.requestAnimationStart({element:this.el,duration:this.tileAnimationDuration});t.then((function(){e.inlineVideo.play(),"hidden"!==window.getComputedStyle(e.siriAura).getPropertyValue("visibility")&&e.siriAuraAnim.play()})),this.cancelAnimationRequest=t.cancel}},{key:"_resetTileAnimation",value:function(){this.cancelAnimationRequest&&(this.cancelAnimationRequest(),this.cancelAnimationRequest=null),this.inlineVideo.reset(),"hidden"!==window.getComputedStyle(this.siriAura).getPropertyValue("visibility")&&(this.siriAuraAnim.restart(),this.siriAuraAnim.pause())}},{key:"_loadInlineVideo",value:function(){var e=this;this.anim.addKeyframe(this.el,{start:"t - 200vh",end:"b + 200vh",event:"load-inline-video"}),this.anim.getControllerForTarget(this.el).on("load-inline-video:enter",(function(t){e.inlineVideo.load()}))}}],[{key:"IS_SUPPORTED",value:function(){var e=document.documentElement;return!e.classList.contains("aow")&&!e.classList.contains("reduced-motion")}}]),t}(h);t.exports=m},{146:146,153:153,17:17,19:19,21:21,22:22,23:23,26:26,70:70,93:93,96:96}],153:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.scribbleTileTriggerKeyframeOptions=i.tileTriggerKeyframeOptions=void 0;var n={play:{start:"t + 60h - 100vh",end:"b - 60h",event:"play"},reset:{start:"t - 100vh",end:"b",event:"reset"}};i.tileTriggerKeyframeOptions=n;var r={play:{start:"t + 60h - 100vh",end:"b - 40h",event:"play"},reset:{start:"t - 110vh",end:"b + 10vh",event:"reset"}};i.scribbleTileTriggerKeyframeOptions=r;var s={tileTriggerKeyframeOptions:n,scribbleTileTriggerKeyframeOptions:r};i.default=s},{}],154:[function(e,t,i){"use strict";var n=e(94),r=e(68),s=e(76),a=e(95),o=e(155),u=e(1);(function(){Object.assign(a,o);var e=document.querySelector("body"),t=document.querySelector(".main");Object.assign(a,o);var i=new n(e);i.anim.on(s.EVENTS.ON_DOM_GROUPS_CREATED,(function(){new r})),i.on(n.EVENTS.DOM_COMPONENTS_MOUNTED,(function(){i.addComponent({componentName:"InlineModal",el:t})})),u.detect()})()},{1:1,155:155,68:68,76:76,94:94,95:95}],155:[function(e,t,i){"use strict";t.exports={InlineVideoAutoplay:e(145),Hero:e(143),ChargingStations:e(137),CanvasAnnotation:e(128),CircleHandlerComponent:e(138),CityLevelLocation:e(139),AdaptiveLighting:e(126),PasswordSecurity:e(147),SiriKnowledge:e(152),ScratchHandlerComponent:e(151),QuickStatus:e(150),HandwritingHandlerComponent:e(142),FixedWidth:e(141),PinnedConversations:e(149),CompactUI:e(140),InlineModal:e(144),PasteHandwriting:e(148)}},{126:126,128:128,137:137,138:138,139:139,140:140,141:141,142:142,143:143,144:144,145:145,147:147,148:148,149:149,150:150,151:151,152:152}]},{},[154]);