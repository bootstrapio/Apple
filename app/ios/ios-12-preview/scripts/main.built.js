!function(){function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}return e}()({1:[function(e,t,n){"use strict";t.exports=e("./internal/expose")("error")},{"./internal/expose":2}],2:[function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="f7c9180f-5c45-47b4-8de4-428015f096c0",s=window||self;try{r=!!s.localStorage.getItem(o)}catch(a){}t.exports=function(e){return function(){if(r&&"object"===i(window.console))return console[e].apply(console,Array.prototype.slice.call(arguments,0))}}},{}],3:[function(e,t,n){"use strict";t.exports=e("./internal/expose")("log")},{"./internal/expose":2}],4:[function(e,t,n){"use strict";t.exports={EventEmitterMicro:e("./ac-event-emitter-micro/EventEmitterMicro")}},{"./ac-event-emitter-micro/EventEmitterMicro":5}],5:[function(e,t,n){"use strict";function r(){this._events={}}var i=r.prototype;i.on=function(e,t){this._events[e]=this._events[e]||[],this._events[e].unshift(t)},i.once=function(e,t){function n(i){r.off(e,n),void 0!==i?t(i):t()}var r=this;this.on(e,n)},i.off=function(e,t){if(this.has(e)){if(1===arguments.length)return this._events[e]=null,void delete this._events[e];var n=this._events[e].indexOf(t);n!==-1&&this._events[e].splice(n,1)}},i.trigger=function(e,t){if(this.has(e))for(var n=this._events[e].length-1;n>=0;n--)void 0!==t?this._events[e][n](t):this._events[e][n]()},i.has=function(e){return e in this._events!=!1&&0!==this._events[e].length},i.destroy=function(){for(var e in this._events)this._events[e]=null;this._events=null},t.exports=r},{}],6:[function(e,t,n){"use strict";t.exports={canvasAvailable:e("./canvasAvailable"),continuousScrollEventsAvailable:e("./continuousScrollEventsAvailable"),cookiesAvailable:e("./cookiesAvailable"),cssLinearGradientAvailable:e("./cssLinearGradientAvailable"),cssPropertyAvailable:e("./cssPropertyAvailable"),cssViewportUnitsAvailable:e("./cssViewportUnitsAvailable"),elementAttributeAvailable:e("./elementAttributeAvailable"),eventTypeAvailable:e("./eventTypeAvailable"),isDesktop:e("./isDesktop"),isHandheld:e("./isHandheld"),isRetina:e("./isRetina"),isTablet:e("./isTablet"),localStorageAvailable:e("./localStorageAvailable"),mediaElementsAvailable:e("./mediaElementsAvailable"),mediaQueriesAvailable:e("./mediaQueriesAvailable"),prefersReducedMotion:e("./prefersReducedMotion"),sessionStorageAvailable:e("./sessionStorageAvailable"),svgAvailable:e("./svgAvailable"),threeDTransformsAvailable:e("./threeDTransformsAvailable"),touchAvailable:e("./touchAvailable"),webGLAvailable:e("./webGLAvailable")}},{"./canvasAvailable":7,"./continuousScrollEventsAvailable":8,"./cookiesAvailable":9,"./cssLinearGradientAvailable":10,"./cssPropertyAvailable":11,"./cssViewportUnitsAvailable":12,"./elementAttributeAvailable":13,"./eventTypeAvailable":14,"./isDesktop":16,"./isHandheld":17,"./isRetina":18,"./isTablet":19,"./localStorageAvailable":20,"./mediaElementsAvailable":21,"./mediaQueriesAvailable":22,"./prefersReducedMotion":23,"./sessionStorageAvailable":24,"./svgAvailable":25,"./threeDTransformsAvailable":26,"./touchAvailable":27,"./webGLAvailable":28}],7:[function(e,t,n){"use strict";var r=e("./helpers/globals"),i=e("@marcom/ac-function/once"),o=function(){var e=r.getDocument(),t=e.createElement("canvas");return!("function"!=typeof t.getContext||!t.getContext("2d"))};t.exports=i(o),t.exports.original=o},{"./helpers/globals":15,"@marcom/ac-function/once":30}],8:[function(e,t,n){"use strict";function r(){return!o()||i.os.ios&&i.os.version.major>=8||i.browser.chrome}var i=e("@marcom/ac-useragent"),o=e("./touchAvailable").original,s=e("@marcom/ac-function/once");t.exports=s(r),t.exports.original=r},{"./touchAvailable":27,"@marcom/ac-function/once":30,"@marcom/ac-useragent":71}],9:[function(e,t,n){"use strict";function r(){var e=!1,t=i.getDocument(),n=i.getNavigator();try{"cookie"in t&&n.cookieEnabled&&(t.cookie="ac_feature_cookie=1",e=t.cookie.indexOf("ac_feature_cookie")!==-1,t.cookie="ac_feature_cookie=; expires=Thu, 01 Jan 1970 00:00:01 GMT;")}catch(r){}return e}var i=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(r),t.exports.original=r},{"./helpers/globals":15,"@marcom/ac-function/once":30}],10:[function(e,t,n){"use strict";function r(){var e=["linear-gradient(to bottom right, #9f9, white)","linear-gradient(top left, #9f9, white)","gradient(linear, left top, right bottom, from(#9f9), to(white))"];return e.some(function(e){return!!i("background-image",e)})}var i=e("@marcom/ac-prefixer/getStyleValue"),o=e("@marcom/ac-function/once");t.exports=o(r),t.exports.original=r},{"@marcom/ac-function/once":30,"@marcom/ac-prefixer/getStyleValue":43}],11:[function(e,t,n){"use strict";function r(e,t){return"undefined"!=typeof t?!!i(e,t):!!o(e)}var i=e("@marcom/ac-prefixer/getStyleValue"),o=e("@marcom/ac-prefixer/getStyleProperty"),s=e("@marcom/ac-function/memoize");t.exports=s(r),t.exports.original=r},{"@marcom/ac-function/memoize":29,"@marcom/ac-prefixer/getStyleProperty":42,"@marcom/ac-prefixer/getStyleValue":43}],12:[function(e,t,n){"use strict";function r(){return!!i("margin","1vw 1vh")}var i=e("@marcom/ac-prefixer/getStyleValue"),o=e("@marcom/ac-function/once");t.exports=o(r),t.exports.original=r},{"@marcom/ac-function/once":30,"@marcom/ac-prefixer/getStyleValue":43}],13:[function(e,t,n){"use strict";function r(e,t){var n,r=i.getDocument();return t=t||"div",n=r.createElement(t),e in n}var i=e("./helpers/globals"),o=e("@marcom/ac-function/memoize");t.exports=o(r),t.exports.original=r},{"./helpers/globals":15,"@marcom/ac-function/memoize":29}],14:[function(e,t,n){"use strict";function r(e,t){return!!i(e,t)}var i=e("@marcom/ac-prefixer/getEventType"),o=e("@marcom/ac-function/memoize");t.exports=o(r),t.exports.original=r},{"@marcom/ac-function/memoize":29,"@marcom/ac-prefixer/getEventType":41}],15:[function(e,t,n){"use strict";t.exports={getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator}}},{}],16:[function(e,t,n){"use strict";function r(){var e=o.getWindow();return!i()&&!e.orientation}var i=e("./touchAvailable").original,o=e("./helpers/globals"),s=e("@marcom/ac-function/once");t.exports=s(r),t.exports.original=r},{"./helpers/globals":15,"./touchAvailable":27,"@marcom/ac-function/once":30}],17:[function(e,t,n){"use strict";function r(){return!i()&&!o()}var i=e("./isDesktop").original,o=e("./isTablet").original,s=e("@marcom/ac-function/once");t.exports=s(r),t.exports.original=r},{"./isDesktop":16,"./isTablet":19,"@marcom/ac-function/once":30}],18:[function(e,t,n){"use strict";var r=e("./helpers/globals");t.exports=function(){var e=r.getWindow();return"devicePixelRatio"in e&&e.devicePixelRatio>=1.5}},{"./helpers/globals":15}],19:[function(e,t,n){"use strict";function r(){var e=o.getWindow(),t=e.screen.width;return e.orientation&&e.screen.height<t&&(t=e.screen.height),!i()&&t>=a}var i=e("./isDesktop").original,o=e("./helpers/globals"),s=e("@marcom/ac-function/once"),a=600;t.exports=s(r),t.exports.original=r},{"./helpers/globals":15,"./isDesktop":16,"@marcom/ac-function/once":30}],20:[function(e,t,n){"use strict";function r(){var e=i.getWindow(),t=!1;try{t=!(!e.localStorage||null===e.localStorage.non_existent)}catch(n){}return t}var i=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(r),t.exports.original=r},{"./helpers/globals":15,"@marcom/ac-function/once":30}],21:[function(e,t,n){"use strict";function r(){var e=i.getWindow();return"HTMLMediaElement"in e}var i=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(r),t.exports.original=r},{"./helpers/globals":15,"@marcom/ac-function/once":30}],22:[function(e,t,n){"use strict";function r(){var e=i.getWindow(),t=e.matchMedia("only all");return!(!t||!t.matches)}e("@marcom/ac-polyfills/matchMedia");var i=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(r),t.exports.original=r},{"./helpers/globals":15,"@marcom/ac-function/once":30,"@marcom/ac-polyfills/matchMedia":void 0}],23:[function(e,t,n){"use strict";function r(){var e=i.getWindow(),t=e.matchMedia("(prefers-reduced-motion)");return!(!t||!t.matches)}var i=e("./helpers/globals");t.exports=r},{"./helpers/globals":15}],24:[function(e,t,n){"use strict";function r(){var e=i.getWindow(),t=!1;try{"sessionStorage"in e&&"function"==typeof e.sessionStorage.setItem&&(e.sessionStorage.setItem("ac_feature","test"),t=!0,e.sessionStorage.removeItem("ac_feature","test"))}catch(n){}return t}var i=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(r),t.exports.original=r},{"./helpers/globals":15,"@marcom/ac-function/once":30}],25:[function(e,t,n){"use strict";function r(){var e=i.getDocument();return!!e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")}var i=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(r),t.exports.original=r},{"./helpers/globals":15,"@marcom/ac-function/once":30}],26:[function(e,t,n){"use strict";function r(){return!(!i("perspective","1px")||!i("transform","translateZ(0)"))}var i=e("@marcom/ac-prefixer/getStyleValue"),o=e("@marcom/ac-function/once");t.exports=o(r),t.exports.original=r},{"@marcom/ac-function/once":30,"@marcom/ac-prefixer/getStyleValue":43}],27:[function(e,t,n){"use strict";function r(){var e=i.getWindow(),t=i.getDocument(),n=i.getNavigator();return!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch||n.maxTouchPoints>0||n.msMaxTouchPoints>0)}var i=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(r),t.exports.original=r},{"./helpers/globals":15,"@marcom/ac-function/once":30}],28:[function(e,t,n){"use strict";function r(){var e=i.getDocument(),t=e.createElement("canvas");return"function"==typeof t.getContext&&!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}var i=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(r),t.exports.original=r},{"./helpers/globals":15,"@marcom/ac-function/once":30}],29:[function(e,t,n){"use strict";var r=function(){var e,t="";for(e=0;e<arguments.length;e++)e>0&&(t+=","),t+=arguments[e];return t};t.exports=function(e,t){t=t||r;var n=function i(){var n=arguments,r=t.apply(this,n);return r in i.cache||(i.cache[r]=e.apply(this,n)),i.cache[r]};return n.cache={},n}},{}],30:[function(e,t,n){"use strict";t.exports=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}}},{}],31:[function(e,t,n){"use strict";var r={};t.exports=function(e,t,n){if(e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),n||!r.hasOwnProperty(e)){var i=new RegExp("[\\?&]"+e+"=([^&#]*)"),o=i.exec(location.search),s=null===o?t:decodeURIComponent(o[1].replace(/\+/g," "));"true"!==s&&"false"!==s||(s="true"===s),isNaN(parseFloat(s))||(s=parseFloat(s)),r[e]=s}return r[e]}},{}],32:[function(e,t,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(h===setTimeout)return setTimeout(e,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function s(e){if(m===clearTimeout)return clearTimeout(e);if((m===i||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(e);try{return m(e)}catch(t){try{return m.call(null,e)}catch(t){return m.call(this,e)}}}function a(){v&&p&&(v=!1,p.length?d=p.concat(d):y=-1,d.length&&l())}function l(){if(!v){var e=o(a);v=!0;for(var t=d.length;t;){for(p=d,d=[];++y<t;)p&&p[y].run();y=-1,t=d.length}p=null,v=!1,s(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var h,m,f=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(e){h=r}try{m="function"==typeof clearTimeout?clearTimeout:i}catch(e){m=i}}();var p,d=[],v=!1,y=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new u(e,t)),1!==d.length||v||o(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],33:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i,o,s,a,l){return function(){var u=t.getContext("2d");u.drawImage(n,r,i,o+a,s+l,0,0,o+a,s+l),e.appendChild(t)}}},{}],34:[function(e,t,n){"use strict";var r=e("ac-queue").LiveQueue,i=e("./helpers/createImageDrawCall");t.exports=function(e,t){var n=new r(1),o=t.rows||3,s=t.columns||3,a=t.retina||!1;t.retina&&t.forcedWidth&&t.forcedHeight&&(t.forcedWidth*=2,t.forcedHeight*=2);for(var l=[],u=0;u<s;u++){l[u]=[];for(var c=0;c<o;c++){l[u][c]=document.createElement("canvas")}}var h=document.createElement("div");h.classList.add("canvas-grid");var m=getComputedStyle(e),f=m.backgroundImage,p=f.match(/url\("?(.*?)"?\)/i)[1],d=new Image;return d.src=p,d.addEventListener("load",function v(){d.removeEventListener("load",v);var e=a?.5:1,r=t.forcedWidth||d.naturalWidth,u=t.forcedHeight||d.naturalHeight,c=Math.round(.5*(d.naturalWidth-r)),m=Math.round(.5*(d.naturalHeight-u)),f=Math.floor(r/s),p=Math.floor(u/o);h.style.width=Math.round(r*e)+"px",h.style.height=Math.round(u*e)+"px";for(var y=0;y<s;y++)for(var _=0;_<o;_++){var b=y===s-1?0:5,g=_===o-1?0:5,w=l[y][_];w.style.position="absolute",w.width=f+b,w.height=p+g,w.style.width=Math.round(w.width*e)+"px",w.style.height=Math.round(w.height*e)+"px";var E=Math.round(f*y),k=Math.round(p*_);w.style.left=Math.round(E*e)+"px",w.style.top=Math.round(k*e)+"px",n.enqueue(i(h,w,d,c+E,m+k,f,p,b,g))}n.start()}),new Promise(function(e,t){n.enqueue(function(){n.destroy(),e(h)},10)})}},{"./helpers/createImageDrawCall":33,"ac-queue":118}],35:[function(e,t,n){"use strict";t.exports={WordJoiner:e("./ac-kr-word-joiner/WordJoiner")}},{"./ac-kr-word-joiner/WordJoiner":36}],36:[function(e,t,n){"use strict";function r(e){this.options=s(u,e),this._treeWalkers=[],this.rootElements=[]}var i=e("./isOnlyWhitespace"),o=e("./createTreeWalker"),s=e("@marcom/ac-object/defaults"),a="⁠",l=null,u={dataAttribute:"data-word-join",joinerCharacter:a,contextElement:document},c=r.prototype;r.joinify=function(e,t){var n="",r=0,o=e.length;for(t=t||a;r<o;)n+=e[r],r<o-1&&!i(e[r+1])&&!i(e[r])&&(n+=t),r+=1;return n},r.shouldJoin=function(){if(null!==l)return l;l=!1;var e=document.createElement("div");return"querySelectorAll"in document&&"wordBreak"in e.style&&(e.style.wordBreak="keep-all","keep-all"!==e.style.wordBreak&&(l=!0)),e=null,l},c.destroy=function(){this._treeWalkers&&this._treeWalkers.length>0&&this._treeWalkers.forEach(function(e){e=null}),this._treeWalkers=null,this.rootElements=null,this.options=null},c.getRootElements=function(e,t){e=e||this.options.dataAttribute,t=t||this.options.contextElement;var n,r="body";return e&&(r="["+e+"]"),n=[].slice.call(t.querySelectorAll(r))},c.join=function(){0===this.rootElements.length&&(this.rootElements=this.getRootElements(),this._treeWalkers=this._createTreeWalkers()),this._treeWalkers&&this._treeWalkers.length>0&&this._treeWalkers.forEach(function(e){for(var t=e.nextNode();t;)t.data=r.joinify(t.data,this.options.joinerCharacter),t=e.nextNode()},this)},c._createTreeWalkers=function(){var e=[];return this.rootElements&&this.rootElements.length>0&&this.rootElements.forEach(function(t){e.push(o(t))},this),e},t.exports=r},{"./createTreeWalker":37,"./isOnlyWhitespace":38,"@marcom/ac-object/defaults":39}],37:[function(e,t,n){"use strict";function r(e){var t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){if(!i(e.data)&&e.data.length>1)return NodeFilter.FILTER_ACCEPT}},!1);return t}var i=e("./isOnlyWhitespace");t.exports=r},{"./isOnlyWhitespace":38}],38:[function(e,t,n){"use strict";function r(e){return/^\s*$/.test(e)}t.exports=r},{}],39:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("./extend");t.exports=function(e,t){if("object"!==("undefined"==typeof e?"undefined":r(e)))throw new TypeError("defaults: must provide a defaults object");if(t=t||{},"object"!==("undefined"==typeof t?"undefined":r(t)))throw new TypeError("defaults: options must be a typeof object");return i({},e,t)}},{"./extend":40}],40:[function(e,t,n){"use strict";e("@marcom/ac-polyfills/Array/prototype.forEach");var r=Object.prototype.hasOwnProperty;t.exports=function(){var e,t;return e=arguments.length<2?[{},arguments[0]]:[].slice.call(arguments),t=e.shift(),e.forEach(function(e){if(null!=e)for(var n in e)r.call(e,n)&&(t[n]=e[n])}),t}},{"@marcom/ac-polyfills/Array/prototype.forEach":void 0}],41:[function(e,t,n){"use strict";var r=e("./utils/eventTypeAvailable"),i=e("./shared/camelCasedEventTypes"),o=e("./shared/windowFallbackEventTypes"),s=e("./shared/prefixHelper"),a={};t.exports=function l(e,t){var n,u,c;if(t=t||"div",e=e.toLowerCase(),t in a||(a[t]={}),u=a[t],e in u)return u[e];if(r(e,t))return u[e]=e;if(e in i)for(c=0;c<i[e].length;c++)if(n=i[e][c],r(n.toLowerCase(),t))return u[e]=n;for(c=0;c<s.evt.length;c++)if(n=s.evt[c]+e,r(n,t))return s.reduce(c),u[e]=n;return"window"!==t&&o.indexOf(e)?u[e]=l(e,"window"):u[e]=!1}},{"./shared/camelCasedEventTypes":44,"./shared/prefixHelper":46,"./shared/windowFallbackEventTypes":49,"./utils/eventTypeAvailable":50}],42:[function(e,t,n){"use strict";var r=e("./shared/stylePropertyCache"),i=e("./shared/getStyleTestElement"),o=e("./utils/toCSS"),s=e("./utils/toDOM"),a=e("./shared/prefixHelper"),l=function(e,t){var n=o(e),i=t!==!1&&o(t);return r[e]=r[t]=r[n]=r[i]={dom:t,css:i},t};t.exports=function(e){var t,n,o,u;if(e+="",e in r)return r[e].dom;for(o=i(),e=s(e),n=e.charAt(0).toUpperCase()+e.substring(1),t="filter"===e?["WebkitFilter","filter"]:(e+" "+a.dom.join(n+" ")+n).split(" "),u=0;u<t.length;u++)if("undefined"!=typeof o.style[t[u]])return 0!==u&&a.reduce(u-1),l(e,t[u]);return l(e,!1)}},{"./shared/getStyleTestElement":45,"./shared/prefixHelper":46,"./shared/stylePropertyCache":47,"./utils/toCSS":51,"./utils/toDOM":52}],43:[function(e,t,n){"use strict";var r=e("./getStyleProperty"),i=e("./shared/styleValueAvailable"),o=e("./shared/prefixHelper"),s=e("./shared/stylePropertyCache"),a={},l=/(\([^\)]+\))/gi,u=/([^ ,;\(]+(\([^\)]+\))?)/gi;t.exports=function(e,t){var n;return t+="",!!(e=r(e))&&(i(e,t)?t:(n=s[e].css,t=t.replace(u,function(t){var r,s,u,c;if("#"===t[0]||!isNaN(t[0]))return t;if(s=t.replace(l,""),u=n+":"+s,u in a)return a[u]===!1?"":t.replace(s,a[u]);for(r=o.css.map(function(e){return e+t}),r=[t].concat(r),c=0;c<r.length;c++)if(i(e,r[c]))return 0!==c&&o.reduce(c-1),a[u]=r[c].replace(l,""),r[c];return a[u]=!1,""}),t=t.trim(),""!==t&&t))}},{"./getStyleProperty":42,"./shared/prefixHelper":46,"./shared/stylePropertyCache":47,"./shared/styleValueAvailable":48}],44:[function(e,t,n){"use strict";t.exports={transitionend:["webkitTransitionEnd","MSTransitionEnd"],animationstart:["webkitAnimationStart","MSAnimationStart"],animationend:["webkitAnimationEnd","MSAnimationEnd"],animationiteration:["webkitAnimationIteration","MSAnimationIteration"],fullscreenchange:["MSFullscreenChange"],fullscreenerror:["MSFullscreenError"]}},{}],45:[function(e,t,n){"use strict";var r;t.exports=function(){return r?(r.style.cssText="",r.removeAttribute("style")):r=document.createElement("_"),r},t.exports.resetElement=function(){r=null}},{}],46:[function(e,t,n){"use strict";var r=["-webkit-","-moz-","-ms-"],i=["Webkit","Moz","ms"],o=["webkit","moz","ms"],s=function(){this.initialize()},a=s.prototype;a.initialize=function(){this.reduced=!1,this.css=r,this.dom=i,this.evt=o},a.reduce=function(e){this.reduced||(this.reduced=!0,this.css=[this.css[e]],this.dom=[this.dom[e]],this.evt=[this.evt[e]])},t.exports=new s},{}],47:[function(e,t,n){"use strict";t.exports={}},{}],48:[function(e,t,n){"use strict";var r,i,o=e("./stylePropertyCache"),s=e("./getStyleTestElement"),a=!1,l=function(){var e;if(!a){a=!0,r="CSS"in window&&"supports"in window.CSS,i=!1,e=s();try{e.style.width="invalid"}catch(t){i=!0}}};t.exports=function(e,t){var n,a;if(l(),r)return e=o[e].css,CSS.supports(e,t);if(a=s(),n=a.style[e],i)try{a.style[e]=t}catch(u){return!1}else a.style[e]=t;return a.style[e]&&a.style[e]!==n},t.exports.resetFlags=function(){a=!1}},{"./getStyleTestElement":45,"./stylePropertyCache":47}],49:[function(e,t,n){"use strict";t.exports=["transitionend","animationstart","animationend","animationiteration"]},{}],50:[function(e,t,n){"use strict";var r={window:window,document:document};t.exports=function(e,t){var n;return e="on"+e,t in r||(r[t]=document.createElement(t)),n=r[t],e in n||"setAttribute"in n&&(n.setAttribute(e,"return;"),"function"==typeof n[e])}},{}],51:[function(e,t,n){"use strict";var r=/^(webkit|moz|ms)/gi;t.exports=function(e){return"cssfloat"===e.toLowerCase()?"float":(r.test(e)&&(e="-"+e),e.replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase())}},{}],52:[function(e,t,n){"use strict";var r=/-([a-z])/g;t.exports=function(e){return"float"===e.toLowerCase()?"cssFloat":(e=e.replace(r,function(e,t){return t.toUpperCase()}),"Ms"===e.substr(0,2)&&(e="ms"+e.substring(2)),e)}},{}],53:[function(e,t,n){"use strict";var r=e("@marcom/ac-shared-instance").SharedInstance,i="ac-raf-emitter-id-generator:sharedRAFEmitterIDGeneratorInstance",o="1.0.3",s=function(){this._currentID=0};s.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=r.share(i,o,s)},{"@marcom/ac-shared-instance":67}],54:[function(e,t,n){"use strict";t.exports={majorVersionNumber:"3.x"}},{}],55:[function(e,t,n){"use strict";function r(e){e=e||{},o.call(this),this.id=a.getNewID(),this.executor=e.executor||s,this._reset(),this._willRun=!1,this._didDestroy=!1}var i,o=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=e("./sharedRAFExecutorInstance"),a=e("./sharedRAFEmitterIDGeneratorInstance");i=r.prototype=Object.create(o.prototype),i.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},i.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},i.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,o.prototype.destroy.call(this),this._didDestroy=!0,e},i.willRun=function(){return this._willRun},i.isRunning=function(){return this._isRunning},i._subscribe=function(){return this.executor.subscribe(this)},i._unsubscribe=function(){return this.executor.unsubscribe(this)},i._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},i._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},i._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=r},{"./sharedRAFEmitterIDGeneratorInstance":62,"./sharedRAFExecutorInstance":63,"@marcom/ac-event-emitter-micro":4}],56:[function(e,t,n){"use strict";function r(e){e=e||{},this._reset(),this.updatePhases(),this.eventEmitter=new o,this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}e("@marcom/ac-polyfills/performance/now");var i,o=e("@marcom/ac-event-emitter-micro/EventEmitterMicro");i=r.prototype,i.frameRequestedPhase="requested",i.startPhase="start",i.runPhases=["update","external","draw"],i.endPhase="end",i.disabledPhase="disabled",i.beforePhaseEventPrefix="before:",i.afterPhaseEventPrefix="after:",i.subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},i.subscribeImmediate=function(e,t){return this._totalSubscribeCount++,this._subscribers[e.id]||(t?this._subscribersOrder.splice(this._currentSubscriberIndex+1,0,e.id):this._subscribersOrder.unshift(e.id),this._subscribers[e.id]=e,this._subscriberArrayLength++,this._subscriberCount++),this._totalSubscribeCount},i.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},i.getSubscribeID=function(){return this._totalSubscribeCount+=1},i.destroy=function(){var e=this._cancel();return this.eventEmitter.destroy(),this.eventEmitter=null,this.phases=null,this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},i.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},i.updatePhases=function(){this.phases||(this.phases=[]),this.phases.length=0,this.phases.push(this.frameRequestedPhase),this.phases.push(this.startPhase),Array.prototype.push.apply(this.phases,this.runPhases),this.phases.push(this.endPhase),this._runPhasesLength=this.runPhases.length,this._phasesLength=this.phases.length},i._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this.phase===this.disabledPhase&&(this.phaseIndex=0,this.phase=this.phases[this.phaseIndex]),!0},i._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},i._onAnimationFrame=function(e){for(this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this.phaseIndex=0,this.phase=this.phases[this.phaseIndex],this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameStart(this._rafData);for(this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._runPhaseIndex=0;this._runPhaseIndex<this._runPhasesLength;this._runPhaseIndex++){for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]].trigger(this.phase,this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase)}for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameEnd(this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._willRun?(this.phaseIndex=0,this.phaseIndex=this.phases[this.phaseIndex]):this._reset()},i._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},i._reset=function(){this._rafData||(this._rafData={}),this._rafData.time=0,this._rafData.delta=0,this._rafData.fps=0,this._rafData.naturalFps=0,this._rafData.timeNow=0,this._subscribers={},this._subscribersOrder=[],this._currentSubscriberIndex=-1,this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0,this._runPhaseIndex=-1,this.phaseIndex=-1,this.phase=this.disabledPhase},t.exports=r},{"@marcom/ac-event-emitter-micro/EventEmitterMicro":5,"@marcom/ac-polyfills/performance/now":void 0}],57:[function(e,t,n){"use strict";var r=e("./SingleCallRAFEmitter"),i=function(e){this.phase=e,this.rafEmitter=new r,this._cachePhaseIndex(),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._onBeforeRAFExecutorStart=this._onBeforeRAFExecutorStart.bind(this),this._onBeforeRAFExecutorPhase=this._onBeforeRAFExecutorPhase.bind(this),this._onAfterRAFExecutorPhase=this._onAfterRAFExecutorPhase.bind(this),this.rafEmitter.on(this.phase,this._onRAFExecuted.bind(this)),this.rafEmitter.executor.eventEmitter.on("before:start",this._onBeforeRAFExecutorStart),this.rafEmitter.executor.eventEmitter.on("before:"+this.phase,this._onBeforeRAFExecutorPhase),this.rafEmitter.executor.eventEmitter.on("after:"+this.phase,this._onAfterRAFExecutorPhase),this._frameCallbacks=[],this._currentFrameCallbacks=[],this._nextFrameCallbacks=[],this._phaseActive=!1,this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._currentFrameCallbacksLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},o=i.prototype;o.requestAnimationFrame=function(e,t){return t===!0&&this.rafEmitter.executor.phaseIndex>0&&this.rafEmitter.executor.phaseIndex<=this.phaseIndex?this._phaseActive?(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!0),
this._frameCallbacks.push(this._currentFrameID,e),this._frameCallbackLength+=2):(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!1),this._currentFrameCallbacks.push(this._currentFrameID,e),this._currentFrameCallbacksLength+=2):(this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2),this._currentFrameID},o.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelNextAnimationFrame():(this._cancelFrameIdx=this._currentFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelCurrentAnimationFrame():(this._cancelFrameIdx=this._frameCallbacks.indexOf(e),this._cancelFrameIdx>-1&&this._cancelRunningAnimationFrame()))},o._onRAFExecuted=function(e){for(this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e);this._frameCallbacks.length=0,this._frameCallbackLength=0},o._onBeforeRAFExecutorStart=function(){Array.prototype.push.apply(this._currentFrameCallbacks,this._nextFrameCallbacks.splice(0,this._nextFrameCallbacksLength)),this._currentFrameCallbacksLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks.length=0,this._nextFrameCallbacksLength=0},o._onBeforeRAFExecutorPhase=function(){this._phaseActive=!0,Array.prototype.push.apply(this._frameCallbacks,this._currentFrameCallbacks.splice(0,this._currentFrameCallbacksLength)),this._frameCallbackLength=this._currentFrameCallbacksLength,this._currentFrameCallbacks.length=0,this._currentFrameCallbacksLength=0},o._onAfterRAFExecutorPhase=function(){this._phaseActive=!1},o._cachePhaseIndex=function(){this.phaseIndex=this.rafEmitter.executor.phases.indexOf(this.phase)},o._cancelRunningAnimationFrame=function(){this._frameCallbacks.splice(this._cancelFrameIdx,2),this._frameCallbackLength-=2},o._cancelCurrentAnimationFrame=function(){this._currentFrameCallbacks.splice(this._cancelFrameIdx,2),this._currentFrameCallbacksLength-=2},o._cancelNextAnimationFrame=function(){this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel()},t.exports=i},{"./SingleCallRAFEmitter":59}],58:[function(e,t,n){"use strict";var r=e("./RAFInterface"),i=function(){this.events={}},o=i.prototype;o.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new r(e)),this.events[e].requestAnimationFrame},o.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new r(e)),this.events[e].cancelAnimationFrame},t.exports=new i},{"./RAFInterface":57}],59:[function(e,t,n){"use strict";var r=e("./RAFEmitter"),i=function(e){r.call(this,e)},o=i.prototype=Object.create(r.prototype);o._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=i},{"./RAFEmitter":55}],60:[function(e,t,n){"use strict";var r=e("./RAFInterfaceController");t.exports=r.requestAnimationFrame("draw")},{"./RAFInterfaceController":58}],61:[function(e,t,n){"use strict";var r=e("./RAFInterfaceController");t.exports=r.requestAnimationFrame("external")},{"./RAFInterfaceController":58}],62:[function(e,t,n){"use strict";var r=e("@marcom/ac-shared-instance").SharedInstance,i=e("../.release-info.js").majorVersionNumber,o=function(){this._currentID=0};o.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=r.share("@marcom/ac-raf-emitter/sharedRAFEmitterIDGeneratorInstance",i,o)},{"../.release-info.js":54,"@marcom/ac-shared-instance":67}],63:[function(e,t,n){"use strict";var r=e("@marcom/ac-shared-instance").SharedInstance,i=e("../.release-info.js").majorVersionNumber,o=e("./RAFExecutor");t.exports=r.share("@marcom/ac-raf-emitter/sharedRAFExecutorInstance",i,o)},{"../.release-info.js":54,"./RAFExecutor":56,"@marcom/ac-shared-instance":67}],64:[function(e,t,n){"use strict";var r=e("./RAFInterfaceController");t.exports=r.requestAnimationFrame("update")},{"./RAFInterfaceController":58}],65:[function(e,t,n){"use strict";function r(e){e=e||{},this._reset(),this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}e("@marcom/ac-polyfills/performance/now");var i;i=r.prototype,i.subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},i.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},i.trigger=function(e,t){var n;for(n=0;n<this._subscriberArrayLength;n++)null!==this._subscribers[this._subscribersOrder[n]]&&this._subscribers[this._subscribersOrder[n]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[n]].trigger(e,t)},i.destroy=function(){var e=this._cancel();return this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},i.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},i._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),!0},i._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},i._onSubscribersAnimationFrameStart=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&this._subscribers[this._subscribersOrder[t]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameStart(e)},i._onSubscribersAnimationFrameEnd=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&this._subscribers[this._subscribersOrder[t]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameEnd(e)},i._onAnimationFrame=function(e){this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this._onSubscribersAnimationFrameStart(this._rafData),this.trigger("update",this._rafData),this.trigger("external",this._rafData),this.trigger("draw",this._rafData),this._onSubscribersAnimationFrameEnd(this._rafData),this._willRun||this._reset()},i._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},i._reset=function(){this._rafData={time:0,delta:0,fps:0,naturalFps:0,timeNow:0},this._subscribers={},this._subscribersOrder=[],this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0},t.exports=r},{"@marcom/ac-polyfills/performance/now":void 0}],66:[function(e,t,n){"use strict";var r=e("@marcom/ac-shared-instance").SharedInstance,i="ac-raf-executor:sharedRAFExecutorInstance",o="2.0.1",s=e("./RAFExecutor");t.exports=r.share(i,o,s)},{"./RAFExecutor":65,"@marcom/ac-shared-instance":67}],67:[function(e,t,n){"use strict";t.exports={SharedInstance:e("./ac-shared-instance/SharedInstance")}},{"./ac-shared-instance/SharedInstance":68}],68:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=window,o="AC",s="SharedInstance",a=i[o],l=function(){var e={};return{get:function(t,n){var r=null;return e[t]&&e[t][n]&&(r=e[t][n]),r},set:function(t,n,r){return e[t]||(e[t]={}),"function"==typeof r?e[t][n]=new r:e[t][n]=r,e[t][n]},share:function(e,t,n){var r=this.get(e,t);return r||(r=this.set(e,t,n)),r},remove:function(t,n){var i="undefined"==typeof n?"undefined":r(n);if("string"===i||"number"===i){if(!e[t]||!e[t][n])return;return void(e[t][n]=null)}e[t]&&(e[t]=null)}}}();a||(a=i[o]={}),a[s]||(a[s]=l),t.exports=a[s]},{}],69:[function(e,t,n){"use strict";t.exports=function(e){e=e||window.location.search,e=e.replace(/^[^?]*\?/,"");var t="&",n=e?e.split(t):[],r={},i="=",o=new RegExp(i);return n.forEach(function(e){var t,n;if(o.test(e)){var s=e.split(i,2);t=s[0],n=s[1]}else t=e,n=null;r[t]=n}),r}},{}],70:[function(e,t,n){"use strict";function r(e){var t=e.port,n=new RegExp(":"+t);return t&&!n.test(e.href)&&n.test(e.host)}var i=e("./parseSearchParams");t.exports=function(e){var t,n="",o=!1;return e?window.URL&&"function"==typeof window.URL?t=new URL(e,window.location):(t=document.createElement("a"),t.href=e,t.href=t.href,r(t)&&(n=t.host.replace(new RegExp(":"+t.port),""),o=!0)):t=window.location,{hash:t.hash,host:n||t.host,hostname:t.hostname,href:t.href,origin:t.origin||t.protocol+"//"+(n||t.host),pathname:t.pathname,port:o?"":t.port,protocol:t.protocol,search:t.search,searchParams:i(t.search)}}},{"./parseSearchParams":69}],71:[function(e,t,n){"use strict";var r={ua:window.navigator.userAgent,platform:window.navigator.platform,vendor:window.navigator.vendor};t.exports=e("./parseUserAgent")(r)},{"./parseUserAgent":74}],72:[function(e,t,n){"use strict";t.exports={browser:{safari:!1,chrome:!1,firefox:!1,ie:!1,opera:!1,android:!1,edge:!1,version:{name:"",major:0,minor:0,patch:0,documentMode:!1}},os:{osx:!1,ios:!1,android:!1,windows:!1,linux:!1,fireos:!1,chromeos:!1,version:{name:"",major:0,minor:0,patch:0}}}},{}],73:[function(e,t,n){"use strict";t.exports={browser:[{name:"edge",userAgent:"Edge",version:["rv","Edge"],test:function(e){return e.ua.indexOf("Edge")>-1||"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"===e.ua}},{name:"chrome",userAgent:"Chrome"},{name:"firefox",test:function(e){return e.ua.indexOf("Firefox")>-1&&e.ua.indexOf("Opera")===-1},version:"Firefox"},{name:"android",userAgent:"Android"},{name:"safari",test:function(e){return e.ua.indexOf("Safari")>-1&&e.vendor.indexOf("Apple")>-1},version:"Version"},{name:"ie",test:function(e){return e.ua.indexOf("IE")>-1||e.ua.indexOf("Trident")>-1},version:["MSIE","rv"],parseDocumentMode:function(){var e=!1;return document.documentMode&&(e=parseInt(document.documentMode,10)),e}},{name:"opera",userAgent:"Opera",version:["Version","Opera"]}],os:[{name:"windows",test:function(e){return e.platform.indexOf("Win")>-1},version:"Windows NT"},{name:"osx",userAgent:"Mac",test:function(e){return e.platform.indexOf("Mac")>-1}},{name:"ios",test:function(e){return e.ua.indexOf("iPhone")>-1||e.ua.indexOf("iPad")>-1},version:["iPhone OS","CPU OS"]},{name:"linux",userAgent:"Linux",test:function(e){return e.platform.indexOf("Linux")>-1&&e.ua.indexOf("Android")===-1}},{name:"fireos",test:function(e){return e.ua.indexOf("Firefox")>-1&&e.ua.indexOf("Mobile")>-1},version:"rv"},{name:"android",userAgent:"Android"},{name:"chromeos",userAgent:"CrOS"}]}},{}],74:[function(e,t,n){"use strict";function r(e){return new RegExp(e+"[a-zA-Z\\s/:]+([0-9_.]+)","i")}function i(e,t){if("function"==typeof e.parseVersion)return e.parseVersion(t);var n=e.version||e.userAgent;"string"==typeof n&&(n=[n]);for(var i,o=n.length,s=0;s<o;s++)if(i=t.match(r(n[s])),i&&i.length>1)return i[1].replace(/_/g,".")}function o(e,t,n){for(var r,o,s=e.length,a=0;a<s;a++)if("function"==typeof e[a].test?e[a].test(n)===!0&&(r=e[a].name):n.ua.indexOf(e[a].userAgent)>-1&&(r=e[a].name),r){if(t[r]=!0,o=i(e[a],n.ua),"string"==typeof o){var l=o.split(".");t.version.name=o,l&&l.length>0&&(t.version.major=parseInt(l[0]||0),t.version.minor=parseInt(l[1]||0),t.version.patch=parseInt(l[2]||0))}else"edge"===r&&(t.version.name="12.0.0",t.version.major="12",t.version.minor="0",t.version.patch="0");return"function"==typeof e[a].parseDocumentMode&&(t.version.documentMode=e[a].parseDocumentMode()),t}return t}function s(e){var t={};return t.browser=o(l.browser,a.browser,e),t.os=o(l.os,a.os,e),t}var a=e("./defaults"),l=e("./dictionary");t.exports=s},{"./defaults":72,"./dictionary":73}],75:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=e("./Model/AnimSystemModel"),u=e("./Keyframes/Keyframe"),c=e("./Keyframes/KeyframeCSSClass"),h=e("./Keyframes/KeyframeDiscreteEvent"),m=(e("./KeyframeController"),e("./ScrollGroup")),f=e("./TimeGroup"),p={create:e("@marcom/ac-raf-emitter/RAFEmitter"),update:e("@marcom/ac-raf-emitter/update"),external:e("@marcom/ac-raf-emitter/external"),draw:e("@marcom/ac-raf-emitter/draw")},d=null,v=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(d)throw"You cannot create multiple AnimSystems. You probably want to create multiple groups instead. You can have unlimited groups on a page";return d=e,e.groups=[],e.scrollSystems=[],e.timeSystems=[],e.setupEvents(),e}return o(t,e),s(t,[{key:"initialize",value:function(){var e=this;this.initializeModel(),this.createDOMGroups(),p.external(function(){e.setupAnimatedContent()})}},{key:"destroy",value:function(){this.groups.forEach(function(e){return e.destroy()}),this.groups=null,this.scrollSystems=null,this.timeSystems=null,window.clearTimeout(l.RESIZE_TIMEOUT),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResizeImmediate)}},{key:"createTimeGroup",value:function(e){var t=new f(e,this);return this.groups.push(t),this.timeSystems.push(t),this.trigger(l.EVENTS.ON_GROUP_CREATED,t),t}},{key:"createScrollGroup",value:function(e){if(!e)throw"AnimSystem scroll based groups must supply an HTMLElement";var t=new m(e,this);return this.groups.push(t),this.scrollSystems.push(t),this.trigger(l.EVENTS.ON_GROUP_CREATED,t),t}},{key:"createDOMGroups",value:function(){var e=this;document.body.setAttribute("data-anim-scroll-group","body"),document.querySelectorAll("[data-anim-scroll-group]").forEach(function(t){return e.createScrollGroup(t)}),document.querySelectorAll("[data-anim-time-group]").forEach(function(t){return e.createTimeGroup(t)}),this.trigger(l.EVENTS.ON_DOM_GROUPS_CREATED,this.groups)}},{key:"setupAnimatedContent",value:function(){var e=this,t=[];[u.DATA_ATTRIBUTE,c.DATA_ATTRIBUTE,h.DATA_ATTRIBUTE].forEach(function(e){for(var n=0;n<12;n++)t.push(e+(0===n?"":"-"+(n-1)))});for(var n=0;n<t.length;n++)for(var r=t[n],i=document.querySelectorAll("["+r+"]"),o=0;o<i.length;o++){var s=i[o],a=JSON.parse(s.getAttribute(r));this.addKeyframe(s,a)}p.update(function(){e.groups.forEach(function(e){return e.onKeyframesDirty()}),e.groups.forEach(function(e){return e.trigger(l.EVENTS.ON_DOM_KEYFRAMES_CREATED,e)}),e.trigger(l.EVENTS.ON_DOM_KEYFRAMES_CREATED,e),p.draw(function(){return e.groups.forEach(function(e){return e.reconcile()})},!0)},!0)}},{key:"initializeModel",value:function(){l.DOCUMENT_ELEMENT_CLASSES=Array.from(document.documentElement.classList),l.pageMetrics.windowHeight=window.innerHeight,l.pageMetrics.windowWidth=window.innerWidth,l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset,l.pageMetrics.breakpoint=l.getBreakpoint();var e=document.documentElement.getBoundingClientRect();l.pageMetrics.documentOffsetX=e.left+l.pageMetrics.scrollX,l.pageMetrics.documentOffsetY=e.top+l.pageMetrics.scrollY}},{key:"setupEvents",value:function(){this.onScroll=this.onScroll.bind(this),this.onResizedDebounced=this.onResizedDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResizeImmediate)}},{key:"determineActiveKeyframes",value:function(){for(var e=Array.from(document.documentElement.classList),t=0,n=this.groups.length;t<n;t++)this.groups[t].determineActiveKeyframes(e)}},{key:"onScroll",value:function(){l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset;for(var e=0,t=this.scrollSystems.length;e<t;e++)this.scrollSystems[e]._onScroll(l.pageMetrics.scrollY);this.trigger(l.PageEvents.ON_SCROLL,l.pageMetrics)}},{key:"onResizeImmediate",value:function(){l.pageMetrics.windowHeight=window.innerHeight,l.pageMetrics.windowWidth=window.innerWidth,l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset;var e=document.documentElement.getBoundingClientRect();l.pageMetrics.documentOffsetX=e.left+l.pageMetrics.scrollX,l.pageMetrics.documentOffsetY=e.top+l.pageMetrics.scrollY,window.clearTimeout(l.RESIZE_TIMEOUT),l.RESIZE_TIMEOUT=window.setTimeout(this.onResizedDebounced,250),this.trigger(l.PageEvents.ON_RESIZE_IMMEDIATE,l.pageMetrics)}},{key:"onResizedDebounced",value:function(){var e=this;p.update(function(){var t=l.pageMetrics.breakpoint,n=l.getBreakpoint();if(n!==t){l.pageMetrics.previousBreakpoint=t,l.pageMetrics.breakpoint=n;for(var r=0,i=e.groups.length;r<i;r++)e.groups[r]._onBreakpointChange(n,t);e.trigger(l.PageEvents.ON_BREAKPOINT_CHANGE,l.pageMetrics)}for(var o=n!==t,s=0,a=e.groups.length;s<a;s++)e.groups[s]._onResizeDebounced(o);e.trigger(l.PageEvents.ON_RESIZE_DEBOUNCED,l.pageMetrics)},!0)}},{key:"addKeyframe",value:function(e,t){var n=this.getGroupForTarget(e);return n.addKeyframe(e,t)}},{key:"getGroupForTarget",value:function(e){if(e._animInfo&&e._animInfo.group)return e._animInfo.group;for(var t=e;t;){if(t._animInfo&&t._animInfo.isGroup)return t._animInfo.group;t=t.parentElement}}},{key:"getControllerForTarget",value:function(e){return e._animInfo&&e._animInfo.controller?e._animInfo.controller:null}}]),t}(a);t.exports=new v},{"./KeyframeController":76,"./Keyframes/Keyframe":77,"./Keyframes/KeyframeCSSClass":78,"./Keyframes/KeyframeDiscreteEvent":79,"./Model/AnimSystemModel":80,"./ScrollGroup":89,"./TimeGroup":90,"@marcom/ac-event-emitter-micro":4,"@marcom/ac-raf-emitter/RAFEmitter":55,"@marcom/ac-raf-emitter/draw":60,"@marcom/ac-raf-emitter/external":61,"@marcom/ac-raf-emitter/update":64}],76:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./Model/AnimSystemModel"),l=(e("./Keyframes/Keyframe"),e("./Keyframes/KeyframeCSSClass")),u=(e("./Keyframes/KeyframeDiscreteEvent"),e("./Model/InferKeyframeFromProps")),c=e("./Model/UUID"),h=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,m=e("@marcom/decompose-css-transform"),f={update:e("@marcom/ac-raf-emitter/update"),external:e("@marcom/ac-raf-emitter/external"),draw:e("@marcom/ac-raf-emitter/draw")},p=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.uuid=c(),o.group=e,o.element=n,o._ownerIsElement=o.element instanceof Element,o._ownerIsElement?o.friendlyName=o.element.tagName+"."+Array.from(o.element.classList).join("."):o.friendlyName=o.element.friendlyName||o.uuid,o.element._animInfo=o.element._animInfo||new a.AnimInfo(e,o),o.element._animInfo.controller=o,o.tweenProps={},o.eventObject=new a.EventObject(o,null),o.needsStyleUpdate=!1,o.needsClassUpdate=!1,o.elementMetrics=o.group.metrics.add(o.element),o._parentElementMetrics=null,o.attributes=[],o.keyframes={},o._allKeyframes=[],o._activeKeyframes=[],o.keyframesRequiringDispatch=[],o.updateCachedValuesFromElement(),o.boundsMin=0,o.boundsMax=0,o}return o(t,e),s(t,[{key:"destroy",value:function(){this.element._animInfo&&this.element._animInfo.controller===this&&(this.element._animInfo.controller=null),this.eventObject.controller=null,this.eventObject.element=null,this.eventObject.keyframe=null,this.eventObject.tweenProps=null,this.elementMetrics.destroy(),this.group=null;for(var e=0;e<this._allKeyframes.length;e++)this._allKeyframes[e].destroy();this._allKeyframes=null,this._activeKeyframes=null,this.attributes=null,this.keyframes=null}},{key:"updateCachedValuesFromElement",value:function(){if(this._ownerIsElement){var e=getComputedStyle(this.element),t=m(this.element,!0),n=a.KeyframeDefaults.epsilon,r=!1;this.tweenProps.x=new a.TargetValue(t.translation[0],n,r),this.tweenProps.y=new a.TargetValue(t.translation[1],n,r),this.tweenProps.z=new a.TargetValue(t.translation[2],n,r),this.tweenProps.rotation=new a.TargetValue(t.eulerRotation[2],n,r),this.tweenProps.scale=new a.TargetValue(t.scale[0],n,r),this.tweenProps.scaleX=new a.TargetValue(t.scale[0],n,r),this.tweenProps.scaleY=new a.TargetValue(t.scale[1],n,r),this.tweenProps.opacity=new a.TargetValue(parseFloat(e.opacity),n,r)}}},{key:"addKeyframe",value:function(e){var t=u(e);if(!t)throw new Error("AnimSystem Cannot create keyframe for from options `"+e+"`");var n=new t(this,e);return n.parseOptions(e),n.id=this._allKeyframes.length,this._allKeyframes.push(n),n}},{key:"needsUpdate",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var n=this.attributes[e],r=this.tweenProps[n],i=Math.abs(r.current-r.target);if(i>r.epsilon)return!0}return!1}},{key:"updateLocalProgress",value:function(e){for(var t=0,n=this.attributes.length;t<n;t++){var r=this.attributes[t],i=this.keyframes[this.attributes[t]];if(1!==i.length){var o=this.getNearestKeyframeForAttribute(e.local,r);o&&o.updateLocalProgress(e.local)}else i[0].updateLocalProgress(e.local)}}},{key:"reconcile",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var n=this.attributes[e],r=this.getNearestKeyframeForAttribute(this.group.timelines.local,n);r.updateLocalProgress(this.group.timelines.local),r.snapAtCreation&&r.reconcile(n)}}},{key:"determineActiveKeyframes",value:function(e){var t=this;e=e||Array.from(document.documentElement.classList);var n=this._activeKeyframes,r=this.attributes;this._activeKeyframes=[],this.attributes=[],this.keyframes={};for(var i=0;i<this._allKeyframes.length;i++){var o=this._allKeyframes[i];if(o.setEnabled(e)){this._activeKeyframes.push(o);for(var s in o.animValues)this.keyframes[s]=this.keyframes[s]||[],this.keyframes[s].push(o),this.attributes.indexOf(s)===-1&&this.attributes.push(s)}}var a=n.filter(function(e){return t._activeKeyframes.indexOf(e)===-1});if(0!==a.length){var u=r.filter(function(e){return t.attributes.indexOf(e)===-1});0!==u.length&&f.external(function(){var e=["x","y","z","scale","scaleX","scaleY","rotation"],n=u.filter(function(t){return e.indexOf(t)!==-1});n.length!==-1&&t.element.style.removeProperty("transform");for(var r=0,i=u.length;r<i;++r){var o=u[r],s=t.tweenProps[o];s.current=s.target=s.initialValue,"opacity"===o&&t.element.style.removeProperty("opacity")}for(var c=0,h=a.length;c<h;++c){var m=a[c];m instanceof l&&m._unapply()}},!0)}}},{key:"onDOMRead",value:function(e){for(var t=0,n=this.attributes.length;t<n;t++){var r=this.attributes[t],i=this.getNearestKeyframeForAttribute(e.local,r);i&&i.onDOMRead(r)}}},{key:"onDOMWrite",value:function(e){this._ownerIsElement?this.onDOMWriteForElement(e):this.onDOMWriteForObject(e),this.handleEventDispatch()}},{key:"onDOMWriteForObject",value:function(e){for(var t=0,n=this.attributes.length;t<n;t++){var r=this.attributes[t];this.element[r]=this.tweenProps[r].current}}},{key:"onDOMWriteForElement",value:function(e){var t=this.tweenProps,n="";if("undefined"!=typeof this.keyframes.scale)n+="scale("+t.scale.current+","+t.scale.current+") ";else{var r="undefined"!=typeof this.keyframes.scaleX,i="undefined"!=typeof this.keyframes.scaleY;(r||i)&&(n+="scale("+t.scaleX.current+","+t.scaleY.current+") ")}if("undefined"!=typeof this.keyframes.z?n+="translate3d("+t.x.current+"px,"+t.y.current+"px, "+t.z.current+"px)":"undefined"==typeof this.keyframes.x&&"undefined"==typeof this.keyframes.y||(n+="translate("+t.x.current+"px,"+t.y.current+"px)"),"undefined"!=typeof this.keyframes.rotation?n+="rotate("+t.rotation.current+"deg) ":("undefined"!=typeof this.keyframes.rotationX&&(n+="rotateX("+t.rotationX.current+"deg) "),"undefined"!=typeof this.keyframes.rotationY&&(n+="rotateY("+t.rotationY.current+"deg) "),"undefined"!=typeof this.keyframes.rotationZ&&(n+="rotateZ("+t.rotationZ.current+"deg) ")),""!==n&&(this.element.style.transform=n),"undefined"!=typeof this.keyframes.opacity&&(this.element.style.opacity=t.opacity.current),this.needsStyleUpdate){for(var o in this.tweenProps.targetStyles)null!==this.tweenProps.targetStyles[o]&&(this.element.style[o]=this.tweenProps.targetStyles[o]),this.tweenProps.targetStyles[o]=null;this.needsStyleUpdate=!1}this.needsClassUpdate&&(this.tweenProps.targetClasses.add.length>0&&this.element.classList.add.apply(this.element.classList,this.tweenProps.targetClasses.add),this.tweenProps.targetClasses.remove.length>0&&this.element.classList.remove.apply(this.element.classList,this.tweenProps.targetClasses.remove),this.tweenProps.targetClasses.add.length=0,this.tweenProps.targetClasses.remove.length=0,this.needsClassUpdate=!1)}},{key:"handleEventDispatch",value:function(){if(0!==this.keyframesRequiringDispatch.length){for(var e=0,t=this.keyframesRequiringDispatch.length;e<t;e++){var n=this.keyframesRequiringDispatch[e];n.needsEventDispatch=!1,this.eventObject.keyframe=n,this.eventObject.pageMetrics=a.pageMetrics,this.eventObject.event=n.event,this.trigger(n.event,this.eventObject)}this.keyframesRequiringDispatch.length=0}}},{key:"updateAnimationConstraints",value:function(){for(var e=this,t=0,n=this._activeKeyframes.length;t<n;t++)this._activeKeyframes[t].updateAnimationConstraints();this.attributes.forEach(function(t){1!==e.keyframes[t].length&&e.keyframes[t].sort(a.KeyframeComparison)}),this.updateDeferredPropertyValues()}},{key:"refreshMetrics",value:function(){var e=this,t=this._activeKeyframes.map(function(e){return e.relativeTo}),n=new Set(t);n.add(this.element),n.forEach(function(t){return e.group.metrics.refreshMetrics(t)}),this.group.keyframesDirty=!0,this.group.requestDOMChange()}},{key:"updateDeferredPropertyValues",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var n=this.attributes[e],r=this.keyframes[n],i=r[0];if(!(i.keyframeType>a.KeyframeTypes.InterpolationForward))for(var o=0;o<r.length;o++){var s=r[o];if(null===s.jsonProps[n][0]){if(0===o)throw new RangeError("AnimSystem - earliest keyframe cannot defer it's beginning value! "+n+":[null,"+s.jsonProps[n][1]+"]");s.animValues[n][0]=r[o-1].animValues[n][1]}if(null===s.jsonProps[n][1]){if(o===t-1)throw new RangeError("AnimSystem - last keyframe cannot defer it's end value! "+n+":["+s.jsonProps[n][0]+",null]");s.animValues[n][1]=r[o+1].animValues[n][0]}}}}},{key:"getBounds",value:function(e){this.boundsMin=Number.MAX_VALUE,this.boundsMax=-Number.MAX_VALUE;for(var t=0,n=this.attributes.length;t<n;t++)for(var r=this.keyframes[this.attributes[t]],i=0;i<r.length;i++){var o=r[i];this.boundsMin=Math.min(o.start,this.boundsMin),this.boundsMax=Math.max(o.end,this.boundsMax),e.min=Math.min(o.start,e.min),e.max=Math.max(o.end,e.max)}}},{key:"getNearestKeyframeForAttribute",value:function(e,t){var n=null,r=Number.POSITIVE_INFINITY,i=this.keyframes[t];if(void 0===i)return null;var o=i.length;if(0===o)return null;if(1===o)return i[0];for(var s=0;s<o;s++){var a=i[s];if(a.isInRange(e)){n=a;break}var l=Math.min(Math.abs(e-a.start),Math.abs(e-a.end));l<r&&(r=l,n=a)}return n}},{key:"getAllKeyframesForAttribute",value:function(e){return this.keyframes[e]}},{key:"updateAnimation",value:function(e,t){var n=this;e.parseOptions(t),e.updateAnimationConstraints(),this.group.updateBounds(),this.group._onScroll(this.group.getPosition()),this.group.requestDOMChange(),f.update(function(){n.group.trigger(a.EVENTS.ON_KEYFRAME_UPDATED,e)},!0)}}]),t}(h);Object.defineProperty(p.prototype,"parentElementMetrics",{get:function(){return null===this._parentElementMetrics&&(this._parentElementMetrics=this.group.metrics.add(this.element.parentElement)),this._parentElementMetrics}}),t.exports=p},{"./Keyframes/Keyframe":77,"./Keyframes/KeyframeCSSClass":78,"./Keyframes/KeyframeDiscreteEvent":79,"./Model/AnimSystemModel":80,"./Model/InferKeyframeFromProps":83,"./Model/UUID":84,"@marcom/ac-event-emitter-micro":4,"@marcom/ac-raf-emitter/draw":60,"@marcom/ac-raf-emitter/external":61,"@marcom/ac-raf-emitter/update":64,"@marcom/decompose-css-transform":100}],77:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("../Model/AnimSystemModel"),s=e("@marcom/sm-math-utils"),a=e("../Model/EasingFunctions"),l=e("../Model/UnitBezier"),u=function(){function e(t,n){r(this,e),this.controller=t,this.relativeTo=t.element,this.jsonProps=n,this.ease=o.KeyframeDefaults.ease,this.easeFunctionString=o.KeyframeDefaults.easeFunctionString,this.easeFunction=a[this.easeFunctionString],
this.start=0,this.end=0,this.localT=0,this.id=0,this.event="",this.needsEventDispatch=!1,this.snapAtCreation=!1,this.isEnabled=!1,this.animValues={},this.breakpointMask="SMLX",this.disabledWhen="",this.keyframeType=o.KeyframeTypes.Interpolation,this.hold=!1}return i(e,[{key:"destroy",value:function(){this.controller=null,this.jsonProps=null,this.easeFunction=null,this.animValues=null}},{key:"parseOptions",value:function(e){if(this.jsonProps=e,""!==e.relativeTo&&e.relativeTo?e.relativeTo&&(this.relativeTo=this.controller.group.element.querySelector(e.relativeTo)||document.querySelector(e.relativeTo),null===this.relativeTo&&(console.warn("Keyframe for",this.controller.element.className," .relativeTo failed to find "+e.relativeTo+"' via querySelector"),this.relativeTo=this.controller.element),this.controller.group.metrics.add(this.relativeTo)):this.relativeTo=this.controller.element,e.ease?this.ease=parseFloat(e.ease):e.ease=this.ease,e.snapAtCreation?this.snapAtCreation=e.snapAtCreation:e.snapAtCreation=this.snapAtCreation,e.easeFunction?this.easeFunction=e.easeFunction:e.easeFunction=this.easeFunctionString,e.breakpointMask?this.breakpointMask=e.breakpointMask:e.breakpointMask=this.breakpointMask,e.disabledWhen?this.disabledWhen=e.disabledWhen:e.disabledWhen=this.disabledWhen,e.hold?this.hold=e.hold:e.hold=this.hold,this.easeFunction=a[e.easeFunction],!a.hasOwnProperty(e.easeFunction)){var t=l.fromCSSString(e.easeFunction);t?this.easeFunction=t:console.error("Keyframe parseOptions cannot find EasingFunction named '"+e.easingFunction+"'")}for(var n in e)if(o.KeyframeJSONReservedWords.indexOf(n)===-1){var r=e[n];if(Array.isArray(r)){if(this.animValues[n]=this.controller.group.expressionParser.parse(this,r),void 0===this.controller.tweenProps[n]||!this.controller._ownerIsElement){var i=0;this.controller._ownerIsElement||(i=this.controller.element[n]);var s=new o.TargetValue(i,o.KeyframeDefaults.epsilon,this.snapAtCreation);this.controller.tweenProps[n]=s}var u=this.controller.tweenProps[n];if(e.epsilon)u.epsilon=e.epsilon;else{var c=Math.abs(this.animValues[n][0]-this.animValues[n][1]),h=Math.min(.001*c,u.epsilon,o.KeyframeDefaults.epsilon);u.epsilon=Math.max(h,1e-4)}}}this.keyframeType=this.hold?o.KeyframeTypes.InterpolationForward:o.KeyframeTypes.Interpolation,e.event&&(this.event=e.event)}},{key:"overwriteProps",value:function(e){this.animValues={};var t=Object.assign({},this.jsonProps,e);this.controller.group.keyframesDirty=!0,this.controller.updateAnimation(this,t)}},{key:"updateLocalProgress",value:function(e){if(this.start===this.end||e>this.end)return this.localT=1,void(this.curvedT=this.easeFunction(this.localT));var t=(e-this.start)/(this.end-this.start),n=this.hold?this.localT:0;this.localT=s.clamp(t,n,1),this.curvedT=this.easeFunction(this.localT)}},{key:"reconcile",value:function(e){var t=this.animValues[e],n=this.controller.tweenProps[e];n.initialValue=t[0],n.target=t[0]+this.curvedT*(t[1]-t[0]),n.current!==n.target&&(n.current=n.target,this.needsEventDispatch||(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this)))}},{key:"reset",value:function(e){this.localT=e||0;var t=this.ease;this.ease=1;for(var n in this.animValues)this.reconcile(n);this.ease=t}},{key:"onDOMRead",value:function(e){var t=this.animValues[e],n=this.controller.tweenProps[e];n.target=t[0]+this.curvedT*(t[1]-t[0]);var r=n.current;n.current+=(n.target-n.current)*this.ease;var i=n.current-n.target;i<n.epsilon&&i>-n.epsilon&&(n.current=n.target,i=0),""===this.event||this.needsEventDispatch||(i>n.epsilon||i<-n.epsilon||0===i&&r!==n.current)&&(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this))}},{key:"isInRange",value:function(e){return e>=this.start&&e<=this.end}},{key:"setEnabled",value:function(e){e=e||Array.from(document.documentElement.classList);var t=this.breakpointMask.indexOf(o.pageMetrics.breakpoint)!==-1,n=!1;return""!==this.disabledWhen&&(n=e.indexOf(this.disabledWhen)!==-1),this.isEnabled=t&&!n,this.isEnabled}},{key:"updateAnimationConstraints",value:function(){this.start=this.controller.group.timeParser.parse(this,this.jsonProps.start),this.end=this.controller.group.timeParser.parse(this,this.jsonProps.end),this.updateAnimatedValueConstraints()}},{key:"updateAnimatedValueConstraints",value:function(){for(var e in this.animValues){var t=this.jsonProps[e];this.animValues[e]=this.controller.group.expressionParser.parse(this,t)}}}]),e}();u.DATA_ATTRIBUTE="data-anim-tween",t.exports=u},{"../Model/AnimSystemModel":80,"../Model/EasingFunctions":81,"../Model/UnitBezier":85,"@marcom/sm-math-utils":102}],78:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./Keyframe"),u=e("../Model/AnimSystemModel.js"),c=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.keyframeType=u.KeyframeTypes.CSSClass,o._triggerType=t.TRIGGER_TYPE_CSS_CLASS,o.cssClass="",o.friendlyName="",o.style={on:null,off:null},o.toggle=!1,o.isApplied=!1,o}return o(t,e),a(t,[{key:"parseOptions",value:function(e){if(!this.controller._ownerIsElement)throw new TypeError("CSS Keyframes cannot be applied to JS Objects");if(e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0!==e.toggle&&(this.toggle=e.toggle),void 0!==e.cssClass)this._triggerType=t.TRIGGER_TYPE_CSS_CLASS,this.cssClass=e.cssClass,this.friendlyName="."+this.cssClass,void 0===this.controller.tweenProps.targetClasses&&(this.controller.tweenProps.targetClasses={add:[],remove:[]});else{if(void 0===e.style||!this.isValidStyleProperty(e.style))throw new TypeError("KeyframeCSSClass no 'cssClass` property found. If using `style` property its also missing or invalid");if(this._triggerType=t.TRIGGER_TYPE_STYLE_PROPERTY,this.style=e.style,this.friendlyName="style",this.toggle=void 0!==this.style.off||this.toggle,this.toggle&&void 0===this.style.off){this.style.off={};for(var n in this.style.on)this.style.off[n]=""}void 0===this.controller.tweenProps.targetStyles&&(this.controller.tweenProps.targetStyles={})}if(void 0===e.end&&(e.end=e.start),e.toggle=this.toggle,this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.isApplied=this.controller.element.classList.contains(this.cssClass);else{var r=getComputedStyle(this.controller.element);this.isApplied=!0;for(var i in this.style.on)if(r[i]!==this.style.on[i]){this.isApplied=!1;break}}l.prototype.parseOptions.call(this,e),this.animValues[this.friendlyName]=[0,0],void 0===this.controller.tweenProps[this.friendlyName]&&(this.controller.tweenProps[this.friendlyName]=new u.TargetValue(0,1,(!1))),this.keyframeType=u.KeyframeTypes.CSSClass}},{key:"updateLocalProgress",value:function(e){this.isApplied&&!this.toggle||(this.start!==this.end?!this.isApplied&&e>=this.start&&e<=this.end?this._apply():this.isApplied&&this.toggle&&(e<this.start||e>this.end)&&this._unapply():!this.isApplied&&e>=this.start?this._apply():this.isApplied&&this.toggle&&e<this.start&&this._unapply())}},{key:"_apply",value:function(){if(this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.add.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var e in this.style.on)this.controller.tweenProps.targetStyles[e]=this.style.on[e];this.controller.needsStyleUpdate=!0}this.isApplied=!0}},{key:"_unapply",value:function(){if(this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.remove.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var e in this.style.off)this.controller.tweenProps.targetStyles[e]=this.style.off[e];this.controller.needsStyleUpdate=!0}this.isApplied=!1}},{key:"isValidStyleProperty",value:function(e){if(!e.hasOwnProperty("on"))return!1;if("object"!==s(e.on))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");if(this.toggle&&e.hasOwnProperty("off")&&"object"!==s(e.off))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");return!0}},{key:"reconcile",value:function(e,t){}},{key:"onDOMRead",value:function(e,t){}},{key:"updateAnimatedValueConstraints",value:function(){}}]),t}(l);c.TRIGGER_TYPE_CSS_CLASS=0,c.TRIGGER_TYPE_STYLE_PROPERTY=1,c.DATA_ATTRIBUTE="data-anim-classname",t.exports=c},{"../Model/AnimSystemModel.js":80,"./Keyframe":77}],79:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function h(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:h(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=e("./Keyframe"),u=e("../Model/AnimSystemModel.js"),c=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.keyframeType=u.KeyframeTypes.Event,o.isApplied=!1,o.hasDuration=!1,o.isCurrentlyInRange=!1,o}return o(t,e),s(t,[{key:"parseOptions",value:function(e){e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.style=void 0,e.cssClass=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0===e.end&&(e.end=e.start),this.event=e.event,this.animValues[this.event]=[0,0],"undefined"==typeof this.controller.tweenProps[this.event]&&(this.controller.tweenProps[this.event]=new u.TargetValue(0,1,(!1))),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"parseOptions",this).call(this,e),this.keyframeType=u.KeyframeTypes.Event}},{key:"updateLocalProgress",value:function(e){if(this.hasDuration){var t=this.isCurrentlyInRange,n=e>=this.start&&e<=this.end;if(t===n)return;return n&&!t?this._trigger(this.event+":enter"):t&&!n&&this._trigger(this.event+":exit"),void(this.isCurrentlyInRange=n)}!this.isApplied&&e>=this.start?(this._trigger(this.event),this.isApplied=!0):this.isApplied&&e<this.start&&(this._trigger(this.event+":reverse"),this.isApplied=!1)}},{key:"_trigger",value:function(e){this.controller.eventObject.event=e,this.controller.eventObject.keyframe=this,this.controller.trigger(e,this.controller.eventObject)}},{key:"updateAnimationConstraints",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateAnimationConstraints",this).call(this),this.hasDuration=this.start!==this.end}},{key:"onDOMRead",value:function(e,t){}},{key:"reconcile",value:function(e,t){}},{key:"updateAnimatedValueConstraints",value:function(){}}]),t}(l);c.DATA_ATTRIBUTE="data-anim-event",t.exports=c},{"../Model/AnimSystemModel.js":80,"./Keyframe":77}],80:[function(e,t,n){"use strict";var r={GUI_INSTANCE:null,ANIM_INSTANCE:null,VIEWPORT_EMITTER_ELEMENT:void 0,LOCAL_STORAGE_KEYS:{GuiPosition:"GuiPosition-0"},DOCUMENT_ELEMENT_CLASSES:[],RESIZE_TIMEOUT:-1,BREAKPOINTS:[{name:"S",longName:"small",mediaQuery:"only screen and (max-width: 735px)"},{name:"M",longName:"medium",mediaQuery:"only screen and (max-width: 1068px)"},{name:"L",longName:"xlarge",mediaQuery:"only screen and (min-width: 1442px)"},{name:"L",longName:"large",mediaQuery:"only screen and (min-width: 1069px)"}],getBreakpoint:function(){for(var e=0;e<r.BREAKPOINTS.length;e++){var t=r.BREAKPOINTS[e],n=window.matchMedia(t.mediaQuery);if(n.matches)return t.name}},KeyframeDefaults:{ease:.1,epsilon:.05,easeFunctionString:"linear",easeFunction:"linear",hold:!1,snapAtCreation:!1,toggle:!1,breakpointMask:"SMLX",event:"",disabledWhen:"",cssClass:""},KeyframeTypes:{Interpolation:0,InterpolationForward:1,CSSClass:2,Event:3},EVENTS:{ON_DOM_KEYFRAMES_CREATED:"ON_DOM_KEYFRAMES_CREATED",ON_DOM_GROUPS_CREATED:"ON_DOM_GROUPS_CREATED",ON_GROUP_CREATED:"ON_GROUP_CREATED",ON_KEYFRAME_UPDATED:"ON_KEYFRAME_UPDATED",ON_TIMELINE_UPDATE:"ON_TIMELINE_UPDATE"},PageEvents:{ON_SCROLL:"ON_SCROLL",ON_RESIZE_IMMEDIATE:"ON_RESIZE_IMMEDIATE",ON_RESIZE_DEBOUNCED:"ON_RESIZE_DEBOUNCED",ON_BREAKPOINT_CHANGE:"ON_BREAKPOINT_CHANGE"},KeyframeJSONReservedWords:["event","cssClass","style","relativeTo","start","end","epsilon","easeFunction","easing","breakpointMask"],TargetValue:function(e,t,n){this.epsilon=parseFloat(t),this.snapAtCreation=n,this.initialValue=e,this.target=e,this.current=e},Timeline:function(){this.local=0,this.localUnclamped=0},KeyFrames:function(e,t){this.a=e.top-t,this.a<0&&(this.a=e.top),this.b=e.top,this.d=e.bottom,this.c=Math.max(this.d-t,this.b)},pageMetrics:new function(){this.scrollX=0,this.scrollY=0,this.windowWidth=0,this.windowHeight=0,this.documentOffsetX=0,this.documentOffsetY=0,this.previousBreakpoint="",this.breakpoint=""},EventObject:function(e,t){this.controller=e,this.element=this.controller.element,this.keyframe=t,this.event="",this.tweenProps=this.controller.tweenProps},KeyframeComparison:function(e,t){return e.start<t.start?-1:e.start>t.start?1:0},AnimInfo:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isGroup=n,this.group=e,this.controller=t}};t.exports=r},{}],81:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function o(){r(this,o),this.linear=function(e){return e},this.easeInQuad=function(e){return e*e},this.easeOutQuad=function(e){return e*(2-e)},this.easeInOutQuad=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},this.easeInSin=function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)},this.easeOutSin=function(e){return Math.sin(Math.PI/2*e)},this.easeInOutSin=function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},this.easeInElastic=function(e){return 0===e?e:(.04-.04/e)*Math.sin(25*e)+1},this.easeOutElastic=function(e){return.04*e/--e*Math.sin(25*e)},this.easeInOutElastic=function(e){return(e-=.5)<0?(.02+.01/e)*Math.sin(50*e):(.02-.01/e)*Math.sin(50*e)+1},this.easeOutBack=function(e){return e-=1,e*e*(2.70158*e+1.70158)+1},this.easeInCubic=function(e){return e*e*e},this.easeOutCubic=function(e){return--e*e*e+1},this.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},this.easeInQuart=function(e){return e*e*e*e},this.easeOutQuart=function(e){return 1- --e*e*e*e},this.easeInOutQuart=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},this.easeInQuint=function(e){return e*e*e*e*e},this.easeOutQuint=function(e){return 1+--e*e*e*e*e},this.easeInOutQuint=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};t.exports=new i},{}],82:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./AnimSystemModel"),s=window.Symbol||function(){var e=0;return function(){return++e+""}}(),a=function(){function e(){r(this,e),this._symbols=[],this._lut={}}return i(e,[{key:"destroy",value:function(){for(var e=0,t=this._symbols.length;e<t;e++){var n=this._lut[this._symbols[e]];n.el._animSymbol=null,n.el=null}this._lut=null}},{key:"add",value:function(e){if(void 0===e._animSymbol&&(e._animSymbol=s()),void 0===this._lut[e._animSymbol]){var t=new l(e);this._refreshMetrics(t),this._lut[e._animSymbol]=t,this._symbols.push(e._animSymbol)}return this._lut[e._animSymbol]}},{key:"get",value:function(e){if(void 0===e._animSymbol)throw"ElementMetricsLookup Attempting to retrieve info on element which is not being tracked.";return this._lut[e._animSymbol]}},{key:"refreshAll",value:function(){for(var e=0,t=this._symbols.length;e<t;e++){var n=this._lut[this._symbols[e]];this._refreshMetrics(n)}}},{key:"refreshMetrics",value:function(e){var t=this.get(e);return t?this._refreshMetrics(t):null}},{key:"_refreshMetrics",value:function(e){var t=e.el;if(t instanceof Element){if(void 0===t.offsetWidth){var n=t.getBoundingClientRect();return e.width=n.width,e.height=n.height,e.top=o.pageMetrics.scrollY+n.top,e.left=o.pageMetrics.scrollX+n.left,e.right=e.left+e.width,e.bottom=e.top+e.height,e}e.width=t.offsetWidth,e.height=t.offsetHeight,e.top=o.pageMetrics.documentOffsetY,e.left=o.pageMetrics.documentOffsetX;for(var r=t;r;)e.top+=r.offsetTop,e.left+=r.offsetLeft,r=r.offsetParent;return e.right=e.left+e.width,e.bottom=e.top+e.height,e}}}]),e}(),l=function(){function e(t){r(this,e),this.el=t,this.top=0,this.bottom=0,this.left=0,this.right=0,this.height=0,this.width=0}return i(e,[{key:"toString",value:function(){return"top:"+this.top+", bottom:"+this.bottom+", left:"+this.left+", right:"+this.right+", height:"+this.height+", width:"+this.width}},{key:"toObject",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right,height:this.height,width:this.width}}}]),e}();t.exports=a},{"./AnimSystemModel":80}],83:[function(e,t,n){"use strict";var r=e("./AnimSystemModel"),i=e("../Keyframes/Keyframe"),o=e("../Keyframes/KeyframeDiscreteEvent"),s=e("../Keyframes/KeyframeCSSClass"),a=function(e){for(var t in e){var n=e[t];if(r.KeyframeJSONReservedWords.indexOf(t)===-1&&Array.isArray(n))return!0}return!1};t.exports=function(e){if(void 0!==e.cssClass||void 0!==e.style){if(a(e))throw"CSS Keyframes cannot tween values, please use multiple keyframes instead";return s}if(a(e))return i;if(e.event)return o;throw"Could not determine tween type based on "+JSON.stringify(e)}},{"../Keyframes/Keyframe":77,"../Keyframes/KeyframeCSSClass":78,"../Keyframes/KeyframeDiscreteEvent":79,"./AnimSystemModel":80}],84:[function(e,t,n){"use strict";t.exports=function(){for(var e="",t=0;t<8;t++){var n=16*Math.random()|0;8!==t&&12!==t&&16!==t&&20!==t||(e+="-"),e+=(12===t?4:16===t?3&n|8:n).toString(16)}return e}},{}],85:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=1e-5,s=Math.abs,a=5,l=function(){function e(t,n,i,o){r(this,e),this.cp=new Float32Array(6),this.cp[0]=3*t,this.cp[1]=3*(i-t)-this.cp[0],this.cp[2]=1-this.cp[0]-this.cp[1],this.cp[3]=3*n,this.cp[4]=3*(o-n)-this.cp[3],this.cp[5]=1-this.cp[3]-this.cp[4]}return i(e,[{key:"sampleCurveX",value:function(e){return((this.cp[2]*e+this.cp[1])*e+this.cp[0])*e}},{key:"sampleCurveY",value:function(e){return((this.cp[5]*e+this.cp[4])*e+this.cp[3])*e}},{key:"sampleCurveDerivativeX",value:function(e){return(3*this.cp[2]*e+2*this.cp[1])*e+this.cp[0]}},{key:"solveCurveX",value:function(e){var t,n,r,i,l,u;for(r=e,u=0;u<a;u++){if(i=this.sampleCurveX(r)-e,s(i)<o)return r;if(l=this.sampleCurveDerivativeX(r),s(l)<o)break;r-=i/l}if(t=0,n=1,r=e,r<t)return t;if(r>n)return n;for(;t<n;){if(i=this.sampleCurveX(r),s(i-e)<o)return r;e>i?t=r:n=r,r=.5*(n-t)+t}return r}},{key:"solve",value:function(e){return this.sampleCurveY(this.solveCurveX(e))}}]),e}(),u=/\d*\.?\d+/g;l.fromCSSString=function(e){var t=e.match(u);if(4!==t.length)throw"UnitBezier could not convert "+e+" to cubic-bezier";var n=t.map(Number),r=new l(n[0],n[1],n[2],n[3]);return r.solve.bind(r)},t.exports=l},{}],86:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("../Model/AnimSystemModel"),s=e("./Operations"),a=/([-|\+])?(\d+\.?\d*)(px|vh|vw|pw|ph|\%w|\%h|rw|rh|\%)?|(-|\+|\*|\/)/g,l=/^[-+]?(?:[0-9]{0,30}\.)?[0-9]{1,30}(?:[Ee][-+]?[1-2]?[0-9])?$/g,u=function(){function e(t){r(this,e),this.group=t}return i(e,[{key:"parse",value:function(e,t){if(Array.isArray(t))return this.parseArray(e,t);throw new Error("Keyframe value `"+t+"` is not supported. Only arrays in the form of [start,end] are currently supported")}},{key:"parseArray",value:function(e,t){var n=this.parseExpression(e,t[0]),r=this.parseExpression(e,t[1]);return[n,r]}},{key:"parseExpression",value:function(e,t){if(null===t)return 0;if("number"==typeof t)return t;for(var n=5,r=void 0;(r=t.indexOf("("))!==-1&&--n>0;){var i=this.captureParenthesis(t,r),o=this.parseExpression(e,i);t=t.replace("("+i+")",o)}for(var l=void 0,u=[];null!==(l=a.exec(t));)if(l.index===a.lastIndex&&a.lastIndex++,l[4])u.push(s.GetOpCode(l[4]));else{var c=l[1],h=parseFloat(l[2]),m=l[3];"-"===c&&(h*=-1);var f=this.parseSplitUnit(e,h,m);u.push(f)}var p=u.length;if(3===p&&"function"==typeof u[1])return u[1](u[0],u[2]);for(var d=0;d<p;d++)if("function"==typeof u[d]&&1===u[d].priority){var v=u[d-1],y=u[d+1],_=u[d](v,y);u[d-1]=null,u[d+0]=null,u[d+1]=_,d+=1}for(var b=0;null==u[b]&&b<p;)b+=1;var g=u[b],w=null,E=null;for(b+=1;b<p;b++)null!==u[b]?u[b]instanceof Function?w=u[b]:(null===E&&(E=u[b]),null!==E&&(w=w||s.add,g=w(g,E),w=null,E=null)):b+=1;return g}},{key:"parseSplitUnit",value:function(e,t,n){if("undefined"==typeof n)return parseFloat(t);switch(n){case"vh":return.01*t*o.pageMetrics.windowHeight;case"%":return.01*t*e.controller.elementMetrics.height;case"px":return t;case"rh":return.01*t*this.group.metrics.get(e.relativeTo).height;case"vw":return.01*t*o.pageMetrics.windowWidth;case"rw":return.01*t*this.group.metrics.get(e.relativeTo).width;case"%w":return.01*t*e.controller.elementMetrics.width;case"%h":return.01*t*e.controller.elementMetrics.height;case"pw":return.01*t*e.controller.parentElementMetrics.width;case"ph":return.01*t*e.controller.parentElementMetrics.height;default:throw new Error("Keyframe no strategy found for unit `"+n+"` only `vh, vw, %, ph, pw` are supported")}}},{key:"captureParenthesis",value:function(e,t){for(var n="",r=0,i=!1,o=e.length,s=t;s<o;s++)if("("===e[s]?(r+=1,i&&(n+=e[s]),i=!0):")"===e[s]?(r-=1,0!==r&&(n+=e[s])):i&&(n+=e[s]),i&&0===r)return n}},{key:"isUnitlessNumber",value:function(e){return String(e).match(l)}},{key:"destroy",value:function(){this.group=null}},{key:"logParts",value:function(e){console.log(e.reduce(function(e,t){return"function"==typeof t?e+t.friendlyName+" ":e+(t+" ")},""))}}]),e}();t.exports=u},{"../Model/AnimSystemModel":80,"./Operations":87}],87:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function o(){r(this,o),this.sub=function(e,t){return e-t},this.add=function(e,t){return e+t},this.mul=function(e,t){return e*t},this.div=function(e,t){return e/t},this.add.friendlyName="add",this.sub.friendlyName="sub",this.mul.friendlyName="mul",this.div.friendlyName="div",this.add.priority=0,this.sub.priority=0,this.mul.priority=1,this.div.priority=1,this.GetOpCode=function(e){switch(e){case"-":return this.sub;case"+":return this.add;case"*":return this.mul;case"/":return this.div;default:throw new Error('AnimSystem.parsing.Operations - op code "'+e+"\" was found. Only '+ - * /' are supported. Check expression for typos/spacing issues")}}};t.exports=new i},{}],88:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r(this,e),this.group=t,this.groupIsTimeBased=n}return i(e,[{key:"parse",value:function(e,t){if("number"==typeof t)return t;var n=this.groupIsTimeBased?0:this.group.metrics.get(e.relativeTo).top,r=this.group.expressionParser.parseExpression(e,t),i=r+n;return this.group.convertScrollPositionToTValue(i)}},{key:"destroy",value:function(){this.group=null}}]),e}();t.exports=o},{}],89:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function y(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:y(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,u=e("@marcom/sm-math-utils"),c=e("./Model/AnimSystemModel"),h=e("./Model/ElementMetricsLookup"),m=e("./Parsing/ExpressionParser"),f=e("./Parsing/TimeParser"),p=(e("./Keyframes/Keyframe"),e("./KeyframeController")),d={create:e("@marcom/ac-raf-emitter/RAFEmitter"),update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")},v=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.anim=n,o.element=e,o.name=o.name||e.getAttribute("data-anim-scroll-group"),o.isEnabled=!0,o.timelines=new c.Timeline,o.metrics=new h,o.metrics.add(o.element),o.expressionParser=new m(o),o.timeParser=new f(o),o.boundsMin=0,o.boundsMax=0,o.lastPosition=Math.random(),o.keyframesDirty=!1,o.keyFrames=new c.KeyFrames(o.metrics.get(o.element),c.pageMetrics.windowHeight),o.keyframeControllers=[],o.updateProgress(o.getPosition()),o.setupRAFEmitter(),o.gui=null,o.finalizeInit(),o}return o(t,e),s(t,[{key:"finalizeInit",value:function(){this.element._animInfo=new c.AnimInfo(this,null,(!0))}},{key:"destroy",value:function(){this.expressionParser.destroy(),this.expressionParser=null,this.timeParser.destroy(),this.timeParser=null;for(var e=0,n=this.keyframeControllers.length;e<n;e++)this.keyframeControllers[e].destroy();this.timelines=null,this.keyFrames=null,a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"setupRAFEmitter",value:function(){this._rafEmitter=new d.create,this.onDOMRead=this.onDOMRead.bind(this),this.onDOMWrite=this.onDOMWrite.bind(this),this._rafEmitter.on("update",this.onDOMRead),this._rafEmitter.on("draw",this.onDOMWrite)}},{key:"requestDOMChange",value:function(){return!!this.isEnabled&&this._rafEmitter.run()}},{key:"onDOMRead",value:function(){this.keyframesDirty&&this.onKeyframesDirty();for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMRead(this.timelines)}},{key:"onDOMWrite",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMWrite(this.timelines);this.needsUpdate()&&this.requestDOMChange()}},{key:"needsUpdate",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)if(this.keyframeControllers[e].needsUpdate())return!0;return this.keyframesDirty}},{key:"addKeyframe",value:function(e,t){var n=this.anim.getControllerForTarget(e);return null===n&&(n=new p(this,e),this.keyframeControllers.push(n)),this.keyframesDirty=!0,this.requestDOMChange(),n.addKeyframe(t)}},{key:"onKeyframeUpdated",value:function(e){this.updateBounds(),this._onScroll(this.getPosition()),this.requestDOMChange()}},{key:"onKeyframesDirty",value:function(){this.determineActiveKeyframes();for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].updateAnimationConstraints();this.updateProgress(this.getPosition()),this.updateBounds(),this.timelines.local=u.clamp(this.timelines.localUnclamped,this.boundsMin,this.boundsMax);var n=this.getPosition();this._onScroll(n),this.gui&&this.gui.create(),this.keyframesDirty=!1}},{key:"reconcile",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].reconcile()}},{key:"determineActiveKeyframes",value:function(e){e=e||Array.from(document.documentElement.classList);for(var t=0,n=this.keyframeControllers.length;t<n;t++)this.keyframeControllers[t].determineActiveKeyframes(e)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=.1);for(var e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},t=0,n=this.keyframeControllers.length;t<n;t++)this.keyframeControllers[t].getBounds(e);var r=this.convertTValueToScrollPosition(e.min),i=this.convertTValueToScrollPosition(e.max);i-r<c.pageMetrics.windowHeight?(e.min=this.convertScrollPositionToTValue(r-.5*c.pageMetrics.windowHeight),e.max=this.convertScrollPositionToTValue(i+.5*c.pageMetrics.windowHeight)):(e.min-=.001,e.max+=.001),this.boundsMin=e.min,this.boundsMax=e.max,this.lastPosition=u.lerp(Math.random(),this.boundsMin,this.boundsMax)}},{key:"_onBreakpointChange",value:function(e,t){this.keyframesDirty=!0,this.requestDOMChange()}},{key:"_onResizeDebounced",value:function(e){if(this.isEnabled&&(this.metrics.refreshAll(),this.keyFrames=new c.KeyFrames(this.metrics.get(this.element),c.pageMetrics.windowHeight),this.hasDuration())){for(var t=0,n=this.keyframeControllers.length;t<n;t++)this.keyframeControllers[t].updateAnimationConstraints();this.updateProgress(this.getPosition()),this.updateBounds(),e&&(this.lastPosition=u.randFloat(this.boundsMin,this.boundsMax)),(e||this.timelines.localUnclamped>=this.boundsMin&&this.timelines.localUnclamped<=this.boundsMax)&&this._onScroll(this.getPosition())}}},{key:"updateProgress",value:function(e){return this.hasDuration()?void(this.timelines.localUnclamped=u.map(e,this.keyFrames.a,this.keyFrames.d,0,1)):void(this.timelines.local=this.timelines.localUnclamped=0)}},{key:"performTimelineDispatch",value:function(){if(this.lastPosition!==this.timelines.local){this.trigger(c.EVENTS.ON_TIMELINE_UPDATE,this.timelines.local);
for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].updateLocalProgress(this.timelines)}null!==this.gui&&this.gui.onScrollUpdate(this.timelines)}},{key:"_onScroll",value:function(e){if(!this.isEnabled)return!1;this.updateProgress(e);var t=this.lastPosition===this.boundsMin||this.lastPosition===this.boundsMax,n=this.timelines.localUnclamped===this.boundsMin||this.timelines.localUnclamped===this.boundsMax;if(t&&n)return void(this.timelines.local=this.timelines.localUnclamped);if(this.timelines.localUnclamped>=this.boundsMin&&this.timelines.localUnclamped<=this.boundsMax)return this.timelines.local=u.clamp(this.timelines.localUnclamped,this.boundsMin,this.boundsMax),this.performTimelineDispatch(),this.requestDOMChange(),void(this.lastPosition=this.timelines.localUnclamped);var r=this.lastPosition>this.boundsMin&&this.lastPosition<this.boundsMax,i=this.timelines.localUnclamped<this.boundsMin||this.timelines.localUnclamped>this.boundsMax;return r&&i?(this.timelines.local=u.clamp(this.timelines.localUnclamped,this.boundsMin,this.boundsMax),this.performTimelineDispatch(),this.requestDOMChange(),void(this.lastPosition=this.timelines.localUnclamped)):void(null!==this.gui&&this.gui.onScrollUpdate(this.timelines))}},{key:"convertScrollPositionToTValue",value:function(e){return this.hasDuration()?u.map(e,this.keyFrames.a,this.keyFrames.d,0,1):0}},{key:"convertTValueToScrollPosition",value:function(e){return this.hasDuration()?u.map(e,0,1,this.keyFrames.a,this.keyFrames.d):0}},{key:"hasDuration",value:function(){return this.keyFrames.a!==this.keyFrames.d}},{key:"getPosition",value:function(){return c.pageMetrics.scrollY}},{key:"getControllerForTarget",value:function(e){return this.anim.getControllerForTarget(e)}}]),t}(l);t.exports=v},{"./KeyframeController":76,"./Keyframes/Keyframe":77,"./Model/AnimSystemModel":80,"./Model/ElementMetricsLookup":82,"./Parsing/ExpressionParser":86,"./Parsing/TimeParser":88,"@marcom/ac-event-emitter-micro":4,"@marcom/ac-raf-emitter/RAFEmitter":55,"@marcom/ac-raf-emitter/draw":60,"@marcom/ac-raf-emitter/update":64,"@marcom/sm-math-utils":102}],90:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function p(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:p(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=e("./ScrollGroup"),u=e("@marcom/sm-math-utils"),c=0,h=-1,m={create:e("@marcom/ac-raf-emitter/RAFEmitter")},f=function(e){function t(e,n){r(this,t),e||(e=document.createElement("div"),e.className="TimeGroup-"+c++);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.name=o.name||e.getAttribute("data-anim-time-group"),o.timeParser.groupIsTimeBased=!0,o._isPaused=!0,o._repeats=0,o._isReversed=!1,o._timeScale=1,o}return o(t,e),s(t,[{key:"finalizeInit",value:function(){if(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"finalizeInit",this).call(this),!this.anim)throw"TimeGroup not instantiated correctly. Please use `AnimSystem.createTimeGroup(el)`"}},{key:"progress",value:function(e){if(void 0===e)return 0===this.boundsMax?0:this.timelines.local/this.boundsMax;var t=e*this.boundsMax;this._onScroll(t)}},{key:"time",value:function(e){return void 0===e?this.timelines.local:(e=u.clamp(e,this.boundsMin,this.boundsMax),void this._onScroll(e))}},{key:"play",value:function(e){this.reversed(!1),this.isEnabled=!0,this._isPaused=!1,this.time(e),this._playheadEmitter.run()}},{key:"reverse",value:function(e){this.reversed(!0),this.isEnabled=!0,this._isPaused=!1,this.time(e),this._playheadEmitter.run()}},{key:"restart",value:function(){this._isReversed?(this.progress(1),this.reverse()):(this.progress(0),this.play())}},{key:"pause",value:function(e){this.time(e),this._isPaused=!0}},{key:"paused",value:function(e){return void 0===e?this._isPaused:(this._isPaused=e,this._isPaused||this.play(),this)}},{key:"onPlayTimeUpdate",value:function(e){if(!this._isPaused){var t=u.clamp(e.delta/1e3,0,.5);this._isReversed&&(t=-t);var n=this.time(),r=n+t*this._timeScale;if(this._repeats===h||this._repeats>0){var i=!1;!this._isReversed&&r>this.boundsMax?(r-=this.boundsMax,i=!0):this._isReversed&&r<0&&(r=this.boundsMax+r,i=!0),i&&(this._repeats=this._repeats===h?h:this._repeats-1)}this.time(r),this._playheadEmitter.run()}}},{key:"updateProgress",value:function(e){return this.hasDuration()?void(this.timelines.localUnclamped=e):void(this.timelines.local=this.timelines.localUnclamped=0)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},t=0,n=this.keyframeControllers.length;t<n;t++)this.keyframeControllers[t].getBounds(e);this.boundsMin=0,this.boundsMax=e.max,this.keyFrames.a=this.keyFrames.b=0,this.keyFrames.c=this.keyFrames.d=this.boundsMax,this.lastPosition=u.lerp(Math.random(),this.boundsMin,this.boundsMax)}},{key:"setupRAFEmitter",value:function(){this.onPlayTimeUpdate=this.onPlayTimeUpdate.bind(this),this._playheadEmitter=new m.create,this._playheadEmitter.on("update",this.onPlayTimeUpdate),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupRAFEmitter",this).call(this)}},{key:"timeScale",value:function(e){return void 0===e?this._timeScale:(this._timeScale=e,this)}},{key:"repeats",value:function(e){return void 0===e?this._repeats:(this._repeats=e,this)}},{key:"reversed",value:function(e){return void 0===e?this._isReversed:(this._isReversed=e,this)}},{key:"getPosition",value:function(){return this.timelines.local}},{key:"convertScrollPositionToTValue",value:function(e){return e}},{key:"convertTValueToScrollPosition",value:function(e){return e}},{key:"hasDuration",value:function(){return this.boundsMax>0}},{key:"duration",get:function(){return this.boundsMax}}]),t}(l);t.exports=f},{"./ScrollGroup":89,"@marcom/ac-raf-emitter/RAFEmitter":55,"@marcom/sm-math-utils":102}],91:[function(e,t,n){"use strict";function r(e){e=e||{},o.call(this),this.id=a.getNewID(),this.executor=e.executor||s,this._reset(),this._willRun=!1,this._didDestroy=!1}var i,o=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=e("@marcom/ac-raf-executor/sharedRAFExecutorInstance"),a=e("@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance");i=r.prototype=Object.create(o.prototype),i.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},i.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},i.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,o.prototype.destroy.call(this),this._didDestroy=!0,e},i.willRun=function(){return this._willRun},i.isRunning=function(){return this._isRunning},i._subscribe=function(){return this.executor.subscribe(this)},i._unsubscribe=function(){return this.executor.unsubscribe(this)},i._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},i._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},i._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=r},{"@marcom/ac-event-emitter-micro":4,"@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance":53,"@marcom/ac-raf-executor/sharedRAFExecutorInstance":66}],92:[function(e,t,n){"use strict";var r=e("./SingleCallRAFEmitter"),i=function(e){this.rafEmitter=new r,this.rafEmitter.on(e,this._onRAFExecuted.bind(this)),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._frameCallbacks=[],this._nextFrameCallbacks=[],this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},o=i.prototype;o.requestAnimationFrame=function(e){return this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2,this._currentFrameID},o.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),this._cancelFrameIdx!==-1&&(this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel())},o._onRAFExecuted=function(e){for(this._frameCallbacks=this._nextFrameCallbacks,this._frameCallbackLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks=[],this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e)},t.exports=i},{"./SingleCallRAFEmitter":94}],93:[function(e,t,n){"use strict";var r=e("./RAFInterface"),i=function(){this.events={}},o=i.prototype;o.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new r(e)),this.events[e].requestAnimationFrame},o.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new r(e)),this.events[e].cancelAnimationFrame},t.exports=new i},{"./RAFInterface":92}],94:[function(e,t,n){"use strict";var r=e("./RAFEmitter"),i=function(e){r.call(this,e)},o=i.prototype=Object.create(r.prototype);o._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=i},{"./RAFEmitter":91}],95:[function(e,t,n){"use strict";var r=e("./RAFInterfaceController");t.exports=r.requestAnimationFrame("draw")},{"./RAFInterfaceController":93}],96:[function(e,t,n){"use strict";var r=e("./RAFInterfaceController");t.exports=r.requestAnimationFrame("update")},{"./RAFInterfaceController":93}],97:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,l={create:e("@marcom/ac-raf-emitter/RAFEmitter"),update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")},u=function(){},c=0,h=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.el=e.el,n.gum=e.gum,n._keyframeController=null,n}return o(t,e),s(t,[{key:"addKeyframe",value:function(e){return this.anim.addKeyframe(this.el,e)}},{key:"addDiscreteEvent",value:function(e){e.event=e.event||"Generic-Event-Name-"+c++;var t=void 0!==e.end&&e.end!==e.start,n=this.addKeyframe(e);return t?(this._addCallbackIfNotNull(n,e.event+":enter",e.onEnter),this._addCallbackIfNotNull(n,e.event+":exit",e.onExit)):(this._addCallbackIfNotNull(n,e.event,e.onEvent),this._addCallbackIfNotNull(n,e.event+":reverse",e.onEventReverse)),n}},{key:"addRAFLoop",value:function(e){var t=["start","end"];if(!t.every(function(t){return e.hasOwnProperty(t)}))return void console.log("BubbleGum.BaseComponent::addRAFLoop required options are missing: "+t.join(" "));var n=new l.create;n.on("update",e.onUpdate||u),n.on("draw",e.onDraw||u),n.on("draw",function(){return n.run()});var r=e.onEnter,i=e.onExit;return e.onEnter=function(){n.run(),r?r():0},e.onExit=function(){n.cancel(),i?i():0},this.addDiscreteEvent(e)}},{key:"addContinuousEvent",value:function(e){e.onDraw||console.log("BubbleGum.BaseComponent::addContinuousEvent required option `onDraw` is missing. Consider using a regular keyframe if you do not need a callback"),e.event=e.event||"Generic-Event-Name-"+c++;var t=this.addKeyframe(e);return t.controller.on(e.event,e.onDraw),t}},{key:"mounted",value:function(){if(this.onComponentWillAppear||this.onComponentWillDisappear){this.onComponentWillAppear=this.onComponentWillAppear?this.onComponentWillAppear.bind(this):void 0,this.onComponentWillDisappear=this.onComponentWillDisappear?this.onComponentWillDisappear.bind(this):void 0;var e={start:"0% - 1px",end:"100% + 1px",event:"_appear"+c++};e.onEnter=this.onComponentWillAppear,e.onExit=this.onComponentWillDisappear,this.addDiscreteEvent(e)}}},{key:"_addCallbackIfNotNull",value:function(e,t,n){return!!n&&(e.controller.on(t,n),!0)}},{key:"onResizeImmediate",value:function(e){}},{key:"onResizeDebounced",value:function(e){}},{key:"onBreakpointChange",value:function(e){}},{key:"anim",get:function(){return this.gum.anim}},{key:"keyframeController",get:function(){return this._keyframeController||(this._keyframeController=this.anim.getControllerForTarget(this.el))}}]),t}(a);t.exports=h},{"@marcom/ac-event-emitter-micro":4,"@marcom/ac-raf-emitter/RAFEmitter":91,"@marcom/ac-raf-emitter/draw":95,"@marcom/ac-raf-emitter/update":96}],98:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=e("@marcom/delayed-initializer"),u=e("@marcom/anim-system"),c=e("@marcom/anim-system/Model/AnimSystemModel"),h=e("./ComponentMap"),m={},f=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.el=e,n.anim=u,n.components=[],n.el.getAttribute("data-anim-scroll-group")||n.el.setAttribute("data-anim-scroll-group","bubble-gum-group"),u.on(c.EVENTS.ON_DOM_GROUPS_CREATED,function(e){n.componentsInitialized=!1,n.initComponents(),n.setupEvents()}),u.on(c.EVENTS.ON_DOM_KEYFRAMES_CREATED,function(){n.components.forEach(function(e){return e.mounted()}),n.trigger(t.EVENTS.DOM_COMPONENTS_MOUNTED)}),l.add(function(){return u.initialize()}),n}return o(t,e),s(t,[{key:"initComponents",value:function(){var e=Array.prototype.slice.call(this.el.querySelectorAll("[data-component-list]"));this.el.hasAttribute("[data-component-list]")&&e.push(this.el);for(var t=0;t<e.length;t++)for(var n=e[t],r=n.getAttribute("data-component-list"),i=r.split(" "),o=0,s=i.length;o<s;o++){var a=i[o];""!==a&&" "!==a&&this.addComponent({el:n,componentName:a})}this.componentsInitialized=!0}},{key:"setupEvents",value:function(){this.onResizeDebounced=this.onResizeDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),this.onBreakpointChange=this.onBreakpointChange.bind(this),u.on(c.PageEvents.ON_RESIZE_IMMEDIATE,this.onResizeImmediate),u.on(c.PageEvents.ON_RESIZE_DEBOUNCED,this.onResizeDebounced),u.on(c.PageEvents.ON_BREAKPOINT_CHANGE,this.onBreakpointChange)}},{key:"addComponent",value:function(e){var n=e.el,r=e.componentName,i=e.data;if(!h.hasOwnProperty(r))throw"BubbleGum::addComponent could not add component to"+n.className+" no component type '"+r+"'found!";var o=h[r];if(!t.componentIsSupported(o,r))return void 0===m[r]&&(console.log("BaseSection::setupComponents unsupported component '"+r+"'. Reason: '"+r+".IS_SUPPORTED' returned false"),m[r]=!0),null;var s=n.dataset.componentList||"";s.includes(r)||(n.dataset.componentList=s.split(" ").concat(r).join(" "));var a=new o({el:n,data:i,gum:this,pageMetrics:c.pageMetrics});return this.components.push(a),this.componentsInitialized&&a.mounted(),a}},{key:"getComponentOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,n=t.querySelector("[data-component-list*="+e+"]");return n?this.components.find(function(e){return e.el===n}):null}},{key:"getComponentsOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,n=Array.from(t.querySelectorAll("[data-component-list*="+e+"]"));return this.components.filter(function(e){return n.includes(e.el)})}},{key:"getComponentsForElement",value:function(e){return this.components.filter(function(e){return e.el})}},{key:"onResizeImmediate",value:function(){this.components.forEach(function(e){return e.onResizeImmediate(c.pageMetrics)})}},{key:"onResizeDebounced",value:function(){this.components.forEach(function(e){return e.onResizeDebounced(c.pageMetrics)})}},{key:"onBreakpointChange",value:function(){this.components.forEach(function(e){return e.onBreakpointChange(c.pageMetrics)})}}],[{key:"componentIsSupported",value:function(e,t){var n=e.IS_SUPPORTED;if(void 0===n)return!0;if("function"!=typeof n)return console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0;var r=e.IS_SUPPORTED();return void 0===r?(console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0):r}}]),t}(a);f.EVENTS={DOM_COMPONENTS_MOUNTED:"DOM_COMPONENTS_MOUNTED"},t.exports=f},{"./ComponentMap":99,"@marcom/ac-event-emitter-micro":4,"@marcom/anim-system":75,"@marcom/anim-system/Model/AnimSystemModel":80,"@marcom/delayed-initializer":101}],99:[function(e,t,n){"use strict";t.exports={BaseComponent:e("./BaseComponent")}},{"./BaseComponent":97}],100:[function(e,t,n){"use strict";var r={create:e("gl-mat4/create"),invert:e("gl-mat4/invert"),clone:e("gl-mat4/clone"),transpose:e("gl-mat4/transpose")},i={create:e("gl-vec3/create"),dot:e("gl-vec3/dot"),normalize:e("gl-vec3/normalize"),length:e("gl-vec3/length"),cross:e("gl-vec3/cross"),fromValues:e("gl-vec3/fromValues")},o={create:e("gl-vec4/create"),transformMat4:e("gl-vec4/transformMat4"),fromValues:e("gl-vec4/fromValues")},s=(Math.PI/180,180/Math.PI),a=0,l=1,u=3,c=4,h=5,m=7,f=11,p=12,d=13,v=15,y=function(e,t){t=t||!1;for(var n=r.clone(e),a=i.create(),l=i.create(),c=i.create(),h=o.create(),p=o.create(),d=(i.create(),0);d<16;d++)n[d]/=n[v];var y=r.clone(n);y[u]=0,y[m]=0,y[f]=0,y[v]=1;var w=(n[3],n[7],n[11],n[12]),E=n[13],k=n[14],x=(n[15],o.create());if(g(n[u])&&g(n[m])&&g(n[f]))h=o.fromValues(0,0,0,1);else{x[0]=n[u],x[1]=n[m],x[2]=n[f],x[3]=n[v];var S=r.invert(r.create(),y),A=r.transpose(r.create(),S);h=o.transformMat4(h,x,A)}a[0]=w,a[1]=E,a[2]=k;var O=[i.create(),i.create(),i.create()];O[0][0]=n[0],O[0][1]=n[1],O[0][2]=n[2],O[1][0]=n[4],O[1][1]=n[5],O[1][2]=n[6],O[2][0]=n[8],O[2][1]=n[9],O[2][2]=n[10],l[0]=i.length(O[0]),i.normalize(O[0],O[0]),c[0]=i.dot(O[0],O[1]),O[1]=_(O[1],O[0],1,-c[0]),l[1]=i.length(O[1]),i.normalize(O[1],O[1]),c[0]/=l[1],c[1]=i.dot(O[0],O[2]),O[2]=_(O[2],O[0],1,-c[1]),c[2]=i.dot(O[1],O[2]),O[2]=_(O[2],O[1],1,-c[2]),l[2]=i.length(O[2]),i.normalize(O[2],O[2]),c[1]/=l[2],c[2]/=l[2];var C=i.cross(i.create(),O[1],O[2]);if(i.dot(O[0],C)<0)for(d=0;d<3;d++)l[d]*=-1,O[d][0]*=-1,O[d][1]*=-1,O[d][2]*=-1;p[0]=.5*Math.sqrt(Math.max(1+O[0][0]-O[1][1]-O[2][2],0)),p[1]=.5*Math.sqrt(Math.max(1-O[0][0]+O[1][1]-O[2][2],0)),p[2]=.5*Math.sqrt(Math.max(1-O[0][0]-O[1][1]+O[2][2],0)),p[3]=.5*Math.sqrt(Math.max(1+O[0][0]+O[1][1]+O[2][2],0)),O[2][1]>O[1][2]&&(p[0]=-p[0]),O[0][2]>O[2][0]&&(p[1]=-p[1]),O[1][0]>O[0][1]&&(p[2]=-p[2]);var P=o.fromValues(p[0],p[1],p[2],2*Math.acos(p[3])),F=b(p);return t&&(c[0]=Math.round(c[0]*s*100)/100,c[1]=Math.round(c[1]*s*100)/100,c[2]=Math.round(c[2]*s*100)/100,F[0]=Math.round(F[0]*s*100)/100,F[1]=Math.round(F[1]*s*100)/100,F[2]=Math.round(F[2]*s*100)/100,P[3]=Math.round(P[3]*s*100)/100),{translation:a,scale:l,skew:c,perspective:h,quaternion:p,eulerRotation:F,axisAngle:P}},_=function(e,t,n,r){var o=i.create();return o[0]=n*e[0]+r*t[0],o[1]=n*e[1]+r*t[1],o[2]=n*e[2]+r*t[2],o},b=function(e){var t,n,r,o=e[3]*e[3],s=e[0]*e[0],a=e[1]*e[1],l=e[2]*e[2],u=s+a+l+o,c=e[0]*e[1]+e[2]*e[3];return c>.499*u?(n=2*Math.atan2(e[0],e[3]),r=Math.PI/2,t=0,i.fromValues(t,n,r)):c<-.499*u?(n=-2*Math.atan2(e[0],e[3]),r=-Math.PI/2,t=0,i.fromValues(t,n,r)):(n=Math.atan2(2*e[1]*e[3]-2*e[0]*e[2],s-a-l+o),r=Math.asin(2*c/u),t=Math.atan2(2*e[0]*e[3]-2*e[1]*e[2],-s+a-l+o),i.fromValues(t,n,r))},g=function(e){return Math.abs(e)<1e-4},w=function(e){var t=String(getComputedStyle(e).transform).trim(),n=r.create();if("none"===t||""===t)return n;var i,o,s=t.slice(0,t.indexOf("("));if("matrix3d"===s)for(i=t.slice(9,-1).split(","),o=0;o<i.length;o++)n[o]=parseFloat(i[o]);else{if("matrix"!==s)throw new TypeError("Invalid Matrix Value");for(i=t.slice(7,-1).split(","),o=i.length;o--;)i[o]=parseFloat(i[o]);n[a]=i[0],n[l]=i[1],n[p]=i[4],n[c]=i[2],n[h]=i[3],n[d]=i[5]}return n};t.exports=function(e,t){var n=w(e);return y(n,t)}},{"gl-mat4/clone":122,"gl-mat4/create":123,"gl-mat4/invert":124,"gl-mat4/transpose":125,"gl-vec3/create":126,"gl-vec3/cross":127,"gl-vec3/dot":128,"gl-vec3/fromValues":129,"gl-vec3/length":130,"gl-vec3/normalize":131,"gl-vec4/create":132,"gl-vec4/fromValues":133,"gl-vec4/transformMat4":134}],101:[function(e,t,n){"use strict";var r=!1,i=!1,o=[];t.exports={NUMBER_OF_FRAMES_TO_WAIT:30,add:function(e){var t=this;if(i&&e(),o.push(e),!r){r=!0;var n=document.documentElement.scrollHeight,s=0,a=function l(){var e=document.documentElement.scrollHeight;if(n!==e)s=0;else if(s++,s>=t.NUMBER_OF_FRAMES_TO_WAIT)return void o.forEach(function(e){return e()});n=e,requestAnimationFrame(l)};requestAnimationFrame(a)}}}},{}],102:[function(e,t,n){"use strict";t.exports={lerp:function(e,t,n){return t+(n-t)*e},map:function(e,t,n,r,i){return r+(i-r)*(e-t)/(n-t)},mapClamp:function(e,t,n,r,i){var o=r+(i-r)*(e-t)/(n-t);return Math.max(r,Math.min(i,o))},norm:function(e,t,n){return(e-t)/(n-t)},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},randFloat:function(e,t){return Math.random()*(t-e)+e},randInt:function(e,t){return Math.floor(Math.random()*(t-e)+e)}}},{}],103:[function(e,t,n){"use strict";function r(e,t){i.call(this),this._id=e||s.ID,this._options=Object.assign({},s.OPTIONS,t),this._allowDOMEventDispatch=!1,this._allowElementStateData=!1,this._options.removeNamespace="boolean"!=typeof this._options.removeNamespace||this._options.removeNamespace,this._el=this._initViewportEl(this._id),this._resizing=!1,this._mediaQueryLists={resolution:{retina:window.matchMedia(u.RETINA)},orientation:{portrait:window.matchMedia(u.PORTRAIT),landscape:window.matchMedia(u.LANDSCAPE)}},this._viewport=this._getViewport(this._options.removeNamespace),this._retina=this._getRetina(this._mediaQueryLists.resolution.retina),this._orientation=this._initOrientation(),this._addListeners(),this._updateElementStateData()}var i=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=e("@marcom/ac-raf-emitter/update"),s={ID:"viewport-emitter",OPTIONS:{removeNamespace:!0}},a={DOM_DISPATCH:"data-viewport-emitter-dispatch",STATE:"data-viewport-emitter-state"},l="::before",u={RETINA:"only screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min-resolution: 1.5dppx), screen and (min-resolution: 144dpi)",PORTRAIT:"only screen and (orientation: portrait)",LANDSCAPE:"only screen and (orientation: landscape)"},c={any:"change:any",orientation:"change:orientation",retina:"change:retina",viewport:"change:viewport"};Object.defineProperty(r,"DOM_DISPATCH_ATTRIBUTE",{get:function(){return a.DOM_DISPATCH}}),Object.defineProperty(r,"DOM_STATE_ATTRIBUTE",{get:function(){return a.STATE}});var h=r.prototype=Object.create(i.prototype);Object.defineProperty(h,"id",{get:function(){return this._id}}),Object.defineProperty(h,"element",{get:function(){return this._el}}),Object.defineProperty(h,"mediaQueryLists",{get:function(){return this._mediaQueryLists}}),Object.defineProperty(h,"viewport",{get:function(){return this._viewport}}),Object.defineProperty(h,"retina",{get:function(){return this._retina}}),Object.defineProperty(h,"orientation",{get:function(){return this._orientation}}),Object.defineProperty(h,"hasDomDispatch",{get:function(){return this._allowDOMEventDispatch}}),h.destroy=function(){this._removeListeners();for(var e in this._options)this._options[e]=null;for(var t in this._mediaQueryLists){var n=this._mediaQueryLists[t];for(var r in n)n[r]=null}this._id=null,this._el=null,this._viewport=null,this._retina=null,this._orientation=null,i.prototype.destroy.call(this)},h._initViewportEl=function(e){var t=document.getElementById(e);return t||(t=document.createElement("div"),t.id=e,t=document.body.appendChild(t)),t.hasAttribute(a.DOM_DISPATCH)||(t.setAttribute(a.DOM_DISPATCH,""),this._allowDOMEventDispatch=!0),t.hasAttribute(a.STATE)||(this._allowElementStateData=!0),t},h._dispatch=function(e,t){var n={viewport:this._viewport,orientation:this._orientation,retina:this._retina};if(this._allowDOMEventDispatch){var r=new CustomEvent(e,{detail:t}),i=new CustomEvent(c.any,{detail:n});this._el.dispatchEvent(r),this._el.dispatchEvent(i)}this.trigger(e,t),this.trigger(c.any,n)},h._addListeners=function(){this._onOrientationChange=this._onOrientationChange.bind(this),this._onRetinaChange=this._onRetinaChange.bind(this),this._onViewportChange=this._onViewportChange.bind(this),this._onViewportChangeUpdate=this._onViewportChangeUpdate.bind(this),this._mediaQueryLists.orientation.portrait.addListener(this._onOrientationChange),this._mediaQueryLists.orientation.landscape.addListener(this._onOrientationChange),this._mediaQueryLists.resolution.retina.addListener(this._onRetinaChange),window.addEventListener("resize",this._onViewportChange)},h._removeListeners=function(){this._mediaQueryLists.orientation.portrait.removeListener(this._onOrientationChange),this._mediaQueryLists.orientation.landscape.removeListener(this._onOrientationChange),this._mediaQueryLists.resolution.retina.removeListener(this._onRetinaChange),window.removeEventListener("resize",this._onViewportChange)},h._updateElementStateData=function(){if(this._allowElementStateData){var e=JSON.stringify({viewport:this._viewport,orientation:this._orientation,retina:this._retina});this._el.setAttribute(a.STATE,e)}},h._getViewport=function(e){var t=window.getComputedStyle(this._el,l).content;return t?(t=t.replace(/["']/g,""),e?t.split(":").pop():t):null},h._getRetina=function(e){return e.matches},h._getOrientation=function(e){var t=this._orientation;if(e.matches){var n=/portrait|landscape/;return e.media.match(n)[0]}return t},h._initOrientation=function(){var e=this._getOrientation(this._mediaQueryLists.orientation.portrait);return e?e:this._getOrientation(this._mediaQueryLists.orientation.landscape)},h._onViewportChange=function(){this._resizing||(this._resizing=!0,o(this._onViewportChangeUpdate))},h._onViewportChangeUpdate=function(){var e=this._viewport;if(this._viewport=this._getViewport(this._options.removeNamespace),e!==this._viewport){var t={from:e,to:this._viewport};this._updateElementStateData(),this._dispatch(c.viewport,t)}this._resizing=!1},h._onRetinaChange=function(e){var t=this._retina;if(this._retina=this._getRetina(e),t!==this._retina){var n={from:t,to:this._retina};this._updateElementStateData(),this._dispatch(c.retina,n)}},h._onOrientationChange=function(e){var t=this._orientation;if(this._orientation=this._getOrientation(e),t!==this._orientation){var n={from:t,to:this._orientation};this._updateElementStateData(),this._dispatch(c.orientation,n)}},t.exports=r},{"@marcom/ac-event-emitter-micro":4,"@marcom/ac-raf-emitter/update":64}],104:[function(e,t,n){"use strict";var r=e("./ViewportEmitter");t.exports=new r},{"./ViewportEmitter":103}],105:[function(e,t,n){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i})},{}],106:[function(e,t,n){t.exports=e("es6-promise").polyfill()},{"es6-promise":107}],107:[function(e,t,n){"use strict";var r=e("./promise/promise").Promise,i=e("./promise/polyfill").polyfill;n.Promise=r,n.polyfill=i},{"./promise/polyfill":111,"./promise/promise":112}],108:[function(e,t,n){"use strict";function r(e){var t=this;if(!i(e))throw new TypeError("You must pass an array to all.");return new t(function(t,n){function r(e){return function(t){i(e,t)}}function i(e,n){a[e]=n,0===--l&&t(a)}var s,a=[],l=e.length;0===l&&t([]);for(var u=0;u<e.length;u++)s=e[u],s&&o(s.then)?s.then(r(u),n):i(u,s)})}var i=e("./utils").isArray,o=e("./utils").isFunction;n.all=r},{"./utils":116}],109:[function(e,t,n){(function(e,t){"use strict";function r(){return function(){e.nextTick(s)}}function i(){var e=0,t=new c(s),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function o(){return function(){h.setTimeout(s,1)}}function s(){for(var e=0;e<m.length;e++){var t=m[e],n=t[0],r=t[1];n(r)}m=[]}function a(e,t){var n=m.push([e,t]);1===n&&l()}var l,u="undefined"!=typeof window?window:{},c=u.MutationObserver||u.WebKitMutationObserver,h="undefined"!=typeof t?t:void 0===this?window:this,m=[];l="undefined"!=typeof e&&"[object process]"==={}.toString.call(e)?r():c?i():o(),n.asap=a}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:32}],110:[function(e,t,n){"use strict";function r(e,t){return 2!==arguments.length?i[e]:void(i[e]=t)}var i={instrument:!1};n.config=i,n.configure=r},{}],111:[function(e,t,n){(function(t){"use strict";function r(){var e;e="undefined"!=typeof t?t:"undefined"!=typeof window&&window.document?window:self;var n="Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),o(t)}();n||(e.Promise=i)}var i=e("./promise").Promise,o=e("./utils").isFunction;n.polyfill=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./promise":112,"./utils":116}],112:[function(e,t,n){"use strict";function r(e){if(!v(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof r))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],i(e,this)}function i(e,t){function n(e){u(t,e)}function r(e){h(t,e)}try{e(n,r)}catch(i){r(i)}}function o(e,t,n,r){
var i,o,s,a,c=v(n);if(c)try{i=n(r),s=!0}catch(m){a=!0,o=m}else i=r,s=!0;l(t,i)||(c&&s?u(t,i):a?h(t,o):e===x?u(t,i):e===S&&h(t,i))}function s(e,t,n,r){var i=e._subscribers,o=i.length;i[o]=t,i[o+x]=n,i[o+S]=r}function a(e,t){for(var n,r,i=e._subscribers,s=e._detail,a=0;a<i.length;a+=3)n=i[a],r=i[a+t],o(t,n,r,s);e._subscribers=null}function l(e,t){var n,r=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(d(t)&&(r=t.then,v(r)))return r.call(t,function(r){return!!n||(n=!0,void(t!==r?u(e,r):c(e,r)))},function(t){return!!n||(n=!0,void h(e,t))}),!0}catch(i){return!!n||(h(e,i),!0)}return!1}function u(e,t){e===t?c(e,t):l(e,t)||c(e,t)}function c(e,t){e._state===E&&(e._state=k,e._detail=t,p.async(m,e))}function h(e,t){e._state===E&&(e._state=k,e._detail=t,p.async(f,e))}function m(e){a(e,e._state=x)}function f(e){a(e,e._state=S)}var p=e("./config").config,d=(e("./config").configure,e("./utils").objectOrFunction),v=e("./utils").isFunction,y=(e("./utils").now,e("./all").all),_=e("./race").race,b=e("./resolve").resolve,g=e("./reject").reject,w=e("./asap").asap;p.async=w;var E=void 0,k=0,x=1,S=2;r.prototype={constructor:r,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(e,t){var n=this,r=new this.constructor(function(){});if(this._state){var i=arguments;p.async(function(){o(n._state,r,i[n._state-1],n._detail)})}else s(this,r,e,t);return r},"catch":function(e){return this.then(null,e)}},r.all=y,r.race=_,r.resolve=b,r.reject=g,n.Promise=r},{"./all":108,"./asap":109,"./config":110,"./race":113,"./reject":114,"./resolve":115,"./utils":116}],113:[function(e,t,n){"use strict";function r(e){var t=this;if(!i(e))throw new TypeError("You must pass an array to race.");return new t(function(t,n){for(var r,i=0;i<e.length;i++)r=e[i],r&&"function"==typeof r.then?r.then(t,n):t(r)})}var i=e("./utils").isArray;n.race=r},{"./utils":116}],114:[function(e,t,n){"use strict";function r(e){var t=this;return new t(function(t,n){n(e)})}n.reject=r},{}],115:[function(e,t,n){"use strict";function r(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=this;return new t(function(t){t(e)})}n.resolve=r},{}],116:[function(e,t,n){"use strict";function r(e){return i(e)||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function o(e){return"[object Array]"===Object.prototype.toString.call(e)}var s=Date.now||function(){return(new Date).getTime()};n.objectOrFunction=r,n.isFunction=i,n.isArray=o,n.now=s},{}],117:[function(e,t,n){!function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=Date.now(),i=Math.max(0,16-(r-e)),o=window.setTimeout(function(){t(r+i)},i);return e=r+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()},{}],118:[function(e,t,n){"use strict";t.exports={Queue:e("./ac-queue/Queue"),QueueItem:e("./ac-queue/QueueItem"),LiveQueue:e("./ac-queue/LiveQueue")}},{"./ac-queue/LiveQueue":119,"./ac-queue/Queue":120,"./ac-queue/QueueItem":121}],119:[function(e,t,n){"use strict";function r(e){this._queue=new i,this._maxProcesses=e||1,this._availableSlots=this._maxProcesses,this._rafId=0,this._isRunning=!1,this._boundFunctions={_run:this._run.bind(this),_releaseSlot:this._releaseSlot.bind(this)}}e("ac-polyfills/Promise"),e("ac-polyfills/requestAnimationFrame"),e("ac-polyfills/Function/prototype.bind");var i=e("./Queue"),o=(e("./QueueItem"),r.prototype);o.start=function(){this._isRunning&&cancelAnimationFrame(this._rafId),this._rafId=requestAnimationFrame(this._boundFunctions._run),this._isRunning=!0},o.pause=function(){this._isRunning&&(cancelAnimationFrame(this._rafId),this._rafId=0),this._isRunning=!1},o.stop=function(){this.pause(),this.clear()},o.enqueue=function(e,t){if("function"!=typeof e)throw new Error("LiveQueue can only enqueue functions");return this._queue.enqueue(e,t)},o.clear=function(){this._queue=new i},o.destroy=function(){this.pause(),this._isRunning=!1,this._queue=null,this._boundFunctions=null},o.count=function(){return this._queue.count()+this.pending()},o.pending=function(){return this._maxProcesses-this._availableSlots},o.isEmpty=function(){return 0===this.count()},o._run=function(){if(this._isRunning&&(this._rafId=requestAnimationFrame(this._boundFunctions._run),!this._queue.isEmpty()&&0!=this._availableSlots)){var e=this._queue.dequeue(),t=e.data();this._isPromise(t)&&(this._retainSlot(),t.then(this._boundFunctions._releaseSlot,this._boundFunctions._releaseSlot)),this._stopRunningIfDone()}},o._retainSlot=function(){this._availableSlots--},o._releaseSlot=function(){this._availableSlots++,this._stopRunningIfDone()},o._stopRunningIfDone=function(){0!=this._rafId&&0===this._queue.count()&&this._availableSlots==this._maxProcesses&&(cancelAnimationFrame(this._rafId),this._rafId=0)},o._isPromise=function(e){return!(!e||"function"!=typeof e.then)},t.exports=r},{"./Queue":120,"./QueueItem":121,"ac-polyfills/Function/prototype.bind":105,"ac-polyfills/Promise":106,"ac-polyfills/requestAnimationFrame":117}],120:[function(e,t,n){"use strict";function r(){this._items=[]}var i=e("./QueueItem"),o=r.prototype;o.enqueue=function(e,t){return void 0===t&&(t=r.PRIORITY_DEFAULT),this.enqueueQueueItem(new i(e,t))},o.enqueueQueueItem=function(e){return this._items.push(e),e},o.dequeue=function(){this._heapSort();var e=this._items.length-1,t=this._items[0];return this._items[0]=this._items[e],this._items.pop(),t},o.peek=function(){return 0==this.count()?null:(this._heapSort(),this._items[0])},o.isEmpty=function(){return 0===this._items.length},o.count=function(){return this._items.length},o.toString=function(){for(var e=["Queue total items: "+this.count()+"\n"],t=0;t<this.count();++t)e.push(this._items[t].toString()+"\n");return e.join("")},o._heapSort=function(){for(var e=0,t=this._items.length-1;t>=0;t--)for(var n=t;n>0;){e++;var r=Math.floor((n-1)/2);if(this._items[n].compareTo(this._items[r])>=0)break;var i=this._items[n];this._items[n]=this._items[r],this._items[r]=i,n=r}},r.PRIORITY_LOW=10,r.PRIORITY_DEFAULT=5,r.PRIORITY_HIGH=1,t.exports=r},{"./QueueItem":121}],121:[function(e,t,n){"use strict";function r(e,t){this.priority=t,this.data=e,this.insertionOrder=i++}var i=0,o=r.prototype;o.compareTo=function(e){return this.priority<e.priority?-1:this.priority>e.priority?1:this.insertionOrder<e.insertionOrder?-1:1},o.toString=function(){return"QueueItem {priority:"+this.priority+",\tdata:"+this.data+"\tinsertionOrder:"+this.insertionOrder+"}"},t.exports=r},{}],122:[function(e,t,n){function r(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}t.exports=r},{}],123:[function(e,t,n){function r(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],124:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=t[9],m=t[10],f=t[11],p=t[12],d=t[13],v=t[14],y=t[15],_=n*a-r*s,b=n*l-i*s,g=n*u-o*s,w=r*l-i*a,E=r*u-o*a,k=i*u-o*l,x=c*d-h*p,S=c*v-m*p,A=c*y-f*p,O=h*v-m*d,C=h*y-f*d,P=m*y-f*v,F=_*P-b*C+g*O+w*A-E*S+k*x;return F?(F=1/F,e[0]=(a*P-l*C+u*O)*F,e[1]=(i*C-r*P-o*O)*F,e[2]=(d*k-v*E+y*w)*F,e[3]=(m*E-h*k-f*w)*F,e[4]=(l*A-s*P-u*S)*F,e[5]=(n*P-i*A+o*S)*F,e[6]=(v*g-p*k-y*b)*F,e[7]=(c*k-m*g+f*b)*F,e[8]=(s*C-a*A+u*x)*F,e[9]=(r*A-n*C-o*x)*F,e[10]=(p*E-d*g+y*_)*F,e[11]=(h*g-c*E-f*_)*F,e[12]=(a*S-s*O-l*x)*F,e[13]=(n*O-r*S+i*x)*F,e[14]=(d*b-p*w-v*_)*F,e[15]=(c*w-h*b+m*_)*F,e):null}t.exports=r},{}],125:[function(e,t,n){function r(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],s=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=s,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}t.exports=r},{}],126:[function(e,t,n){function r(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}t.exports=r},{}],127:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],l=n[2];return e[0]=i*l-o*a,e[1]=o*s-r*l,e[2]=r*a-i*s,e}t.exports=r},{}],128:[function(e,t,n){function r(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=r},{}],129:[function(e,t,n){function r(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}t.exports=r},{}],130:[function(e,t,n){function r(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}t.exports=r},{}],131:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}t.exports=r},{}],132:[function(e,t,n){function r(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}t.exports=r},{}],133:[function(e,t,n){function r(e,t,n,r){var i=new Float32Array(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}t.exports=r},{}],134:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,e}t.exports=r},{}],135:[function(e,t,n){"use strict";var r=void 0,i=void 0,o=void 0,s=void 0;!function(){var t=void 0;try{t=e("@marcom/ac-analytics")}catch(n){}t&&(r=new t.observer.Page,i=new t.observer.Link,o=new t.observer.Section,s=new t.observer.Click)}(),t.exports={SectionObserver:o}},{"@marcom/ac-analytics":void 0}],136:[function(e,t,n){"use strict";var r=e("@marcom/bubble-gum/ComponentMap");r.HeroDeviceAnimator=e("./components/HeroDeviceAnimator"),r.Recenter=e("./components/RecenterComponent"),r.ImageToCanvasGrid=e("./components/ImageToCanvasGrid"),r.SectionEngagement=e("./components/SectionEngagement"),r.ProgressiveImageLoader=e("./components/ProgressiveImageLoader"),r.InlineVideoPlayer=e("./components/InlineVideoPlayer"),r.InlineVideoAnimation=e("./components/InlineVideoAnimation"),r.InlineVideoHero=e("./components/InlineVideoHero")},{"./components/HeroDeviceAnimator":137,"./components/ImageToCanvasGrid":138,"./components/InlineVideoAnimation":143,"./components/InlineVideoHero":144,"./components/InlineVideoPlayer":145,"./components/ProgressiveImageLoader":146,"./components/RecenterComponent":147,"./components/SectionEngagement":148,"@marcom/bubble-gum/ComponentMap":99}],137:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("@marcom/bubble-gum/BaseComponent"),l=(e("@marcom/viewport-emitter"),{update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")}),u=e("@marcom/anim-system"),c=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"mounted",value:function(){var e=this;window.scrollTo(0,0),this.timeline=u.createTimeGroup(),this.timeline.pause(),this.setupDeviceTweens(),this.setupTextTweens(),this.setupTimeScaler(),l.update(function(){var t=e.timeline.addKeyframe({},{start:e.timeline.duration,event:"complete"});t.controller.on("complete",function(){e.timeline.pause()})});var t=Array.from(document.querySelectorAll(".hide-at-start"));l.draw(function(){l.draw(function(){l.draw(function(){e.timeline.addKeyframe({},{start:e.timeline.duration,event:"complete"}).controller.on("complete",function(){return e.timeline.pause()}),l.draw(function(){t.forEach(function(e){return e.classList.remove("hide-at-start")}),e.timeline.play(0)})})})}),this.el.addEventListener("click",function(t){if(t.shiftKey)return void e.timeline.play(0)})}},{key:"setupTimeScaler",value:function(){var e=this;this.addContinuousEvent({start:"25vh",end:"50vh",relativeTo:".main",timeScale:[1,2],ease:1,onDraw:function(t){e.timeline.timeScale(t.tweenProps.timeScale.current)}})}},{key:"setupDeviceTweens",value:function(){var e=this,t=[.01885491382974627,-.0229864507620145,-.055,.017470822792641838,.027798449781152153,-.006112842229432081,.09,.0262431982043147,.0045685042280276394],n=this.el.querySelectorAll(".hero-cluster-S .column .image-hardware");Array.from(n).forEach(function(n,r){var i=getComputedStyle(n),o=parseFloat(i.top),s=isNaN(o)?0:o;parseFloat(i.height);n.style.top=0;var a=t.pop(),l=parseFloat(s),u=590+window.innerHeight+s,c=3,h=.3+a,m=h+c;n.style.transform="translateY("+u+"px)";var f={ease:1,start:h,end:m,y:[u,l]};f.easeFunction="easeOutQuart",e.timeline.addKeyframe(n,f)}),this.timeline.pause()}},{key:"setupTextTweens",value:function(e){var t=document.querySelector(".hero-text-wrap"),n={start:1.3,end:2.8,opacity:[0,1],y:["50%",0],breakpointMask:"S",easeFunction:"easeOutSin",ease:1};this.timeline.addKeyframe(t,n)}}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("animated-hero")}}]),t}(a);t.exports=c},{"@marcom/ac-raf-emitter/draw":60,"@marcom/ac-raf-emitter/update":64,"@marcom/anim-system":75,"@marcom/bubble-gum/BaseComponent":97,"@marcom/viewport-emitter":104}],138:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("@marcom/bubble-gum/BaseComponent"),l=(e("@marcom/ac-image-to-canvas-grid"),e("@marcom/viewport-emitter"),{update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")},function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e.data&&e.data.immediateInit&&n.createCanvas(),n}return o(t,e),s(t,[{key:"mounted",value:function(){this.hasInitialized||this.createCanvas()}},{key:"createCanvas",value:function(){return void(this.hasInitialized=!0)}},{key:"onResizeImmediate",value:function(e){}},{key:"onResizeDebounced",value:function(e){}},{key:"onBreakpointChange",value:function(e){}},{key:"originalClasses",get:function(){return this._originalClasses||(this._originalClasses=this.el.className.split(" "))}}]),t}(a));t.exports=l},{"@marcom/ac-image-to-canvas-grid":34,"@marcom/ac-raf-emitter/draw":60,"@marcom/ac-raf-emitter/update":64,"@marcom/bubble-gum/BaseComponent":97,"@marcom/viewport-emitter":104}],139:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("@marcom/bubble-gum/BaseComponent"),l=e("./VideoSource.js"),u=e("./inlineVideoModel"),c=e("@marcom/viewport-emitter"),h=e("@marcom/ac-console/error"),m=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._el={container:e.el,mediaContainer:null,video:null,controls:{container:null},frames:{poster:null,start:null}},n._videoSource=null,n._state={hasControls:!1,hasPlayedThrough:!1,promises:{play:null,load:null},loaded:!1,ended:!1,user:{prefersReducedMotion:document.documentElement.classList.contains("reduced-motion")},hasStickyInteraction:document.documentElement.classList.contains("no-static-interaction")},n.load=n.load.bind(n),n.play=n.play.bind(n),n.pause=n.pause.bind(n),n.reset=n.reset.bind(n),n.userPlay=n.userPlay.bind(n),n._onFirstFrameLoaded=n._onFirstFrameLoaded.bind(n),n._onAnimPlay=n._onAnimPlay.bind(n),n._onEnded=n._onEnded.bind(n),n}return o(t,e),s(t,null,[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("inline-video")}}]),s(t,[{key:"mounted",value:function(){this._el.mediaContainer=this._el.container.querySelector(u.core.selectMediaContainer),this._el.video=this._el.container.querySelector(u.core.selectVideo),this._el.controls.container=this._el.container.querySelector(u.core.selectCtrlContainer),this._el.frames.poster=this._el.container.querySelector(u.core.selectPosterFrame),this._el.frames.start=this._el.container.querySelector(u.core.selectStartFrame),this._state.hasControls=this._checkForControls(),this._createVideoSource(),this._setupEvents()}},{key:"load",value:function(){var e=this;if(!this._state.promises.load)return this._state.promises.load=this._videoSource.load().then(function(t){return e._onLoadSuccess(t)},function(t){return e._onLoadFailure(t)})}},{key:"_onLoadSuccess",value:function(e){var t=this;return new Promise(function(n,r){var i=function o(){return t._state.loaded=!0,t._el.video.removeEventListener("loadeddata",o),t._onFirstFrameLoaded(),t._deactivateFrame("start").then(n)};t._el.video.addEventListener("loadeddata",i),t._el.video.setAttribute("src",e),t._el.video.load()})}},{key:"_onFirstFrameLoaded",value:function(){this._videoSource&&this._videoSource.urlHistory.length>1&&this._videoSource.revokeLastUrl()}},{key:"_onLoadFailure",value:function(e){var t=this;h("inline-video load error:",e),this._state.promises.load=null,this._state.loaded=!1,this._state.ended=!0,this._activateFrame("poster").then(function(){return t._deactivateFrame("start")}).then(function(){t._el.video.getAttribute("src")&&(t._el.video.setAttribute("src",""),t._videoSource.revokeLastUrl())})}},{key:"play",value:function(e){var t=this;if(!this._state.promises.play&&this._el.video.paused&&!this._state.user.paused){var n=this._state.promises.load;return n||this._state.loaded||(n=this.load()),n.then(function(){return new Promise(function(n,r){t._el.video.onended=function(){n(t._onEnded())},"function"==typeof e&&e();var i=t._el.video.play();t._state.promises.play=i?i:Promise.resolve()})})}}},{key:"pause",value:function(){var e=this,t=this._state.promises.play;return t?new Promise(function(n,r){t.then(function(){e._el.video.pause(),e._state.promises.play=null,n()})}):Promise.resolve()}},{key:"reset",value:function(){var e=this;this._state.ended=!1;var t=this._state.promises.play;return t?t.then(function(){e.pause()}):Promise.resolve()}},{key:"userPlay",value:function(){return this._state.hasPlayedThrough=!1,this.play()}},{key:"_checkForControls",value:function(){var e=this._el.controls.container;return e&&e.childElementCount>0}},{key:"_createVideoSource",value:function(){var e={el:this._el.video,viewport:l.convertViewportName(c.viewport),resolution:l.convertToResolution(c.retina)};e=Object.assign({},e,this._setVideoSourceOptions()),this._videoSource=new l(e)}},{key:"_setVideoSourceOptions",value:function(){return{}}},{key:"_setupEvents",value:function(){this._setupAnimLoad(),(!this._state.user.prefersReducedMotion||this._state.user.prefersReducedMotion&&!this._state.hasControls)&&this._setupAnimPlay()}},{key:"_setupAnimLoad",value:function(){var e=this._state.hasStickyInteraction,t=e?this.keyframeController&&this.keyframeController.getNearestKeyframeForAttribute(0,u.core.animEvtLoad):null;t||(t=this.addDiscreteEvent({event:"inline-video-load",start:"-150vh",end:"100% + 150vh",breakpointMask:""+(e?"LM":"LMS")}),e&&(t=this.addDiscreteEvent({event:"inline-video-load",start:"-30vh",end:"100rh + 100vh",relativeTo:".sticky-container",breakpointMask:"S"}))),t.controller.on("inline-video-load:enter",this.load)}},{key:"_setupAnimPlay",value:function(){var e=this._state.hasStickyInteraction,t=e?this.keyframeController&&this.keyframeController.getNearestKeyframeForAttribute(0,u.core.animEvtPlay):null;t||(t=this.addDiscreteEvent({event:"inline-video-play",start:"0% - 50vh",end:"100% - 30vh",breakpointMask:""+(e?"LM":"LMS")}),e&&(t=this.addDiscreteEvent({event:"inline-video-play",start:"70%",end:"100% + 80vh",breakpointMask:"S"}))),t.controller.on("inline-video-play:enter",this._onAnimPlay),t.controller.on("inline-video-play:exit",this.pause)}},{key:"_onAnimPlay",value:function(){this._state.hasPlayedThrough||this.play()}},{key:"_onEnded",value:function(){return this._state.ended=!0,this._state.hasPlayedThrough=!0,this.reset()}},{key:"_activateFrame",value:function(e){var t=this;return new Promise(function(n,r){var i=function o(){t._el.frames[e].removeEventListener("transitionend",o),n()};t._el.frames[e].classList.contains(u.core.setStaticShow)&&t._el.frames[e].classList.remove(u.core.setStaticShow),t._el.frames[e].classList.remove(u.core.setInactive),t._el.frames[e].classList.contains(u.core.setActive)?n():(t._el.frames[e].addEventListener("transitionend",i),t._el.frames[e].classList.add(u.core.setActive))})}},{key:"_deactivateFrame",value:function(e){var t=this;return new Promise(function(n,r){t._el.frames[e].classList.contains(u.core.setActive)?(t._el.frames[e].addEventListener("transitionend",n),t._el.frames[e].classList.remove(u.core.setActive)):n()})}}]),t}(a);t.exports=m},{"./VideoSource.js":140,"./inlineVideoModel":142,"@marcom/ac-console/error":1,"@marcom/bubble-gum/BaseComponent":97,"@marcom/viewport-emitter":104}],140:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./XhrRequest"),s=e("./inlineVideoModel"),a={PLACEHOLDER:{VIEWPORT:"{{viewport}}",RESOLUTION:"{{retina}}"},REGEXP:{VIEWPORT:"",RESOLUTION:""}};a.REGEXP.VIEWPORT=new RegExp(a.PLACEHOLDER.VIEWPORT),a.REGEXP.RESOLUTION=new RegExp(a.PLACEHOLDER.RESOLUTION);var l=new Map;l.set("basePath",s.core.attrBasePath),l.set("locale",s.core.attrLocale),l.set("path",s.core.attrPath),l.set("name",s.core.attrName);var u={basePath:"/105/media/",locale:"us",path:"",format:"mp4"},c=function(){function e(t){r(this,e);var n=Object.assign({},u,t);this._template="",this._state={viewport:n.viewport,resolution:n.resolution,blob:"",xhr:"",src:"",objectUrl:{url:"",revoked:!1}},delete n.viewport,delete n.resolution,this._history={urls:[]},this._initialize(n)}return i(e,null,[{key:"convertToResolution",value:function(e){return e?"2x":"1x"}},{key:"convertViewportName",value:function(e){return"xlarge"===e||"L"===e?"large":"M"===e?"medium":"S"===e?"small":e}}]),i(e,[{key:"load",value:function(){var e=this,t=new o(this._state.src,{responseType:"blob"});return t.open(),t.send().then(function(t){var n=t.xhr,r=t.response;e._state.blob=r,e._state.xhr=n;var i=window.URL.createObjectURL(r);return e._state.objectUrl.url=i,e._updateUrlHistory(),i},function(e){return Promise.reject(e)})}},{key:"revokeLastUrl",value:function(){var e=this._history.urls.length,t=2;if(!(e<t)){var n=this._history.urls,r=n.splice(e-t),i=r.shift();window.URL.revokeObjectURL(i.url),i.revoked=!0,r.unshift(i),this._history.urls=n.concat(r)}}},{key:"changeViewport",value:function(e){this._updateSrc(e,this._state.resolution),this._state.viewport=e}},{key:"changeResolution",value:function(t){var n=e.convertToResolution(t);this._updateSrc(this._state.viewport,n),this._state.resolution=t}},{key:"destroy",value:function(){this._revokeAllUrls()}},{key:"_revokeAllUrls",value:function(){this._history.urls.forEach(function(e){e.revoked||(window.URL.revokeObjectURL(e.url),e.revoked=!0)})}},{key:"_initialize",value:function(e){var t=e.el;delete e.el;var n=this._createSegmentMap(t,e);this._setTemplate(n,e),this._getDOMOverride(t,"resolution"),this._getDOMOverride(t,"viewport"),this._updateSrc(this._state.viewport,this._state.resolution)}},{key:"_createSegmentMap",value:function(e,t){var n=this,r=new Map;return l.forEach(function(i,o){var s=e.getAttribute(i);s||"string"!=typeof t[o]||(s=t[o]),s&&(s=n._formatPathSegment(s),r.set(o,s))}),r}},{key:"_formatPathSegment",value:function(e){var t=/^\s*\/+/,n=/\/+\s*$/;return e=e.replace(t,""),n.test(e)?e.replace(n,"/"):e+"/"}},{key:"_setTemplate",value:function(e,t){var n="/";e.forEach(function(e){n+=e}),this._template=this._createTemplate(n,t)}},{key:"_createTemplate",value:function(e,t){return e.concat(a.PLACEHOLDER.VIEWPORT+a.PLACEHOLDER.RESOLUTION+"."+t.format)}},{key:"_getDOMOverride",value:function(e,t){var n="attr"+(t.charAt(0).toUpperCase()+t.slice(1)),r=e.getAttribute(s.core[n]);r&&(this._state[t]=r)}},{key:"_updateSrc",value:function(e,t){this._state.src=this._createSrc(this._template,e,t)}},{key:"_createSrc",value:function(e,t,n){return n="1x"===n?"":"_"+n,e.replace(a.REGEXP.VIEWPORT,t).replace(a.REGEXP.RESOLUTION,n)}},{key:"_updateUrlHistory",value:function(){this._history.urls.push(Object.assign({},this._state.objectUrl))}},{key:"src",get:function(){return this._state.src}},{key:"video",get:function(){return this._state.objectUrl.url}},{key:"urlHistory",get:function(){return this._history.urls}}]),e}();t.exports=c},{"./XhrRequest":141,"./inlineVideoModel":142}],141:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("@marcom/ac-url/parseURL"),s=e("@marcom/ac-console/error"),a=e("@marcom/ac-console/log"),l={requestMethod:"GET",timeout:3e4},u="href",c=function(){function e(t,n){return r(this,e),t||"string"==typeof t?(this._src=o(t)[u],this._opts=Object.assign(l,n),this._xhr=new XMLHttpRequest,this._promise=null,this._metrics={progress:0,totalAssetSize:0,time:{requested:0,load:{start:0,end:0,total:0}}},this._onLoadStart=this._onLoadStart.bind(this),this._onProgress=this._onProgress.bind(this),void(this._rejectData=this._rejectData.bind(this))):void s("createXhr(src, opts), a src is required to create an XMLHttpRequest")}return i(e,null,[{key:"isCORSRequest",value:function(e){return window.location.hostname!==o(e).hostname}},{key:"isSupported",get:function(){return window.XMLHttpRequest&&"function"==typeof window.XMLHttpRequest}}]),i(e,[{key:"open",value:function(){0===this._xhr.readyState&&(this._xhr.open(this._opts.requestMethod,this._src,!0,this._opts.user,this._opts.password),this._setXhrProps(),a("XmlHttpRequest opened and properties set"))}},{key:"send",value:function(){var e=this;return this._promise?this._promise:this._promise=new Promise(function(t,n){e._xhr.onprogress=e._onProgress,e._xhr.onloadstart=e._onLoadStart,e._xhr.onload=function(){return e._onLoad(t,n)},e._xhr.ontimeout=function(t){return e._rejectData(n,t)},e._xhr.onerror=function(t){return e._rejectData(n,t)},e._xhr.onabort=function(t){return e._rejectData(n,t)},e._metrics.time.requested=new Date,e._xhr.send(),a("XmlHttpRequest sent")})}},{key:"destroy",value:function(){var e=this;return 4!==this._xhr.readyState&&this._xhr.abort(),this._promise=this._promise||Promise.resolve(),this._promise.then(function(){e._nullifyConstructorProps()})}},{key:"_nullifyConstructorProps",value:function(){this._src=null,this._metrics={progress:null,totalAssetSize:null,time:{requested:null,load:{start:null,end:null,total:null}}}}},{key:"_calcTotalLoadTime",value:function(){this._metrics.time.load.end=Date.now(),this._metrics.time.load.total=this._metrics.time.load.end-this._metrics.time.load.start}},{key:"_setXhrProps",value:function(){var e=this;Object.keys(this._opts).forEach(function(t){t in e._xhr&&"function"!=typeof e._xhr[t]&&(e._xhr[t]=e._opts[t])})}},{key:"_onLoadStart",value:function(){this._metrics.time.load.start=new Date,this._metrics.progress=0,a("XmlHttpRequest loading")}},{key:"_onLoad",value:function(e,t){var n=this._xhr.status;if(200!==n&&4===this._xhr.readyState)return t(n);this._calcTotalLoadTime();var r={xhr:this._xhr,response:this._xhr.response};return a("XmlHttpRequest loaded"),e(r)}},{key:"_onProgress",value:function(e){this._metrics.totalAssetSize||(this._metrics.totalAssetSize=e.total),this._metrics.progress=e.total?e.loaded/e.total:0}},{key:"_rejectData",value:function(e,t){var n={type:t.type,xhrStatus:this._xhr.status,detail:t};return s("XhrRequest failed due to",n),e(n)}},{key:"xhr",get:function(){return this._xhr}},{key:"requestUrl",get:function(){return this._src}},{key:"progress",get:function(){return this._metrics.progress}},{key:"totalAssetSize",get:function(){return this._metrics.totalAssetSize}},{key:"requestedAtTime",get:function(){return this._metrics.time.requested}},{key:"loadStartTime",get:function(){return this._metrics.time.load.start}},{key:"loadEndTime",get:function(){return this._metrics.time.load.end}},{key:"totalLoadTime",get:function(){return this._metrics.time.load.total}}]),e}();t.exports=c},{"@marcom/ac-console/error":1,"@marcom/ac-console/log":3,"@marcom/ac-url/parseURL":70}],142:[function(e,t,n){"use strict";t.exports={core:{selectVideo:"video",selectMediaContainer:".inline-video-media",selectCtrlContainer:".inline-video-controls",selectPosterFrame:".inline-video-posterframe",selectStartFrame:".inline-video-startframe",selectEndFrame:".inline-video-endframe",setActive:"active",setInactive:"inactive",setStaticShow:"static-show",setStaticHide:"static-hide",attrResolution:"data-inline-video-resolution",attrViewport:"data-inline-video-viewport",attrBasePath:"data-inline-video-basePath",attrLocale:"data-inline-video-locale",attrPath:"data-inline-video-path",attrName:"data-inline-video-name",animEvtLoad:"inline-video-load",animEvtPlay:"inline-video-play"},animation:{selectCtrlReplay:".inline-video-button-replay",attrDisabled:"disabled"},player:{selectCtrlLoading:".inline-video-graphic-loading",selectCtrlPlay:".inline-video-button-play",selectCtrlpause:".inline-video-button-pause"}}},{}],143:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function m(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:m(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=e("./InlineVideo/InlineVideo"),u=e("./InlineVideo/inlineVideoModel"),c="/ios/ios-12-preview/2018/893398f7-2ae8-4421-a5dd-fad689a0a538/anim",h=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._el.controls.replay=null,n._onClickReplay=n._onClickReplay.bind(n),n}return o(t,e),s(t,[{key:"mounted",value:function(){this._el.controls.replay=this._el.container.querySelector(u.animation.selectCtrlReplay),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mounted",this).call(this)}},{key:"onResizeImmediate",value:function(e){if(!this._el.video.paused&&this._state.promises.play){var t=this._el.video;t.currentTime=t.duration}}},{key:"onBreakpointChange",value:function(e){this._state.ended&&(this._enableReplayControl(),this.reset())}},{key:"play",value:function(e){var n=this,r=function(){n._disableReplayControl()};a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this,r)}},{key:"_setVideoSourceOptions",value:function(){return{locale:"ww",path:c}}},{key:"_setupEvents",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setupEvents",this).call(this);var e=this._state.hasControls;e&&this._el.controls.replay.addEventListener("click",this._onClickReplay),this._state.user.prefersReducedMotion&&e&&this._enableReplayControl()}},{key:"_onEnded",value:function(){var e=this;return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onEnded",this).call(this).then(function(){e._enableReplayControl()})}},{key:"_onClickReplay",value:function(){var e=this;this.reset().then(function(){e.userPlay()})}},{key:"_enableReplayControl",value:function(){this._state.hasControls&&this._el.controls.replay.removeAttribute(u.animation.attrDisabled)}},{key:"_disableReplayControl",value:function(){this._state.hasControls&&this._el.controls.replay.setAttribute(u.animation.attrDisabled,"")}}]),t}(l);t.exports=h},{"./InlineVideo/InlineVideo":139,"./InlineVideo/inlineVideoModel":142}],144:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function m(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:m(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./InlineVideo/InlineVideo"),u=e("@marcom/viewport-emitter"),c="/ios/ios-12-preview/2018/893398f7-2ae8-4421-a5dd-fad689a0a538/anim",h=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,null,[{key:"IS_SUPPORTED",value:function(){return l.IS_SUPPORTED&&"small"!==u.viewport}}]),a(t,[{key:"mounted",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mounted",this).call(this),this.load().then(function(){e.play()})}},{key:"onBreakpointChange",value:function(e){}},{key:"_setVideoSourceOptions",value:function(){return{locale:"ww",path:c}}},{key:"_setupEvents",value:function(){}}]),t}(l);t.exports=h},{"./InlineVideo/InlineVideo":139,"@marcom/viewport-emitter":104}],145:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function p(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:p(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=e("./InlineVideo/InlineVideo"),u=e("./InlineVideo/inlineVideoModel"),c=e("./InlineVideo/VideoSource.js"),h={draw:e("@marcom/ac-raf-emitter/draw")},m="/ios/ios-12-preview/2018/893398f7-2ae8-4421-a5dd-fad689a0a538/anim",f=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._el.controls.loading=null,n._el.controls.play=null,n._el.controls.pause=null,n._state.user.pause=!1,n._onClickPlay=n._onClickPlay.bind(n),n._onClickPause=n._onClickPause.bind(n),n}return o(t,e),s(t,[{key:"mounted",value:function(){this._el.controls.container=this._el.container.querySelector(u.core.selectCtrlContainer),this._el.controls.loading=this._el.container.querySelector(u.player.selectCtrlLoading),this._el.controls.play=this._el.container.querySelector(u.player.selectCtrlPlay),this._el.controls.pause=this._el.container.querySelector(u.player.selectCtrlpause),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mounted",this).call(this)}},{key:"onResizeImmediate",value:function(e){!this._el.video.paused&&this._state.promises.play&&(this._state.user.paused=!0,this.pause())}},{key:"onBreakpointChange",value:function(e){var t=this;this._state.loaded&&(this._el.video.currentTime=0,this.pause()),this._activateFrame("start").then(h.draw(function(){t._videoSource.changeViewport(c.convertViewportName(e.breakpoint)),t._state.promises.play=null,t._state.promises.load=null,t._state.loaded=!1;var n=t.keyframeController.getNearestKeyframeForAttribute(0,"inline-video-load");n.isCurrentlyInRange&&t.load()}))}},{key:"load",value:function(){return this._state.promises.load||this._el.controls.loading.classList.add(u.core.setActive),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this)}},{key:"play",value:function(e){var n=this,r=function(){n._activatePauseControls()};a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this,r)}},{key:"pause",value:function(){var e=this;a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pause",this).call(this).then(function(){e._state.promises.load?e._activatePlayControls():e._deactivateControls()})}},{key:"_setVideoSourceOptions",value:function(){return{locale:"ww",path:m}}},{key:"_setupEvents",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setupEvents",this).call(this),this._state.hasControls&&(this._el.controls.play.addEventListener("click",this._onClickPlay),this._el.controls.pause.addEventListener("click",this._onClickPause))}},{key:"_onLoadFailure",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onLoadFailure",this).call(this,e),this._el.controls.loading.classList.remove(u.core.setActive)}},{key:"_onFirstFrameLoaded",value:function(){this._el.controls.loading.classList.remove(u.core.setActive),this._activatePlayControls(),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onFirstFrameLoaded",this).call(this)}},{key:"_onClickPlay",value:function(){this._state.user.paused=!1,this._state.ended=!1,this.userPlay()}},{key:"_onClickPause",value:function(){this._state.user.paused=!0,this.pause()}},{key:"_activatePlayControls",value:function(){this._state.hasControls&&this._state.loaded&&(this._el.controls.pause.classList.remove(u.core.setActive),this._el.controls.play.classList.add(u.core.setActive))}},{key:"_activatePauseControls",value:function(){this._state.hasControls&&this._state.loaded&&(this._el.controls.play.classList.remove(u.core.setActive),this._el.controls.pause.classList.add(u.core.setActive))}},{key:"_deactivateControls",value:function(){this._state.hasControls&&(this._el.controls.play.classList.remove(u.core.setActive),this._el.controls.pause.classList.remove(u.core.setActive))}}]),t}(l);t.exports=f},{"./InlineVideo/InlineVideo":139,"./InlineVideo/VideoSource.js":140,"./InlineVideo/inlineVideoModel":142,"@marcom/ac-raf-emitter/draw":60}],146:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("@marcom/bubble-gum/BaseComponent"),l=e("@marcom/ac-raf-emitter/draw"),u="data-progressive-image",c=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._imgArr=Array.from(n.el.querySelectorAll("["+u+"]")),n._loadKeyFrame=null,n._state={loaded:!1,hasStickyInteraction:document.documentElement.classList.contains("no-static-interaction")},n.load=n.load.bind(n),n}return o(t,e),s(t,null,[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("progressive-image")}}]),s(t,[{key:"mounted",value:function(){this._setupAnimLoad()}},{key:"load",value:function(){var e=this;this._state.loaded||(this._imgArr.forEach(function(t){e._cssImgLoad(t)}),this._loadKeyFrame.controller.off("ProgressiveImageLoad:enter",this.load))}},{key:"_setupAnimLoad",value:function(){var e=this._state.hasStickyInteraction;this._loadKeyFrame=this.animController&&this.animController.getNearestKeyframeForAttribute(0,"progressive-image-load"),this._loadKeyFrame||(this._loadKeyFrame=this.addDiscreteEvent({start:"0% - 100vh",end:"100% + 100vh",event:"ProgressiveImageLoad",breakpointMask:""+(e?"LM":"LMS")}),e&&(this._loadKeyFrame=this.addDiscreteEvent({event:"ProgressiveImageLoad",start:"0rh - 50vh",end:"100rh + 100vh",relativeTo:".sticky-container",breakpointMask:"S"}))),this._loadKeyFrame.controller.on("ProgressiveImageLoad:enter",this.load)}},{key:"_cssImgLoad",value:function(e){l(function(){e.removeAttribute(u)})}}]),t}(a);t.exports=c},{"@marcom/ac-raf-emitter/draw":60,"@marcom/bubble-gum/BaseComponent":97}],147:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("@marcom/bubble-gum/BaseComponent"),l=(e("@marcom/ac-image-to-canvas-grid"),e("@marcom/viewport-emitter"),{update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")}),u=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isEnabled="S"===e.pageMetrics.breakpoint,n.metrics=e.pageMetrics,n}return o(t,e),s(t,[{key:"mounted",value:function(){var e=this;this.verticallyCenteredEl=this.el.querySelector(".vertically-centered"),this.contentEl=this.el.querySelector(".sticky-content"),this.peakingEl=this.el.querySelector(".peaking-content"),this.previousSectionSibling=this.el.parentElement.previousElementSibling,this.relativeToQS=this.previousSectionSibling.className.replace(/\ /g,"."),this.el.querySelectorAll(".section-content").forEach(function(t){e.anim.addKeyframe(t,{relativeTo:".sticky-container",start:"-10vh",end:"100rh + 10vh",toggle:!0,breakpointMask:"S",cssClass:"sticky-interaction-visible"})}),this.peakingEl&&(this.willChangeKeyframe=this.anim.addKeyframe(this.peakingEl,{start:"100rh - 100vh",end:"100rh + 50vh",cssClass:"will-change",relativeTo:"."+this.relativeToQS,breakpointMask:"S",toggle:!0}),this.yKeyframe=this.peakingEl._animInfo.controller._allKeyframes.filter(function(e){return void 0!==e.animValues.y})[0],l.update(function(){[e.peakingEl.querySelector("figure")].forEach(function(t){return t&&e.gum.addComponent({el:t,componentName:"ImageToCanvasGrid",data:{immediateInit:!0}})})})),this.updateContainerHeightAndChildPadding()}},{key:"onResizeDebounced",value:function(e){this.metrics=e,this.updateContainerHeightAndChildPadding()}},{key:"onBreakpointChange",value:function(e){this.isEnabled="S"===e.breakpoint,this.isEnabled?this.onResizeDebounced(e):this.disable()}},{key:"disable",value:function(){this.verticallyCenteredEl.removeAttribute("style"),this.el.removeAttribute("style"),this.yKeyframe&&this.yKeyframe.overwriteProps({y:[0,0]})}},{key:"updateContainerHeightAndChildPadding",value:function(){var e=this;this.isEnabled&&l.draw(function(){e.verticallyCenteredEl.style.paddingTop="0px",l.update(function(){var t=e.verticallyCenteredEl.clientHeight,n=e.contentEl.clientHeight,r=e.metrics.windowHeight,i=e.getOffsetTop();l.draw(function(){var o=Math.round(.5*r-.5*t);if(e.verticallyCenteredEl.style.paddingTop=o+"px",e.el.style.height=Math.round(n+r+o)+"px",e.yKeyframe){var s=r-(i+o),a="100rh - "+s,l="100rh";e.yKeyframe.controller.group._onResizeDebounced(),e.yKeyframe.overwriteProps({relativeTo:"."+e.relativeToQS,start:a,end:l,ease:.5,easeFunction:"linear",y:[s,0]}),e.willChangeKeyframe&&e.willChangeKeyframe.overwriteProps({start:a+" - 50vh",end:l+" + 50vh"})}})})})}},{key:"getOffsetTop",value:function(){if(!this.peakingEl)return 0;for(var e=0,t=this.peakingEl;t!==this.contentEl;){if(void 0===t)throw"Expected .sticky-content, but reached document.root";e+=t.offsetTop,t=t.offsetParent}return e}}]),t}(a);u.IS_SUPPORTED=function(){var e=document.getElementsByTagName("html")[0];return e.classList.contains("no-static-interaction")},t.exports=u},{"@marcom/ac-image-to-canvas-grid":34,"@marcom/ac-raf-emitter/draw":60,"@marcom/ac-raf-emitter/update":64,"@marcom/bubble-gum/BaseComponent":97,"@marcom/viewport-emitter":104}],148:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("@marcom/bubble-gum/src/BaseComponent"),l=e("../Analytics.js").SectionObserver,u=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._tracking=!1,n._tracked=!1,n._timeout=null,n._exit=n._exit.bind(n),n._enter=n._enter.bind(n),n._engage=n._engage.bind(n),n._elementTracker=l.elementEngagement.elements.filter(function(t){if(t.element.contains(e.el))return t})[0],n._isEnabled="S"===e.pageMetrics.breakpoint,n._isEnabled&&l.pauseElementTracking(n._elementTracker),n.addDiscreteEvent({start:"100vh",end:"100rh",event:"section engagement",relativeTo:".sticky-container",onEnter:n._enter,onExit:n._exit}),n}return o(t,e),s(t,null,[{key:"IS_SUPPORTED",value:function(){try{return l.elementEngagement}catch(e){return!1}}}]),s(t,[{key:"onBreakpointChange",value:function(e){"S"===e.breakpoint?(this._isEnabled=!0,l.pauseElementTracking(this._elementTracker)):(this._isEnabled=!1,this._clearTimeout(),l.resumeElementTracking(this._elementTracker))}},{key:"_enter",value:function(){this._timeout||this._tracked||!this._isEnabled||(this._timeout=setTimeout(this._engage,1e3))}},{key:"_exit",value:function(){!this._tracked&&this._isEnabled&&(this._timeout&&this._clearTimeout(),this._tracking&&this._disengage())}},{key:"_engage",value:function(){this._tracking=!0,l.startSectionEngagement(this._elementTracker)}},{key:"_disengage",value:function(){this._tracked=!0,l.endSectionEngagement(this._elementTracker)}},{key:"_clearTimeout",value:function(){clearTimeout(this._timeout),this._timeout=null}}]),t}(a);t.exports=u},{"../Analytics.js":135,"@marcom/bubble-gum/src/BaseComponent":97}],149:[function(e,t,n){"use strict";var r=e("@marcom/ac-kr-word-joiner").WordJoiner,i=(e("@marcom/ac-get-param"),e("@marcom/ac-feature")),o=e("@marcom/anim-system/AnimSystem"),s=e("@marcom/anim-system/Model/AnimSystemModel"),a=e("@marcom/bubble-gum");e("./ComponentMap");var l={Initialize:function(){this.krWordJoiner(),this.filterResizeEvents();var e=document.querySelector(".main");new a(e)},krWordJoiner:function(){var e=void 0,t=document.documentElement.getAttribute("lang");"ko-KR"===t&&r.shouldJoin()&&(e=new r({dataAttribute:!1}),e.join(),e.destroy())},filterResizeEvents:function(){if(!i.isDesktop()&&i.continuousScrollEventsAvailable()&&i.touchAvailable()){var e={635:748,622:696,553:628,454:529,654:729,696:729,720:795,688:795,910:985,922:985},t=window.innerWidth,n=e[window.innerHeight]?e[window.innerHeight]:window.innerHeight;o.on("ON_DOM_GROUPS_CREATED",function(){return s.pageMetrics.windowHeight=n}),o.on("ON_RESIZE_IMMEDIATE",function(){return s.pageMetrics.windowHeight=n}),window.removeEventListener("resize",o.onResizeImmediate),window.addEventListener("resize",function(r){var i=window.innerWidth,s=e[window.innerHeight]?e[window.innerHeight]:window.innerHeight;i===t&&s<=n||(t=i,n=s,o.onResizeImmediate(r))})}}};l.Initialize()},{"./ComponentMap":136,"@marcom/ac-feature":6,"@marcom/ac-get-param":31,"@marcom/ac-kr-word-joiner":35,"@marcom/anim-system/AnimSystem":75,"@marcom/anim-system/Model/AnimSystemModel":80,"@marcom/bubble-gum":98}]},{},[149]);